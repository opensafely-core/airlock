var xr=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var n=(t,e,r)=>(xr(t,e,"read from private field"),r?r.call(t):e.get(t)),E=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},b=(t,e,r,s)=>(xr(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);var sr=(t,e,r,s)=>({set _(i){b(t,e,i,r)},get _(){return n(t,e,s)}}),U=(t,e,r)=>(xr(t,e,"access private method"),r);import{r as y,e as vi,P as x,j as p,i as bi,c as wi,R as xi}from"./index-xG0evL3U.js";import{c as Ci,g as Ei}from"./_commonjsHelpers-4gQjN7DL.js";/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function At(){return At=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},At.apply(this,arguments)}var at;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(at||(at={}));const ss="popstate";function Ri(t){t===void 0&&(t={});function e(s,i){let{pathname:a,search:o,hash:h}=s.location;return Or("",{pathname:a,search:o,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Ps(i)}return Si(e,r,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Oi(){return Math.random().toString(36).substr(2,8)}function is(t,e){return{usr:t.state,key:t.key,idx:e}}function Or(t,e,r,s){return r===void 0&&(r=null),At({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?yr(e):e,{state:r,key:e&&e.key||s||Oi()})}function Ps(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function yr(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Si(t,e,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,h=at.Pop,c=null,f=d();f==null&&(f=0,o.replaceState(At({},o.state,{idx:f}),""));function d(){return(o.state||{idx:null}).idx}function C(){h=at.Pop;let g=d(),O=g==null?null:g-f;f=g,c&&c({action:h,location:P.location,delta:O})}function v(g,O){h=at.Push;let N=Or(P.location,g,O);r&&r(N,g),f=d()+1;let A=is(N,f),z=P.createHref(N);try{o.pushState(A,"",z)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;i.location.assign(z)}a&&c&&c({action:h,location:P.location,delta:1})}function w(g,O){h=at.Replace;let N=Or(P.location,g,O);r&&r(N,g),f=d();let A=is(N,f),z=P.createHref(N);o.replaceState(A,"",z),a&&c&&c({action:h,location:P.location,delta:0})}function j(g){let O=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof g=="string"?g:Ps(g);return Ue(O,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,O)}let P={get action(){return h},get location(){return t(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ss,C),c=g,()=>{i.removeEventListener(ss,C),c=null}},createHref(g){return e(i,g)},createURL:j,encodeLocation(g){let O=j(g);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:w,go(g){return o.go(g)}};return P}var ns;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ns||(ns={}));function _i(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function ki(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:i=""}=typeof t=="string"?yr(t):t;return{pathname:r?r.startsWith("/")?r:Ti(r,e):e,search:Di(s),hash:Ui(i)}}function Ti(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Cr(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Pi(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Fi(t,e){let r=Pi(t);return e?r.map((s,i)=>i===t.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function ji(t,e,r,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=yr(t):(i=At({},t),Ue(!i.pathname||!i.pathname.includes("?"),Cr("?","pathname","search",i)),Ue(!i.pathname||!i.pathname.includes("#"),Cr("#","pathname","hash",i)),Ue(!i.search||!i.search.includes("#"),Cr("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,h;if(o==null)h=r;else{let C=e.length-1;if(!s&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),C-=1;i.pathname=v.join("/")}h=C>=0?e[C]:"/"}let c=ki(i,h),f=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(f||d)&&(c.pathname+="/"),c}const Ii=t=>t.join("/").replace(/\/\/+/g,"/"),Di=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ui=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,Fs=["post","put","patch","delete"];new Set(Fs);const Mi=["get",...Fs];new Set(Mi);/**
 * React Router v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hr(){return hr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},hr.apply(this,arguments)}const js=y.createContext(null),Kr=y.createContext(null),Wr=y.createContext(null),Hr=y.createContext({outlet:null,matches:[],isDataRoute:!1});function Gr(){return y.useContext(Wr)!=null}function Is(){return Gr()||Ue(!1),y.useContext(Wr).location}function Ds(t){y.useContext(Kr).static||y.useLayoutEffect(t)}function Ni(){let{isDataRoute:t}=y.useContext(Hr);return t?Qi():Ai()}function Ai(){Gr()||Ue(!1);let t=y.useContext(js),{basename:e,future:r,navigator:s}=y.useContext(Kr),{matches:i}=y.useContext(Hr),{pathname:a}=Is(),o=JSON.stringify(Fi(i,r.v7_relativeSplatPath)),h=y.useRef(!1);return Ds(()=>{h.current=!0}),y.useCallback(function(f,d){if(d===void 0&&(d={}),!h.current)return;if(typeof f=="number"){s.go(f);return}let C=ji(f,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ii([e,C.pathname])),(d.replace?s.replace:s.push)(C,d.state,d)},[e,s,o,a,t])}var Us=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Us||{}),Ms=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ms||{});function Li(t){let e=y.useContext(js);return e||Ue(!1),e}function qi(t){let e=y.useContext(Hr);return e||Ue(!1),e}function Bi(t){let e=qi(),r=e.matches[e.matches.length-1];return r.route.id||Ue(!1),r.route.id}function Qi(){let{router:t}=Li(Us.UseNavigateStable),e=Bi(Ms.UseNavigateStable),r=y.useRef(!1);return Ds(()=>{r.current=!0}),y.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,hr({fromRouteId:e},a)))},[t,e])}function $i(t){let{basename:e="/",children:r=null,location:s,navigationType:i=at.Pop,navigator:a,static:o=!1,future:h}=t;Gr()&&Ue(!1);let c=e.replace(/^\/*/,"/"),f=y.useMemo(()=>({basename:c,navigator:a,static:o,future:hr({v7_relativeSplatPath:!1},h)}),[c,h,a,o]);typeof s=="string"&&(s=yr(s));let{pathname:d="/",search:C="",hash:v="",state:w=null,key:j="default"}=s,P=y.useMemo(()=>{let g=_i(d,c);return g==null?null:{location:{pathname:g,search:C,hash:v,state:w,key:j},navigationType:i}},[c,d,C,v,w,j,i]);return P==null?null:y.createElement(Kr.Provider,{value:f},y.createElement(Wr.Provider,{children:r,value:P}))}new Promise(()=>{});/**
 * React Router DOM v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const zi="startTransition",as=vi[zi];function Ki(t){let{basename:e,children:r,future:s,window:i}=t,a=y.useRef();a.current==null&&(a.current=Ri({window:i,v5Compat:!0}));let o=a.current,[h,c]=y.useState({action:o.action,location:o.location}),{v7_startTransition:f}=s||{},d=y.useCallback(C=>{f&&as?as(()=>c(C)):c(C)},[c,f]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.createElement($i,{basename:e,children:r,location:h.location,navigationType:h.action,navigator:o,future:s})}var os;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(os||(os={}));var us;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(us||(us={}));var Mt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ut=typeof window>"u"||"Deno"in window;function Oe(){}function Wi(t,e){return typeof t=="function"?t(e):t}function Sr(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ns(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ls(t,e){const{type:r="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:h}=t;if(o){if(s){if(e.queryHash!==Jr(o,e.options))return!1}else if(!Lt(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof h=="boolean"&&e.isStale()!==h||typeof i<"u"&&i!==e.state.fetchStatus||a&&!a(e))}function cs(t,e){const{exact:r,status:s,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(mt(e.options.mutationKey)!==mt(a))return!1}else if(!Lt(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function Jr(t,e){return((e==null?void 0:e.queryKeyHashFn)||mt)(t)}function mt(t){return JSON.stringify(t,(e,r)=>_r(r)?Object.keys(r).sort().reduce((s,i)=>(s[i]=r[i],s),{}):r)}function Lt(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Lt(t[r],e[r])):!1}function As(t,e){if(t===e)return t;const r=hs(t)&&hs(e);if(r||_r(t)&&_r(e)){const s=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),a=i.length,o=r?[]:{};let h=0;for(let c=0;c<a;c++){const f=r?c:i[c];o[f]=As(t[f],e[f]),o[f]===t[f]&&t[f]!==void 0&&h++}return s===a&&h===s?t:o}return e}function dr(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function hs(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function _r(t){if(!ds(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!ds(r)||!r.hasOwnProperty("isPrototypeOf"))}function ds(t){return Object.prototype.toString.call(t)==="[object Object]"}function Hi(t){return new Promise(e=>{setTimeout(e,t)})}function kr(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?As(t,e):e}function Gi(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function Ji(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var ot,Je,bt,ws,Vi=(ws=class extends Mt{constructor(){super();E(this,ot,void 0);E(this,Je,void 0);E(this,bt,void 0);b(this,bt,e=>{if(!Ut&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){n(this,Je)||this.setEventListener(n(this,bt))}onUnsubscribe(){var e;this.hasListeners()||((e=n(this,Je))==null||e.call(this),b(this,Je,void 0))}setEventListener(e){var r;b(this,bt,e),(r=n(this,Je))==null||r.call(this),b(this,Je,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){n(this,ot)!==e&&(b(this,ot,e),this.onFocus())}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){var e;return typeof n(this,ot)=="boolean"?n(this,ot):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ot=new WeakMap,Je=new WeakMap,bt=new WeakMap,ws),fr=new Vi,wt,Ve,xt,xs,Yi=(xs=class extends Mt{constructor(){super();E(this,wt,!0);E(this,Ve,void 0);E(this,xt,void 0);b(this,xt,e=>{if(!Ut&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){n(this,Ve)||this.setEventListener(n(this,xt))}onUnsubscribe(){var e;this.hasListeners()||((e=n(this,Ve))==null||e.call(this),b(this,Ve,void 0))}setEventListener(e){var r;b(this,xt,e),(r=n(this,Ve))==null||r.call(this),b(this,Ve,e(this.setOnline.bind(this)))}setOnline(e){n(this,wt)!==e&&(b(this,wt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return n(this,wt)}},wt=new WeakMap,Ve=new WeakMap,xt=new WeakMap,xs),pr=new Yi;function Zi(t){return Math.min(1e3*2**t,3e4)}function vr(t){return(t??"online")==="online"?pr.isOnline():!0}var Ls=class{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Er(t){return t instanceof Ls}function qs(t){let e=!1,r=0,s=!1,i,a,o;const h=new Promise((g,O)=>{a=g,o=O}),c=g=>{var O;s||(w(new Ls(g)),(O=t.abort)==null||O.call(t))},f=()=>{e=!0},d=()=>{e=!1},C=()=>!fr.isFocused()||t.networkMode!=="always"&&!pr.isOnline(),v=g=>{var O;s||(s=!0,(O=t.onSuccess)==null||O.call(t,g),i==null||i(),a(g))},w=g=>{var O;s||(s=!0,(O=t.onError)==null||O.call(t,g),i==null||i(),o(g))},j=()=>new Promise(g=>{var O;i=N=>{const A=s||!C();return A&&g(N),A},(O=t.onPause)==null||O.call(t)}).then(()=>{var g;i=void 0,s||(g=t.onContinue)==null||g.call(t)}),P=()=>{if(s)return;let g;try{g=t.fn()}catch(O){g=Promise.reject(O)}Promise.resolve(g).then(v).catch(O=>{var G;if(s)return;const N=t.retry??(Ut?0:3),A=t.retryDelay??Zi,z=typeof A=="function"?A(r,O):A,Y=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,O);if(e||!Y){w(O);return}r++,(G=t.onFail)==null||G.call(t,r,O),Hi(z).then(()=>{if(C())return j()}).then(()=>{e?w(O):P()})})};return vr(t.networkMode)?P():j().then(P),{promise:h,cancel:c,continue:()=>(i==null?void 0:i())?h:Promise.resolve(),cancelRetry:f,continueRetry:d}}function Xi(){let t=[],e=0,r=v=>{v()},s=v=>{v()},i=v=>setTimeout(v,0);const a=v=>{i=v},o=v=>{let w;e++;try{w=v()}finally{e--,e||f()}return w},h=v=>{e?t.push(v):i(()=>{r(v)})},c=v=>(...w)=>{h(()=>{v(...w)})},f=()=>{const v=t;t=[],v.length&&i(()=>{s(()=>{v.forEach(w=>{r(w)})})})};return{batch:o,batchCalls:c,schedule:h,setNotifyFunction:v=>{r=v},setBatchNotifyFunction:v=>{s=v},setScheduler:a}}var se=Xi(),ut,Cs,Bs=(Cs=class{constructor(){E(this,ut,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Sr(this.gcTime)&&b(this,ut,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ut?1/0:5*60*1e3))}clearGcTimeout(){n(this,ut)&&(clearTimeout(n(this,ut)),b(this,ut,void 0))}},ut=new WeakMap,Cs),Ct,Et,Ce,Ye,Ee,ae,qt,lt,Rt,nr,ke,Le,Es,en=(Es=class extends Bs{constructor(e){super();E(this,Rt);E(this,ke);E(this,Ct,void 0);E(this,Et,void 0);E(this,Ce,void 0);E(this,Ye,void 0);E(this,Ee,void 0);E(this,ae,void 0);E(this,qt,void 0);E(this,lt,void 0);b(this,lt,!1),b(this,qt,e.defaultOptions),U(this,Rt,nr).call(this,e.options),b(this,ae,[]),b(this,Ce,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,b(this,Ct,e.state||tn(this.options)),this.state=n(this,Ct),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!n(this,ae).length&&this.state.fetchStatus==="idle"&&n(this,Ce).remove(this)}setData(e,r){const s=kr(this.state.data,e,this.options);return U(this,ke,Le).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){U(this,ke,Le).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s;const r=n(this,Ye);return(s=n(this,Ee))==null||s.cancel(e),r?r.then(Oe).catch(Oe):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(n(this,Ct))}isActive(){return n(this,ae).some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||n(this,ae).some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Ns(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=n(this,ae).find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=n(this,Ee))==null||r.continue()}onOnline(){var r;const e=n(this,ae).find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=n(this,Ee))==null||r.continue()}addObserver(e){n(this,ae).includes(e)||(n(this,ae).push(e),this.clearGcTimeout(),n(this,Ce).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){n(this,ae).includes(e)&&(b(this,ae,n(this,ae).filter(r=>r!==e)),n(this,ae).length||(n(this,Ee)&&(n(this,lt)?n(this,Ee).cancel({revert:!0}):n(this,Ee).cancelRetry()),this.scheduleGc()),n(this,Ce).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return n(this,ae).length}invalidate(){this.state.isInvalidated||U(this,ke,Le).call(this,{type:"invalidate"})}fetch(e,r){var f,d,C,v;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(n(this,Ye))return(f=n(this,Ee))==null||f.continueRetry(),n(this,Ye)}if(e&&U(this,Rt,nr).call(this,e),!this.options.queryFn){const w=n(this,ae).find(j=>j.options.queryFn);w&&U(this,Rt,nr).call(this,w.options)}const s=new AbortController,i={queryKey:this.queryKey,meta:this.meta},a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(b(this,lt,!0),s.signal)})};a(i);const o=()=>this.options.queryFn?(b(this,lt,!1),this.options.persister?this.options.persister(this.options.queryFn,i,this):this.options.queryFn(i)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),h={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(h),(d=this.options.behavior)==null||d.onFetch(h,this),b(this,Et,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((C=h.fetchOptions)==null?void 0:C.meta))&&U(this,ke,Le).call(this,{type:"fetch",meta:(v=h.fetchOptions)==null?void 0:v.meta});const c=w=>{var j,P,g,O;Er(w)&&w.silent||U(this,ke,Le).call(this,{type:"error",error:w}),Er(w)||((P=(j=n(this,Ce).config).onError)==null||P.call(j,w,this),(O=(g=n(this,Ce).config).onSettled)==null||O.call(g,this.state.data,w,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return b(this,Ee,qs({fn:h.fetchFn,abort:s.abort.bind(s),onSuccess:w=>{var j,P,g,O;if(typeof w>"u"){c(new Error(`${this.queryHash} data is undefined`));return}this.setData(w),(P=(j=n(this,Ce).config).onSuccess)==null||P.call(j,w,this),(O=(g=n(this,Ce).config).onSettled)==null||O.call(g,w,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(w,j)=>{U(this,ke,Le).call(this,{type:"failed",failureCount:w,error:j})},onPause:()=>{U(this,ke,Le).call(this,{type:"pause"})},onContinue:()=>{U(this,ke,Le).call(this,{type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode})),b(this,Ye,n(this,Ee).promise),n(this,Ye)}},Ct=new WeakMap,Et=new WeakMap,Ce=new WeakMap,Ye=new WeakMap,Ee=new WeakMap,ae=new WeakMap,qt=new WeakMap,lt=new WeakMap,Rt=new WeakSet,nr=function(e){this.options={...n(this,qt),...e},this.updateGcTime(this.options.gcTime)},ke=new WeakSet,Le=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:e.meta??null,fetchStatus:vr(this.options.networkMode)?"fetching":"paused",...!s.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Er(i)&&i.revert&&n(this,Et)?{...n(this,Et),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),se.batch(()=>{n(this,ae).forEach(s=>{s.onQueryUpdate()}),n(this,Ce).notify({query:this,type:"updated",action:e})})},Es);function tn(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Pe,Rs,Qs=(Rs=class extends Mt{constructor(e={}){super();E(this,Pe,void 0);this.config=e,b(this,Pe,new Map)}build(e,r,s){const i=r.queryKey,a=r.queryHash??Jr(i,r);let o=this.get(a);return o||(o=new en({cache:this,queryKey:i,queryHash:a,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){n(this,Pe).has(e.queryHash)||(n(this,Pe).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=n(this,Pe).get(e.queryHash);r&&(e.destroy(),r===e&&n(this,Pe).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){se.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return n(this,Pe).get(e)}getAll(){return[...n(this,Pe).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>ls(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>ls(e,s)):r}notify(e){se.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){se.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){se.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pe=new WeakMap,Rs),Fe,Bt,me,Ot,je,He,Os,rn=(Os=class extends Bs{constructor(e){super();E(this,je);E(this,Fe,void 0);E(this,Bt,void 0);E(this,me,void 0);E(this,Ot,void 0);this.mutationId=e.mutationId,b(this,Bt,e.defaultOptions),b(this,me,e.mutationCache),b(this,Fe,[]),this.state=e.state||$s(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...n(this,Bt),...e},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){n(this,Fe).includes(e)||(n(this,Fe).push(e),this.clearGcTimeout(),n(this,me).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){b(this,Fe,n(this,Fe).filter(r=>r!==e)),this.scheduleGc(),n(this,me).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){n(this,Fe).length||(this.state.status==="pending"?this.scheduleGc():n(this,me).remove(this))}continue(){var e;return((e=n(this,Ot))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,h,c,f,d,C,v,w,j,P,g,O,N,A,z,Y,G,I;const r=()=>(b(this,Ot,qs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(u,l)=>{U(this,je,He).call(this,{type:"failed",failureCount:u,error:l})},onPause:()=>{U(this,je,He).call(this,{type:"pause"})},onContinue:()=>{U(this,je,He).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),n(this,Ot).promise),s=this.state.status==="pending";try{if(!s){U(this,je,He).call(this,{type:"pending",variables:e}),await((a=(i=n(this,me).config).onMutate)==null?void 0:a.call(i,e,this));const l=await((h=(o=this.options).onMutate)==null?void 0:h.call(o,e));l!==this.state.context&&U(this,je,He).call(this,{type:"pending",context:l,variables:e})}const u=await r();return await((f=(c=n(this,me).config).onSuccess)==null?void 0:f.call(c,u,e,this.state.context,this)),await((C=(d=this.options).onSuccess)==null?void 0:C.call(d,u,e,this.state.context)),await((w=(v=n(this,me).config).onSettled)==null?void 0:w.call(v,u,null,this.state.variables,this.state.context,this)),await((P=(j=this.options).onSettled)==null?void 0:P.call(j,u,null,e,this.state.context)),U(this,je,He).call(this,{type:"success",data:u}),u}catch(u){try{throw await((O=(g=n(this,me).config).onError)==null?void 0:O.call(g,u,e,this.state.context,this)),await((A=(N=this.options).onError)==null?void 0:A.call(N,u,e,this.state.context)),await((Y=(z=n(this,me).config).onSettled)==null?void 0:Y.call(z,void 0,u,this.state.variables,this.state.context,this)),await((I=(G=this.options).onSettled)==null?void 0:I.call(G,void 0,u,e,this.state.context)),u}finally{U(this,je,He).call(this,{type:"error",error:u})}}}},Fe=new WeakMap,Bt=new WeakMap,me=new WeakMap,Ot=new WeakMap,je=new WeakSet,He=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!vr(this.options.networkMode),status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),se.batch(()=>{n(this,Fe).forEach(s=>{s.onMutationUpdate(e)}),n(this,me).notify({mutation:this,type:"updated",action:e})})},Os);function $s(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Re,Qt,ct,Ss,sn=(Ss=class extends Mt{constructor(e={}){super();E(this,Re,void 0);E(this,Qt,void 0);E(this,ct,void 0);this.config=e,b(this,Re,[]),b(this,Qt,0)}build(e,r,s){const i=new rn({mutationCache:this,mutationId:++sr(this,Qt)._,options:e.defaultMutationOptions(r),state:s});return this.add(i),i}add(e){n(this,Re).push(e),this.notify({type:"added",mutation:e})}remove(e){b(this,Re,n(this,Re).filter(r=>r!==e)),this.notify({type:"removed",mutation:e})}clear(){se.batch(()=>{n(this,Re).forEach(e=>{this.remove(e)})})}getAll(){return n(this,Re)}find(e){const r={exact:!0,...e};return n(this,Re).find(s=>cs(r,s))}findAll(e={}){return n(this,Re).filter(r=>cs(e,r))}notify(e){se.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){return b(this,ct,(n(this,ct)??Promise.resolve()).then(()=>{const e=n(this,Re).filter(r=>r.state.isPaused);return se.batch(()=>e.reduce((r,s)=>r.then(()=>s.continue().catch(Oe)),Promise.resolve()))}).then(()=>{b(this,ct,void 0)})),n(this,ct)}},Re=new WeakMap,Qt=new WeakMap,ct=new WeakMap,Ss);function nn(t){return{onFetch:(e,r)=>{const s=async()=>{var j,P,g,O,N;const i=e.options,a=(g=(P=(j=e.fetchOptions)==null?void 0:j.meta)==null?void 0:P.fetchMore)==null?void 0:g.direction,o=((O=e.state.data)==null?void 0:O.pages)||[],h=((N=e.state.data)==null?void 0:N.pageParams)||[],c={pages:[],pageParams:[]};let f=!1;const d=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},C=e.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${e.options.queryHash}'`))),v=async(A,z,Y)=>{if(f)return Promise.reject();if(z==null&&A.pages.length)return Promise.resolve(A);const G={queryKey:e.queryKey,pageParam:z,direction:Y?"backward":"forward",meta:e.options.meta};d(G);const I=await C(G),{maxPages:u}=e.options,l=Y?Ji:Gi;return{pages:l(A.pages,I,u),pageParams:l(A.pageParams,z,u)}};let w;if(a&&o.length){const A=a==="backward",z=A?an:fs,Y={pages:o,pageParams:h},G=z(i,Y);w=await v(Y,G,A)}else{w=await v(c,h[0]??i.initialPageParam);const A=t??o.length;for(let z=1;z<A;z++){const Y=fs(i,w);w=await v(w,Y)}}return w};e.options.persister?e.fetchFn=()=>{var i,a;return(a=(i=e.options).persister)==null?void 0:a.call(i,s,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=s}}}function fs(t,{pages:e,pageParams:r}){const s=e.length-1;return t.getNextPageParam(e[s],e,r[s],r)}function an(t,{pages:e,pageParams:r}){var s;return(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r)}var re,Ze,Xe,St,_t,et,kt,Tt,_s,on=(_s=class{constructor(t={}){E(this,re,void 0);E(this,Ze,void 0);E(this,Xe,void 0);E(this,St,void 0);E(this,_t,void 0);E(this,et,void 0);E(this,kt,void 0);E(this,Tt,void 0);b(this,re,t.queryCache||new Qs),b(this,Ze,t.mutationCache||new sn),b(this,Xe,t.defaultOptions||{}),b(this,St,new Map),b(this,_t,new Map),b(this,et,0)}mount(){sr(this,et)._++,n(this,et)===1&&(b(this,kt,fr.subscribe(()=>{fr.isFocused()&&(this.resumePausedMutations(),n(this,re).onFocus())})),b(this,Tt,pr.subscribe(()=>{pr.isOnline()&&(this.resumePausedMutations(),n(this,re).onOnline())})))}unmount(){var t,e;sr(this,et)._--,n(this,et)===0&&((t=n(this,kt))==null||t.call(this),b(this,kt,void 0),(e=n(this,Tt))==null||e.call(this),b(this,Tt,void 0))}isFetching(t){return n(this,re).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return n(this,Ze).findAll({...t,status:"pending"}).length}getQueryData(t){var e;return(e=n(this,re).find({queryKey:t}))==null?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);return e!==void 0?Promise.resolve(e):this.fetchQuery(t)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=n(this,re).find({queryKey:t}),i=s==null?void 0:s.state.data,a=Wi(e,i);if(typeof a>"u")return;const o=this.defaultQueryOptions({queryKey:t});return n(this,re).build(this,o).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return se.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var e;return(e=n(this,re).find({queryKey:t}))==null?void 0:e.state}removeQueries(t){const e=n(this,re);se.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=n(this,re),s={type:"active",...t};return se.batch(()=>(r.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(s,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},s=se.batch(()=>n(this,re).findAll(t).map(i=>i.cancel(r)));return Promise.all(s).then(Oe).catch(Oe)}invalidateQueries(t={},e={}){return se.batch(()=>{if(n(this,re).findAll(t).forEach(s=>{s.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=se.batch(()=>n(this,re).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(Oe)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Oe)}fetchQuery(t){const e=this.defaultQueryOptions(t);typeof e.retry>"u"&&(e.retry=!1);const r=n(this,re).build(this,e);return r.isStaleByTime(e.staleTime)?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Oe).catch(Oe)}fetchInfiniteQuery(t){return t.behavior=nn(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Oe).catch(Oe)}resumePausedMutations(){return n(this,Ze).resumePausedMutations()}getQueryCache(){return n(this,re)}getMutationCache(){return n(this,Ze)}getDefaultOptions(){return n(this,Xe)}setDefaultOptions(t){b(this,Xe,t)}setQueryDefaults(t,e){n(this,St).set(mt(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...n(this,St).values()];let r={};return e.forEach(s=>{Lt(t,s.queryKey)&&(r={...r,...s.defaultOptions})}),r}setMutationDefaults(t,e){n(this,_t).set(mt(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...n(this,_t).values()];let r={};return e.forEach(s=>{Lt(t,s.mutationKey)&&(r={...r,...s.defaultOptions})}),r}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const e={...n(this,Xe).queries,...(t==null?void 0:t.queryKey)&&this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Jr(e.queryKey,e)),typeof e.refetchOnReconnect>"u"&&(e.refetchOnReconnect=e.networkMode!=="always"),typeof e.throwOnError>"u"&&(e.throwOnError=!!e.suspense),typeof e.networkMode>"u"&&e.persister&&(e.networkMode="offlineFirst"),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...n(this,Xe).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){n(this,re).clear(),n(this,Ze).clear()}},re=new WeakMap,Ze=new WeakMap,Xe=new WeakMap,St=new WeakMap,_t=new WeakMap,et=new WeakMap,kt=new WeakMap,Tt=new WeakMap,_s),fe,$,$t,de,ht,Pt,Ie,zt,Ft,jt,dt,ft,tt,It,pt,Nt,Kt,Tr,Wt,Pr,Ht,Fr,Gt,jr,Jt,Ir,Vt,Dr,Yt,Ur,gr,zs,ks,un=(ks=class extends Mt{constructor(e,r){super();E(this,pt);E(this,Kt);E(this,Wt);E(this,Ht);E(this,Gt);E(this,Jt);E(this,Vt);E(this,Yt);E(this,gr);E(this,fe,void 0);E(this,$,void 0);E(this,$t,void 0);E(this,de,void 0);E(this,ht,void 0);E(this,Pt,void 0);E(this,Ie,void 0);E(this,zt,void 0);E(this,Ft,void 0);E(this,jt,void 0);E(this,dt,void 0);E(this,ft,void 0);E(this,tt,void 0);E(this,It,new Set);this.options=r,b(this,fe,e),b(this,Ie,null),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(n(this,$).addObserver(this),ps(n(this,$),this.options)?U(this,pt,Nt).call(this):this.updateResult(),U(this,Gt,jr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mr(n(this,$),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mr(n(this,$),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,U(this,Jt,Ir).call(this),U(this,Vt,Dr).call(this),n(this,$).removeObserver(this)}setOptions(e,r){const s=this.options,i=n(this,$);if(this.options=n(this,fe).defaultQueryOptions(e),dr(s,this.options)||n(this,fe).getQueryCache().notify({type:"observerOptionsUpdated",query:n(this,$),observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),U(this,Yt,Ur).call(this);const a=this.hasListeners();a&&ms(n(this,$),i,this.options,s)&&U(this,pt,Nt).call(this),this.updateResult(r),a&&(n(this,$)!==i||this.options.enabled!==s.enabled||this.options.staleTime!==s.staleTime)&&U(this,Kt,Tr).call(this);const o=U(this,Wt,Pr).call(this);a&&(n(this,$)!==i||this.options.enabled!==s.enabled||o!==n(this,tt))&&U(this,Ht,Fr).call(this,o)}getOptimisticResult(e){const r=n(this,fe).getQueryCache().build(n(this,fe),e),s=this.createResult(r,e);return cn(this,s)&&(b(this,de,s),b(this,Pt,this.options),b(this,ht,n(this,$).state)),s}getCurrentResult(){return n(this,de)}trackResult(e){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(n(this,It).add(s),e[s])})}),r}getCurrentQuery(){return n(this,$)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=n(this,fe).defaultQueryOptions(e),s=n(this,fe).getQueryCache().build(n(this,fe),r);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,r))}fetch(e){return U(this,pt,Nt).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),n(this,de)))}createResult(e,r){var G;const s=n(this,$),i=this.options,a=n(this,de),o=n(this,ht),h=n(this,Pt),f=e!==s?e.state:n(this,$t),{state:d}=e;let{error:C,errorUpdatedAt:v,fetchStatus:w,status:j}=d,P=!1,g;if(r._optimisticResults){const I=this.hasListeners(),u=!I&&ps(e,r),l=I&&ms(e,s,r,i);(u||l)&&(w=vr(e.options.networkMode)?"fetching":"paused",d.dataUpdatedAt||(j="pending")),r._optimisticResults==="isRestoring"&&(w="idle")}if(r.select&&typeof d.data<"u")if(a&&d.data===(o==null?void 0:o.data)&&r.select===n(this,zt))g=n(this,Ft);else try{b(this,zt,r.select),g=r.select(d.data),g=kr(a==null?void 0:a.data,g,r),b(this,Ft,g),b(this,Ie,null)}catch(I){b(this,Ie,I)}else g=d.data;if(typeof r.placeholderData<"u"&&typeof g>"u"&&j==="pending"){let I;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(h==null?void 0:h.placeholderData))I=a.data;else if(I=typeof r.placeholderData=="function"?r.placeholderData((G=n(this,jt))==null?void 0:G.state.data,n(this,jt)):r.placeholderData,r.select&&typeof I<"u")try{I=r.select(I),b(this,Ie,null)}catch(u){b(this,Ie,u)}typeof I<"u"&&(j="success",g=kr(a==null?void 0:a.data,I,r),P=!0)}n(this,Ie)&&(C=n(this,Ie),g=n(this,Ft),v=Date.now(),j="error");const O=w==="fetching",N=j==="pending",A=j==="error",z=N&&O;return{status:j,fetchStatus:w,isPending:N,isSuccess:j==="success",isError:A,isInitialLoading:z,isLoading:z,data:g,dataUpdatedAt:d.dataUpdatedAt,error:C,errorUpdatedAt:v,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>f.dataUpdateCount||d.errorUpdateCount>f.errorUpdateCount,isFetching:O,isRefetching:O&&!N,isLoadingError:A&&d.dataUpdatedAt===0,isPaused:w==="paused",isPlaceholderData:P,isRefetchError:A&&d.dataUpdatedAt!==0,isStale:Vr(e,r),refetch:this.refetch}}updateResult(e){const r=n(this,de),s=this.createResult(n(this,$),this.options);if(b(this,ht,n(this,$).state),b(this,Pt,this.options),n(this,ht).data!==void 0&&b(this,jt,n(this,$)),dr(s,r))return;b(this,de,s);const i={},a=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,h=typeof o=="function"?o():o;if(h==="all"||!h&&!n(this,It).size)return!0;const c=new Set(h??n(this,It));return this.options.throwOnError&&c.add("error"),Object.keys(n(this,de)).some(f=>{const d=f;return n(this,de)[d]!==r[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&a()&&(i.listeners=!0),U(this,gr,zs).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&U(this,Gt,jr).call(this)}},fe=new WeakMap,$=new WeakMap,$t=new WeakMap,de=new WeakMap,ht=new WeakMap,Pt=new WeakMap,Ie=new WeakMap,zt=new WeakMap,Ft=new WeakMap,jt=new WeakMap,dt=new WeakMap,ft=new WeakMap,tt=new WeakMap,It=new WeakMap,pt=new WeakSet,Nt=function(e){U(this,Yt,Ur).call(this);let r=n(this,$).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Oe)),r},Kt=new WeakSet,Tr=function(){if(U(this,Jt,Ir).call(this),Ut||n(this,de).isStale||!Sr(this.options.staleTime))return;const r=Ns(n(this,de).dataUpdatedAt,this.options.staleTime)+1;b(this,dt,setTimeout(()=>{n(this,de).isStale||this.updateResult()},r))},Wt=new WeakSet,Pr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(n(this,$)):this.options.refetchInterval)??!1},Ht=new WeakSet,Fr=function(e){U(this,Vt,Dr).call(this),b(this,tt,e),!(Ut||this.options.enabled===!1||!Sr(n(this,tt))||n(this,tt)===0)&&b(this,ft,setInterval(()=>{(this.options.refetchIntervalInBackground||fr.isFocused())&&U(this,pt,Nt).call(this)},n(this,tt)))},Gt=new WeakSet,jr=function(){U(this,Kt,Tr).call(this),U(this,Ht,Fr).call(this,U(this,Wt,Pr).call(this))},Jt=new WeakSet,Ir=function(){n(this,dt)&&(clearTimeout(n(this,dt)),b(this,dt,void 0))},Vt=new WeakSet,Dr=function(){n(this,ft)&&(clearInterval(n(this,ft)),b(this,ft,void 0))},Yt=new WeakSet,Ur=function(){const e=n(this,fe).getQueryCache().build(n(this,fe),this.options);if(e===n(this,$))return;const r=n(this,$);b(this,$,e),b(this,$t,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},gr=new WeakSet,zs=function(e){se.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(n(this,de))}),n(this,fe).getQueryCache().notify({query:n(this,$),type:"observerResultsUpdated"})})},ks);function ln(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ps(t,e){return ln(t,e)||t.state.dataUpdatedAt>0&&Mr(t,e,e.refetchOnMount)}function Mr(t,e,r){if(e.enabled!==!1){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&Vr(t,e)}return!1}function ms(t,e,r,s){return r.enabled!==!1&&(t!==e||s.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&Vr(t,r)}function Vr(t,e){return t.isStaleByTime(e.staleTime)}function cn(t,e){return!dr(t.getCurrentResult(),e)}var rt,qe,ge,Be,Dt,ar,Zt,Nr,Ts,hn=(Ts=class extends Mt{constructor(r,s){super();E(this,Dt);E(this,Zt);E(this,rt,void 0);E(this,qe,void 0);E(this,ge,void 0);E(this,Be,void 0);b(this,qe,void 0),b(this,rt,r),this.setOptions(s),this.bindMethods(),U(this,Dt,ar).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var i;const s=this.options;this.options=n(this,rt).defaultMutationOptions(r),dr(s,this.options)||n(this,rt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,ge),observer:this}),(i=n(this,ge))==null||i.setOptions(this.options),s!=null&&s.mutationKey&&this.options.mutationKey&&mt(s.mutationKey)!==mt(this.options.mutationKey)&&this.reset()}onUnsubscribe(){var r;this.hasListeners()||(r=n(this,ge))==null||r.removeObserver(this)}onMutationUpdate(r){U(this,Dt,ar).call(this),U(this,Zt,Nr).call(this,r)}getCurrentResult(){return n(this,qe)}reset(){var r;(r=n(this,ge))==null||r.removeObserver(this),b(this,ge,void 0),U(this,Dt,ar).call(this),U(this,Zt,Nr).call(this)}mutate(r,s){var i;return b(this,Be,s),(i=n(this,ge))==null||i.removeObserver(this),b(this,ge,n(this,rt).getMutationCache().build(n(this,rt),this.options)),n(this,ge).addObserver(this),n(this,ge).execute(r)}},rt=new WeakMap,qe=new WeakMap,ge=new WeakMap,Be=new WeakMap,Dt=new WeakSet,ar=function(){var s;const r=((s=n(this,ge))==null?void 0:s.state)??$s();b(this,qe,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Zt=new WeakSet,Nr=function(r){se.batch(()=>{var s,i,a,o,h,c,f,d;if(n(this,Be)&&this.hasListeners()){const C=n(this,qe).variables,v=n(this,qe).context;(r==null?void 0:r.type)==="success"?((i=(s=n(this,Be)).onSuccess)==null||i.call(s,r.data,C,v),(o=(a=n(this,Be)).onSettled)==null||o.call(a,r.data,null,C,v)):(r==null?void 0:r.type)==="error"&&((c=(h=n(this,Be)).onError)==null||c.call(h,r.error,C,v),(d=(f=n(this,Be)).onSettled)==null||d.call(f,void 0,r.error,C,v))}this.listeners.forEach(C=>{C(n(this,qe))})})},Ts),Ks=y.createContext(void 0),Ws=t=>{const e=y.useContext(Ks);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},dn=({client:t,children:e})=>(y.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.createElement(Ks.Provider,{value:t},e)),Hs=y.createContext(!1),fn=()=>y.useContext(Hs);Hs.Provider;function pn(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mn=y.createContext(pn()),gn=()=>y.useContext(mn);function Gs(t,e){return typeof t=="function"?t(...e):!!t}var yn=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},vn=t=>{y.useEffect(()=>{t.clearReset()},[t])},bn=({result:t,errorResetBoundary:e,throwOnError:r,query:s})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&Gs(r,[t.error,s]),wn=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},xn=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Cn=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function En(t,e,r){const s=Ws(r),i=fn(),a=gn(),o=s.defaultQueryOptions(t);o._optimisticResults=i?"isRestoring":"optimistic",wn(o),yn(o,a),vn(a);const[h]=y.useState(()=>new e(s,o)),c=h.getOptimisticResult(o);if(y.useSyncExternalStore(y.useCallback(f=>{const d=i?()=>{}:h.subscribe(se.batchCalls(f));return h.updateResult(),d},[h,i]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),y.useEffect(()=>{h.setOptions(o,{listeners:!1})},[o,h]),xn(o,c))throw Cn(o,h,a);if(bn({result:c,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw c.error;return o.notifyOnChangeProps?c:h.trackResult(c)}function Js(t,e){return En(t,un,e)}function Vs(t,e){const r=Ws(e),[s]=y.useState(()=>new hn(r,t));y.useEffect(()=>{s.setOptions(t)},[s,t]);const i=y.useSyncExternalStore(y.useCallback(o=>s.subscribe(se.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=y.useCallback((o,h)=>{s.mutate(o,h).catch(Rn)},[s]);if(i.error&&Gs(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function Rn(){}var On=function(){return null};function Xt({children:t,disabled:e,type:r,className:s,onClick:i,variant:a}){return p.jsx("button",{className:`
        inline-flex w-fit items-center justify-center rounded-md shadow-sm transition-buttons duration-200 px-4 py-2 text-sm font-medium

        ${e?"":`
              hover:shadow-lg
              focus:outline-none focus:ring-2 focus:ring-offset-2`}

        ${a==="primary"?`
              bg-oxford-600 text-white
              hover:bg-oxford-700
              focus:bg-oxford-700 focus:ring-oxford-500 focus:ring-offset-white
            `:""}
        ${a==="secondary"?`
              bg-slate-500 text-white
              hover:bg-slate-600
              focus:bg-slate-600 focus:ring-slate-500 focus:ring-offset-white
            `:""}

        ${s}
      `,disabled:e,onClick:i,type:r,children:t})}Xt.propTypes={children:x.node.isRequired,className:x.string,disabled:x.bool,onClick:x.func,type:x.string,variant:x.string};Xt.defaultProps={className:null,disabled:!1,onClick:()=>null,type:"button",variant:"primary"};function Sn(t){let e=[],r=[];return t.map((s,i)=>{const a=s.name.split("/");return i===0?(e=[],e=a):(r=[],a.map((o,h)=>o===e[h]?r.push(o):null))}),r.join("/")}function _n(t){const e=new Intl.Collator("en"),r=[...t].sort((i,a)=>e.compare(i.name.toUpperCase(),a.name.toUpperCase()));if(r.length<2)return r.map(i=>({...i,shortName:i.name}));const s=Sn(r);return r.map(i=>({...i,shortName:i.name.replace(`${s}/`,"")}))}function Ys({authToken:t,filesUrl:e}){return Js({queryKey:["FILE_LIST"],queryFn:async()=>{const r=await fetch(e,{headers:{Authorization:t}});if(!r.ok)throw new Error;return r.json()},select:r=>_n(r.files),meta:{errorMessage:"Unable to load files",id:e}})}const pe={authToken:x.string,basePath:x.string,csrfToken:x.string,filesUrl:x.string,prepareUrl:x.string,publishUrl:x.string},De={date:x.string,id:x.string,is_deleted:x.bool,name:x.string,sha256:x.string,size:x.number,url:x.string,user:x.string};let kn={data:""},Tn=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||kn,Pn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Fn=/\/\*[^]*?\*\/|  +/g,gs=/\n+/g,Ge=(t,e)=>{let r="",s="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?r=a+" "+o+";":s+=a[1]=="f"?Ge(o,a):a+"{"+Ge(o,a[1]=="k"?"":e)+"}":typeof o=="object"?s+=Ge(o,e?e.replace(/([^,])+/g,h=>a.replace(/(^:.*)|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,h):h?h+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ge.p?Ge.p(a,o):a+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+s},Ae={},Zs=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Zs(t[r]);return e}return t},jn=(t,e,r,s,i)=>{let a=Zs(t),o=Ae[a]||(Ae[a]=(c=>{let f=0,d=11;for(;f<c.length;)d=101*d+c.charCodeAt(f++)>>>0;return"go"+d})(a));if(!Ae[o]){let c=a!==t?t:(f=>{let d,C,v=[{}];for(;d=Pn.exec(f.replace(Fn,""));)d[4]?v.shift():d[3]?(C=d[3].replace(gs," ").trim(),v.unshift(v[0][C]=v[0][C]||{})):v[0][d[1]]=d[2].replace(gs," ").trim();return v[0]})(t);Ae[o]=Ge(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let h=r&&Ae.g?Ae.g:null;return r&&(Ae.g=Ae[o]),((c,f,d,C)=>{C?f.data=f.data.replace(C,c):f.data.indexOf(c)===-1&&(f.data=d?c+f.data:f.data+c)})(Ae[o],e,s,h),o},In=(t,e,r)=>t.reduce((s,i,a)=>{let o=e[a];if(o&&o.call){let h=o(r),c=h&&h.props&&h.props.className||/^go/.test(h)&&h;o=c?"."+c:h&&typeof h=="object"?h.props?"":Ge(h,""):h===!1?"":h}return s+i+(o??"")},"");function br(t){let e=this||{},r=t.call?t(e.p):t;return jn(r.unshift?r.raw?In(r,[].slice.call(arguments,1),e.p):r.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):r,Tn(e.target),e.g,e.o,e.k)}let Xs,Ar,Lr;br.bind({g:1});let Qe=br.bind({k:1});function Dn(t,e,r,s){Ge.p=e,Xs=t,Ar=r,Lr=s}function st(t,e){let r=this||{};return function(){let s=arguments;function i(a,o){let h=Object.assign({},a),c=h.className||i.className;r.p=Object.assign({theme:Ar&&Ar()},h),r.o=/ *go\d+/.test(c),h.className=br.apply(r,s)+(c?" "+c:""),e&&(h.ref=o);let f=t;return t[0]&&(f=h.as||t,delete h.as),Lr&&f[0]&&Lr(h),Xs(f,h)}return e?e(i):i}}var Un=t=>typeof t=="function",mr=(t,e)=>Un(t)?t(e):t,Mn=(()=>{let t=0;return()=>(++t).toString()})(),ei=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Nn=20,or=new Map,An=1e3,ys=t=>{if(or.has(t))return;let e=setTimeout(()=>{or.delete(t),gt({type:4,toastId:t})},An);or.set(t,e)},Ln=t=>{let e=or.get(t);e&&clearTimeout(e)},qr=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Nn)};case 1:return e.toast.id&&Ln(e.toast.id),{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return t.toasts.find(a=>a.id===r.id)?qr(t,{type:1,toast:r}):qr(t,{type:0,toast:r});case 3:let{toastId:s}=e;return s?ys(s):t.toasts.forEach(a=>{ys(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===s||s===void 0?{...a,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},ur=[],lr={toasts:[],pausedAt:void 0},gt=t=>{lr=qr(lr,t),ur.forEach(e=>{e(lr)})},qn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Bn=(t={})=>{let[e,r]=y.useState(lr);y.useEffect(()=>(ur.push(r),()=>{let i=ur.indexOf(r);i>-1&&ur.splice(i,1)}),[e]);let s=e.toasts.map(i=>{var a,o;return{...t,...t[i.type],...i,duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||qn[i.type],style:{...t.style,...(o=t[i.type])==null?void 0:o.style,...i.style}}});return{...e,toasts:s}},Qn=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Mn()}),er=t=>(e,r)=>{let s=Qn(e,t,r);return gt({type:2,toast:s}),s.id},ye=(t,e)=>er("blank")(t,e);ye.error=er("error");ye.success=er("success");ye.loading=er("loading");ye.custom=er("custom");ye.dismiss=t=>{gt({type:3,toastId:t})};ye.remove=t=>gt({type:4,toastId:t});ye.promise=(t,e,r)=>{let s=ye.loading(e.loading,{...r,...r==null?void 0:r.loading});return t.then(i=>(ye.success(mr(e.success,i),{id:s,...r,...r==null?void 0:r.success}),i)).catch(i=>{ye.error(mr(e.error,i),{id:s,...r,...r==null?void 0:r.error})}),t};var $n=(t,e)=>{gt({type:1,toast:{id:t,height:e}})},zn=()=>{gt({type:5,time:Date.now()})},Kn=t=>{let{toasts:e,pausedAt:r}=Bn(t);y.useEffect(()=>{if(r)return;let a=Date.now(),o=e.map(h=>{if(h.duration===1/0)return;let c=(h.duration||0)+h.pauseDuration-(a-h.createdAt);if(c<0){h.visible&&ye.dismiss(h.id);return}return setTimeout(()=>ye.dismiss(h.id),c)});return()=>{o.forEach(h=>h&&clearTimeout(h))}},[e,r]);let s=y.useCallback(()=>{r&&gt({type:6,time:Date.now()})},[r]),i=y.useCallback((a,o)=>{let{reverseOrder:h=!1,gutter:c=8,defaultPosition:f}=o||{},d=e.filter(w=>(w.position||f)===(a.position||f)&&w.height),C=d.findIndex(w=>w.id===a.id),v=d.filter((w,j)=>j<C&&w.visible).length;return d.filter(w=>w.visible).slice(...h?[v+1]:[0,v]).reduce((w,j)=>w+(j.height||0)+c,0)},[e]);return{toasts:e,handlers:{updateHeight:$n,startPause:zn,endPause:s,calculateOffset:i}}},Wn=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hn=Qe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gn=Qe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Jn=st("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hn} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Gn} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Vn=Qe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Yn=st("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Vn} 1s linear infinite;
`,Zn=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Xn=Qe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ea=st("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Zn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Xn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ta=st("div")`
  position: absolute;
`,ra=st("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,sa=Qe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ia=st("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${sa} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,na=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?y.createElement(ia,null,e):e:r==="blank"?null:y.createElement(ra,null,y.createElement(Yn,{...s}),r!=="loading"&&y.createElement(ta,null,r==="error"?y.createElement(Jn,{...s}):y.createElement(ea,{...s})))},aa=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oa=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ua="0%{opacity:0;} 100%{opacity:1;}",la="0%{opacity:1;} 100%{opacity:0;}",ca=st("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ha=st("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,da=(t,e)=>{let r=t.includes("top")?1:-1,[s,i]=ei()?[ua,la]:[aa(r),oa(r)];return{animation:e?`${Qe(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qe(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ti=y.memo(({toast:t,position:e,style:r,children:s})=>{let i=t.height?da(t.position||e||"top-center",t.visible):{opacity:0},a=y.createElement(na,{toast:t}),o=y.createElement(ha,{...t.ariaProps},mr(t.message,t));return y.createElement(ca,{className:t.className,style:{...i,...r,...t.style}},typeof s=="function"?s({icon:a,message:o}):y.createElement(y.Fragment,null,a,o))});Dn(y.createElement);var fa=({id:t,className:e,style:r,onHeightUpdate:s,children:i})=>{let a=y.useCallback(o=>{if(o){let h=()=>{let c=o.getBoundingClientRect().height;s(t,c)};h(),new MutationObserver(h).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return y.createElement("div",{ref:a,className:e,style:r},i)},pa=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ei()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...i}},ma=br`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ir=16,ga=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:h,handlers:c}=Kn(r);return y.createElement("div",{style:{position:"fixed",zIndex:9999,top:ir,left:ir,right:ir,bottom:ir,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},h.map(f=>{let d=f.position||e,C=c.calculateOffset(f,{reverseOrder:t,gutter:s,defaultPosition:e}),v=pa(d,C);return y.createElement(fa,{id:f.id,key:f.id,onHeightUpdate:c.updateHeight,className:f.visible?ma:"",style:v},f.type==="custom"?mr(f.message,f):i?i(f):y.createElement(ti,{toast:f,position:d}))}))},Yr=ye;function ri({toastId:t}){Yr.dismiss(t)}function Zr({toastId:t,message:e,...r}){console.error(e,{...r}),Yr.error(e,{id:t})}function si({authToken:t,csrfToken:e,filesUrl:r,prepareUrl:s}){const{data:i}=Ys({authToken:t,filesUrl:r}),a="PrepareButton",o=Vs({mutationFn:async c=>{const f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:JSON.stringify({file_ids:c})});if(!f.ok){const d=await f.json();throw new Error(d.detail)}return f.json()},onMutate:()=>{ri({toastId:a})},onSuccess:c=>{window.location.href=c.url},onError:c=>{Zr({message:`${c}`,toastId:a,prepareUrl:s,url:document.location.href})}});if(!(i!=null&&i.length))return null;const h=i.map(c=>c.id);return p.jsx(Xt,{disabled:o.isPending,onClick:c=>(c.preventDefault(),o.mutate(h)),type:"button",variant:o.isPending?"secondary":"primary",children:o.isPending?"Creating…":"Create a draft publication"})}si.propTypes={authToken:pe.authToken.isRequired,csrfToken:pe.csrfToken.isRequired,filesUrl:pe.filesUrl.isRequired,prepareUrl:pe.prepareUrl.isRequired};function ii({csrfToken:t,publishUrl:e}){const r="PublishButton",s=Vs({mutationFn:async()=>{const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:""});if(!i.ok){const a=await i.json();throw new Error(a.detail)}return i.text()},onMutate:()=>{ri({toastId:r})},onSuccess:()=>{window.location.reload()},onError:i=>{Zr({message:`${i}`,toastId:r,publishUrl:e,url:document.location.href})}});return p.jsx(Xt,{disabled:s.isPending,onClick:i=>(i.preventDefault(),s.mutate()),type:"button",variant:s.isPending?"secondary":"primary",children:s.isPending?"Creating…":"Create a public published output"})}ii.propTypes={csrfToken:pe.csrfToken.isRequired,publishUrl:pe.publishUrl.isRequired};function vt({className:t,container:e,header:r,innerClassName:s,children:i}){return p.jsxs("div",{className:`bg-white shadow ${t}`,children:[r?p.jsx("div",{className:"flex flex-wrap gap-2 items-center justify-between px-4 py-2 sm:px-6 sm:py-4 sm:flex-nowrap bg-slate-50",children:r}):null,p.jsx("div",{className:`
          ${s}
          ${e?"px-4 py-3 md:px-6 md:py-5":""}
          ${r&&e?"border-t border-slate-200":""}
        `,children:i})]})}vt.propTypes={children:x.element.isRequired,className:x.string,container:x.bool,header:x.element,innerClassName:x.string};vt.defaultProps={className:"",container:!1,header:null,innerClassName:""};const ya=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],va=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ba=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],wa=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],vs=(t,e,r)=>{let s=t;return typeof e=="string"||Array.isArray(e)?s=t.toLocaleString(e,r):(e===!0||r!==void 0)&&(s=t.toLocaleString(void 0,r)),s};function xa(t,e){if(!Number.isFinite(t))throw new TypeError(`Expected a finite number, got ${typeof t}: ${t}`);e={bits:!1,binary:!1,space:!0,...e};const r=e.bits?e.binary?wa:ba:e.binary?va:ya,s=e.space?" ":"";if(e.signed&&t===0)return` 0${s}${r[0]}`;const i=t<0,a=i?"-":e.signed?"+":"";i&&(t=-t);let o;if(e.minimumFractionDigits!==void 0&&(o={minimumFractionDigits:e.minimumFractionDigits}),e.maximumFractionDigits!==void 0&&(o={maximumFractionDigits:e.maximumFractionDigits,...o}),t<1){const d=vs(t,e.locale,o);return a+d+s+r[0]}const h=Math.min(Math.floor(e.binary?Math.log(t)/Math.log(1024):Math.log10(t)/3),r.length-1);t/=(e.binary?1024:1e3)**h,o||(t=t.toPrecision(3));const c=vs(Number(t),e.locale,o),f=r[h];return a+c+s+f}function ni(t){return t?xa(t,{locale:"en-gb"}):"unknown"}function Xr({autocapitalize:t,autocomplete:e,autocorrect:r,className:s,hideLabel:i,hintText:a,id:o,inputClassName:h,inputmode:c,label:f,labelClass:d,onChange:C,placeholder:v,required:w,type:j,value:P}){return p.jsxs("div",{className:s,children:[p.jsxs("label",{className:`inline-block font-semibold text-lg text-slate-900 cursor-pointer ${d} ${i?"sr-only":"null"}`,htmlFor:o,children:[f,w?p.jsx("span",{"aria-hidden":"true",className:"text-bn-ribbon-700 font-bold",children:"*"}):null]}),a?p.jsx("p",{className:"mb-2 text-sm text-gray-700",children:{hintText:a}}):null,p.jsx("div",{className:"relative",children:p.jsx("input",{autoCapitalize:t,autoComplete:e,autoCorrect:r,className:`
            block w-full border-slate-300 text-slate-900 shadow-sm
            focus:border-oxford-500 focus:ring-oxford-500
            sm:text-sm
            [&:not(:placeholder-shown):not(:focus)]:invalid:border-bn-ribbon-600 [&:not(:placeholder-shown):not(:focus)]:invalid:ring-bn-ribbon-600 [&:not(:placeholder-shown):not(:focus)]:invalid:ring-1
            ${h}
            ${i?"":"mt-1"}
          `,id:o,inputMode:c,onChange:C,placeholder:v,required:w,type:j,value:P})})]})}Xr.propTypes={autocapitalize:x.string,autocomplete:x.oneOf(["none","off","characters","words","sentences"]),autocorrect:x.oneOf(["on","off"]),className:x.string,hideLabel:x.bool,hintText:x.string,id:x.string,inputClassName:x.string,inputmode:x.string,label:x.string,labelClass:x.string,onChange:x.func,placeholder:x.string,required:x.bool,type:x.string,value:x.string};Xr.defaultProps={autocapitalize:null,autocomplete:null,autocorrect:null,className:null,hideLabel:!1,hintText:null,id:"inputID",inputClassName:null,inputmode:null,label:null,labelClass:null,onChange:()=>null,placeholder:null,required:null,type:"text",value:null};function ai({files:t,listRef:e,setFiles:r}){const[s,i]=y.useState("");y.useEffect(()=>{if(s){const o=setTimeout(()=>r(t.filter(h=>h.name.toLowerCase().includes(s.toLowerCase()))),350);return()=>clearTimeout(o)}return r(t)},[t,s,r]);function a(o){var h;(h=e==null?void 0:e.current)==null||h.scrollToItem(0),i(o.target.value)}return p.jsx(Xr,{autocapitalize:"off",autocomplete:"off",autocorrect:"off",className:"mb-1",hideLabel:!0,id:"filterFiles",label:"Find a file…",onChange:o=>a(o),placeholder:"Find a file…",type:"search",value:s})}ai.propTypes={files:x.arrayOf(x.shape()).isRequired,listRef:x.oneOfType([x.func,x.shape({current:x.instanceOf(Element)})]).isRequired,setFiles:x.func.isRequired};function oi({authToken:t,filesUrl:e,listVisible:r,setSelectedFile:s}){const[i,a]=y.useState([]),[o,h]=y.useState(null),{data:c,isError:f,isLoading:d}=Ys({authToken:t,filesUrl:e}),C=Ni(),v=Is(),w=y.createRef();if(y.useEffect(()=>{const P=i.findIndex(g=>`/${g.name}`===v.pathname);i[P]&&(h(P),s(i[P]))},[c,i,v,s]),d)return p.jsx(vt,{container:!0,children:p.jsx("p",{children:"Loading…"})});if(f)return p.jsx(vt,{container:!0,header:p.jsx("h2",{className:"font-semibold text-lg",children:"Error"}),children:p.jsx("p",{children:"Unable to load files"})});const j=({e:P,item:g})=>{var N;P.preventDefault();const O=`/${g.name}`;return O===v.pathname||O===((N=v==null?void 0:v.location)==null?void 0:N.pathname)?null:(C(O),s(g))};return p.jsxs("div",{className:r?"block md:sticky md:top-2":"hidden",children:[p.jsx(ai,{files:c,listRef:w,setFiles:a}),p.jsx(vt,{className:"py-2 md:max-h-screen md:h-full overflow-x-auto md:overflow-y-auto",container:!1,children:p.jsx("ul",{className:"text-sm text-oxford-600 flex flex-col gap-y-1 items-start",children:i.map((P,g)=>p.jsx("li",{className:`leading-tight px-4 ${o===g?"font-bold text-oxford-800":""}`,children:o===g?p.jsx("span",{children:P.shortName}):p.jsx("a",{disabled:`/${P.name}`===v.pathname,href:P.url,onClick:O=>j({e:O,item:P}),title:`File size: ${ni(P.size)}`,children:P.shortName})},P.name))})})]})}oi.propTypes={authToken:pe.authToken.isRequired,filesUrl:pe.filesUrl.isRequired,listVisible:x.bool.isRequired,setSelectedFile:x.func.isRequired};function tr({className:t,children:e,href:r,newTab:s}){return p.jsx("a",{className:`
        font-semibold text-oxford-600 underline underline-offset-2 decoration-oxford-300 transition-colors duration-200
        hover:decoration-transparent hover:text-oxford
        focus:decoration-transparent focus:text-oxford focus:bg-bn-sun-300
        ${t}
      `,href:r,rel:s?"noreferrer noopener":void 0,target:s?"filePreview":void 0,children:e})}tr.propTypes={children:x.oneOfType([x.element,x.string]),className:x.string,href:x.string.isRequired,newTab:x.bool};tr.defaultProps={children:null,className:null,newTab:!1};function ui({fileDate:t,fileName:e,fileSize:r,fileUrl:s}){const i=()=>{if(Date.parse(t)){const a=new Date(t);return{absolute:a.toISOString(),formatted:new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",dateStyle:"short",timeStyle:"short"}).format(a)}}return!1};return p.jsxs("ul",{className:"flex flex-row gap-2 items-center w-full flex-wrap",children:[p.jsx("li",{className:"mr-auto pr-4",children:p.jsx(tr,{className:`
            font-semibold text-oxford-600 underline underline-offset-2 decoration-oxford-300 transition-colors duration-200
            hover:decoration-transparent hover:text-oxford
            focus:decoration-transparent focus:text-oxford focus:bg-bn-sun-300
            after:content-['↗'] after:text-sm after:ml-1 after:absolute after:mt-0.5
          `,href:s,newTab:!0,children:e})}),i()&&p.jsxs("li",{className:"font-mono text-sm text-right whitespace-nowrap",children:[p.jsx("div",{className:"sr-only",children:"Last modified at: "}),p.jsx("time",{className:"",dateTime:i().absolute,title:i().absolute,children:i().formatted})]}),p.jsx("li",{className:"font-mono text-sm text-right whitespace-nowrap ml-4",children:ni(r)})]})}ui.propTypes={fileDate:De.date.isRequired,fileName:De.name.isRequired,fileSize:De.size.isRequired,fileUrl:De.url.isRequired};function Ca(){return p.jsx(ga,{position:"top-right",toastOptions:{duration:1/0,style:{whiteSpace:"pre-line",overflowWrap:"break-word",wordWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},error:{style:{color:"#721c24",backgroundColor:"#f8d7da"}}},children:t=>p.jsx(ti,{id:"ToastBar",toast:t,children:({icon:e,message:r})=>p.jsxs(p.Fragment,{children:[e,r,t.type!=="loading"&&p.jsxs("button",{className:"border border-current rounded p-1 hover:bg-current hover:fill-white",onClick:()=>Yr.dismiss(t.id),type:"button",children:[p.jsx("span",{className:"sr-only",children:"Dismiss"}),p.jsx("svg",{className:"h-4 w-4",fill:"currentFill",viewBox:"0 0 20 20",width:"12",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{clipRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",fillRule:"evenodd"})})]})]})})})}const Br=t=>t.toLowerCase().match(/.*\.(?:csv)$/i),li=t=>t.toLowerCase().match(/.*\.(?:html)$/i),Qr=t=>t.toLowerCase().match(/.*\.(?:gif|jpg|jpeg|png|svg)$/i),ci=t=>t.toLowerCase().match(/.*\.(?:txt)$/i),hi=t=>t.toLowerCase().match(/.*\.(?:json)$/i),bs=t=>Br(t)||li(t)||Qr(t)||ci(t)||hi(t),Rr='"File not yet uploaded"';var Ea=Ra;function Ra(t,e,r){var s=null,i=null,a=function(){s&&(clearTimeout(s),i=null,s=null)},o=function(){var c=i;a(),c&&c()},h=function(){if(!e)return t.apply(this,arguments);var c=this,f=arguments,d=r&&!s;if(a(),i=function(){t.apply(c,f)},s=setTimeout(function(){if(s=null,!d){var C=i;return i=null,C()}},e),d)return i()};return h.cancel=a,h.flush=o,h}function Oa(t=100){const[e,r]=y.useState({width:void 0,height:void 0});return y.useEffect(()=>{function s(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",Ea(s,t)),s(),()=>window.removeEventListener("resize",s)},[t]),e}function di({data:t,fileName:e,fileUrl:r}){const s=Oa(),[i,a]=y.useState(0),o=encodeURIComponent(r).replace(/\W/g,"");return y.useLayoutEffect(()=>{document.getElementById(o)&&(window.innerWidth>991?a(Math.round(window.innerHeight-document.getElementById(o).getBoundingClientRect().top-17-40)):a(1e3))},[s,o]),p.jsx("iframe",{className:"-mx-4 -my-3 w-[calc(100%+2rem)] md:-mx-6 md:-my-5 md:w-[calc(100%+3rem)]",frameBorder:"0",height:i,id:o,src:r,srcDoc:t,title:e,width:"100%"})}di.propTypes={data:x.string.isRequired,fileName:De.name.isRequired,fileUrl:De.url.isRequired};function fi({data:t}){return p.jsx("img",{alt:"",className:"h-auto max-w-full",src:t})}fi.propTypes={data:x.string.isRequired};function es({error:t,fileUrl:e}){return p.jsxs(p.Fragment,{children:[t?p.jsx("p",{children:"Error: Unable to load file"}):p.jsx("p",{children:"We cannot show a preview of this file."}),p.jsx("p",{className:"mt-3",children:p.jsx(tr,{href:e,newTab:!0,children:"Open file in a new tab ↗"})})]})}es.propTypes={error:x.shape({message:x.string}),fileUrl:De.url.isRequired};es.defaultProps={error:null};var pi={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(r,s){t.exports=s()})(Ci,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},i=!s.document&&!!s.postMessage,a=s.IS_PAPA_WORKER||!1,o={},h=0,c={parse:function(u,l){var m=(l=l||{}).dynamicTyping||!1;if(I(m)&&(l.dynamicTypingFunction=m,m={}),l.dynamicTyping=m,l.transform=!!I(l.transform)&&l.transform,l.worker&&c.WORKERS_SUPPORTED){var R=function(){if(!c.WORKERS_SUPPORTED)return!1;var D=(oe=s.URL||s.webkitURL||null,J=r.toString(),c.BLOB_URL||(c.BLOB_URL=oe.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",J,")();"],{type:"text/javascript"})))),M=new s.Worker(D),oe,J;return M.onmessage=N,M.id=h++,o[M.id]=M}();return R.userStep=l.step,R.userChunk=l.chunk,R.userComplete=l.complete,R.userError=l.error,l.step=I(l.step),l.chunk=I(l.chunk),l.complete=I(l.complete),l.error=I(l.error),delete l.worker,void R.postMessage({input:u,config:l,workerId:R.id})}var _=null;return c.NODE_STREAM_INPUT,typeof u=="string"?(u=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(u),_=l.download?new C(l):new w(l)):u.readable===!0&&I(u.read)&&I(u.on)?_=new j(l):(s.File&&u instanceof File||u instanceof Object)&&(_=new v(l)),_.stream(u)},unparse:function(u,l){var m=!1,R=!0,_=",",D=`\r
`,M='"',oe=M+M,J=!1,k=null,Z=!1;(function(){if(typeof l=="object"){if(typeof l.delimiter!="string"||c.BAD_DELIMITERS.filter(function(S){return l.delimiter.indexOf(S)!==-1}).length||(_=l.delimiter),(typeof l.quotes=="boolean"||typeof l.quotes=="function"||Array.isArray(l.quotes))&&(m=l.quotes),typeof l.skipEmptyLines!="boolean"&&typeof l.skipEmptyLines!="string"||(J=l.skipEmptyLines),typeof l.newline=="string"&&(D=l.newline),typeof l.quoteChar=="string"&&(M=l.quoteChar),typeof l.header=="boolean"&&(R=l.header),Array.isArray(l.columns)){if(l.columns.length===0)throw new Error("Option columns is empty");k=l.columns}l.escapeChar!==void 0&&(oe=l.escapeChar+M),(typeof l.escapeFormulae=="boolean"||l.escapeFormulae instanceof RegExp)&&(Z=l.escapeFormulae instanceof RegExp?l.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var F=new RegExp(g(M),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return Se(null,u,J);if(typeof u[0]=="object")return Se(k||Object.keys(u[0]),u,J)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||k),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),Se(u.fields||[],u.data||[],J);throw new Error("Unable to serialize unrecognized input");function Se(S,K,ce){var V="";typeof S=="string"&&(S=JSON.parse(S)),typeof K=="string"&&(K=JSON.parse(K));var ue=Array.isArray(S)&&0<S.length,ie=!Array.isArray(K[0]);if(ue&&R){for(var ne=0;ne<S.length;ne++)0<ne&&(V+=_),V+=le(S[ne],ne);0<K.length&&(V+=D)}for(var T=0;T<K.length;T++){var L=ue?S.length:K[T].length,W=!1,te=ue?Object.keys(K[T]).length===0:K[T].length===0;if(ce&&!ue&&(W=ce==="greedy"?K[T].join("").trim()==="":K[T].length===1&&K[T][0].length===0),ce==="greedy"&&ue){for(var B=[],he=0;he<L;he++){var X=ie?S[he]:he;B.push(K[T][X])}W=B.join("").trim()===""}if(!W){for(var Q=0;Q<L;Q++){0<Q&&!te&&(V+=_);var _e=ue&&ie?S[Q]:Q;V+=le(K[T][_e],Q)}T<K.length-1&&(!ce||0<L&&!te)&&(V+=D)}}return V}function le(S,K){if(S==null)return"";if(S.constructor===Date)return JSON.stringify(S).slice(1,25);var ce=!1;Z&&typeof S=="string"&&Z.test(S)&&(S="'"+S,ce=!0);var V=S.toString().replace(F,oe);return(ce=ce||m===!0||typeof m=="function"&&m(S,K)||Array.isArray(m)&&m[K]||function(ue,ie){for(var ne=0;ne<ie.length;ne++)if(-1<ue.indexOf(ie[ne]))return!0;return!1}(V,c.BAD_DELIMITERS)||-1<V.indexOf(_)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?M+V+M:V}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!s.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=O,c.ParserHandle=P,c.NetworkStreamer=C,c.FileStreamer=v,c.StringStreamer=w,c.ReadableStreamStreamer=j,s.jQuery){var f=s.jQuery;f.fn.parse=function(u){var l=u.config||{},m=[];return this.each(function(D){if(!(f(this).prop("tagName").toUpperCase()==="INPUT"&&f(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)m.push({file:this.files[M],inputElem:this,instanceConfig:f.extend({},l)})}),R(),this;function R(){if(m.length!==0){var D,M,oe,J,k=m[0];if(I(u.before)){var Z=u.before(k.file,k.inputElem);if(typeof Z=="object"){if(Z.action==="abort")return D="AbortError",M=k.file,oe=k.inputElem,J=Z.reason,void(I(u.error)&&u.error({name:D},M,oe,J));if(Z.action==="skip")return void _();typeof Z.config=="object"&&(k.instanceConfig=f.extend(k.instanceConfig,Z.config))}else if(Z==="skip")return void _()}var F=k.instanceConfig.complete;k.instanceConfig.complete=function(Se){I(F)&&F(Se,k.file,k.inputElem),_()},c.parse(k.file,k.instanceConfig)}else I(u.complete)&&u.complete()}function _(){m.splice(0,1),R()}}}function d(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(l){var m=Y(l);m.chunkSize=parseInt(m.chunkSize),l.step||l.chunk||(m.chunkSize=null),this._handle=new P(m),(this._handle.streamer=this)._config=m}).call(this,u),this.parseChunk=function(l,m){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(l);R!==void 0&&(l=R)}this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+l;this._partialLine="";var D=this._handle.parse(_,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var M=D.meta.cursor;this._finished||(this._partialLine=_.substring(M-this._baseIndex),this._baseIndex=M),D&&D.data&&(this._rowCount+=D.data.length);var oe=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)s.postMessage({results:D,workerId:c.WORKER_ID,finished:oe});else if(I(this._config.chunk)&&!m){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!oe||!I(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),oe||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(l){I(this._config.error)?this._config.error(l):a&&this._config.error&&s.postMessage({workerId:c.WORKER_ID,error:l,finished:!1})}}function C(u){var l;(u=u||{}).chunkSize||(u.chunkSize=c.RemoteChunkSize),d.call(this,u),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(m){this._input=m,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(l=new XMLHttpRequest,this._config.withCredentials&&(l.withCredentials=this._config.withCredentials),i||(l.onload=G(this._chunkLoaded,this),l.onerror=G(this._chunkError,this)),l.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var m=this._config.downloadRequestHeaders;for(var R in m)l.setRequestHeader(R,m[R])}if(this._config.chunkSize){var _=this._start+this._config.chunkSize-1;l.setRequestHeader("Range","bytes="+this._start+"-"+_)}try{l.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&l.status===0&&this._chunkError()}},this._chunkLoaded=function(){l.readyState===4&&(l.status<200||400<=l.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:l.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(m){var R=m.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}(l),this.parseChunk(l.responseText)))},this._chunkError=function(m){var R=l.statusText||m;this._sendError(new Error(R))}}function v(u){var l,m;(u=u||{}).chunkSize||(u.chunkSize=c.LocalChunkSize),d.call(this,u);var R=typeof FileReader<"u";this.stream=function(_){this._input=_,m=_.slice||_.webkitSlice||_.mozSlice,R?((l=new FileReader).onload=G(this._chunkLoaded,this),l.onerror=G(this._chunkError,this)):l=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var _=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);_=m.call(_,this._start,D)}var M=l.readAsText(_,this._config.encoding);R||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(_){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(_.target.result)},this._chunkError=function(){this._sendError(l.error)}}function w(u){var l;d.call(this,u=u||{}),this.stream=function(m){return l=m,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var m,R=this._config.chunkSize;return R?(m=l.substring(0,R),l=l.substring(R)):(m=l,l=""),this._finished=!l,this.parseChunk(m)}}}function j(u){d.call(this,u=u||{});var l=[],m=!0,R=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(_){this._input=_,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&l.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),l.length?this.parseChunk(l.shift()):m=!0},this._streamData=G(function(_){try{l.push(typeof _=="string"?_:_.toString(this._config.encoding)),m&&(m=!1,this._checkIsFinished(),this.parseChunk(l.shift()))}catch(D){this._streamError(D)}},this),this._streamError=G(function(_){this._streamCleanUp(),this._sendError(_)},this),this._streamEnd=G(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=G(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(u){var l,m,R,_=Math.pow(2,53),D=-_,M=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,oe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,J=this,k=0,Z=0,F=!1,Se=!1,le=[],S={data:[],errors:[],meta:{}};if(I(u.step)){var K=u.step;u.step=function(T){if(S=T,ue())V();else{if(V(),S.data.length===0)return;k+=T.data.length,u.preview&&k>u.preview?m.abort():(S.data=S.data[0],K(S,J))}}}function ce(T){return u.skipEmptyLines==="greedy"?T.join("").trim()==="":T.length===1&&T[0].length===0}function V(){return S&&R&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),R=!1),u.skipEmptyLines&&(S.data=S.data.filter(function(T){return!ce(T)})),ue()&&function(){if(!S)return;function T(W,te){I(u.transformHeader)&&(W=u.transformHeader(W,te)),le.push(W)}if(Array.isArray(S.data[0])){for(var L=0;ue()&&L<S.data.length;L++)S.data[L].forEach(T);S.data.splice(0,1)}else S.data.forEach(T)}(),function(){if(!S||!u.header&&!u.dynamicTyping&&!u.transform)return S;function T(W,te){var B,he=u.header?{}:[];for(B=0;B<W.length;B++){var X=B,Q=W[B];u.header&&(X=B>=le.length?"__parsed_extra":le[B]),u.transform&&(Q=u.transform(Q,X)),Q=ie(X,Q),X==="__parsed_extra"?(he[X]=he[X]||[],he[X].push(Q)):he[X]=Q}return u.header&&(B>le.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+B,Z+te):B<le.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+B,Z+te)),he}var L=1;return!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map(T),L=S.data.length):S.data=T(S.data,0),u.header&&S.meta&&(S.meta.fields=le),Z+=L,S}()}function ue(){return u.header&&le.length===0}function ie(T,L){return W=T,u.dynamicTypingFunction&&u.dynamicTyping[W]===void 0&&(u.dynamicTyping[W]=u.dynamicTypingFunction(W)),(u.dynamicTyping[W]||u.dynamicTyping)===!0?L==="true"||L==="TRUE"||L!=="false"&&L!=="FALSE"&&(function(te){if(M.test(te)){var B=parseFloat(te);if(D<B&&B<_)return!0}return!1}(L)?parseFloat(L):oe.test(L)?new Date(L):L===""?null:L):L;var W}function ne(T,L,W,te){var B={type:T,code:L,message:W};te!==void 0&&(B.row=te),S.errors.push(B)}this.parse=function(T,L,W){var te=u.quoteChar||'"';if(u.newline||(u.newline=function(X,Q){X=X.substring(0,1048576);var _e=new RegExp(g(Q)+"([^]*?)"+g(Q),"gm"),ve=(X=X.replace(_e,"")).split("\r"),Te=X.split(`
`),Me=1<Te.length&&Te[0].length<ve[0].length;if(ve.length===1||Me)return`
`;for(var be=0,H=0;H<ve.length;H++)ve[H][0]===`
`&&be++;return be>=ve.length/2?`\r
`:"\r"}(T,te)),R=!1,u.delimiter)I(u.delimiter)&&(u.delimiter=u.delimiter(T),S.meta.delimiter=u.delimiter);else{var B=function(X,Q,_e,ve,Te){var Me,be,H,ee;Te=Te||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var it=0;it<Te.length;it++){var q=Te[it],yt=0,Ne=0,nt=0;H=void 0;for(var ze=new O({comments:ve,delimiter:q,newline:Q,preview:10}).parse(X),Ke=0;Ke<ze.data.length;Ke++)if(_e&&ce(ze.data[Ke]))nt++;else{var We=ze.data[Ke].length;Ne+=We,H!==void 0?0<We&&(yt+=Math.abs(We-H),H=We):H=We}0<ze.data.length&&(Ne/=ze.data.length-nt),(be===void 0||yt<=be)&&(ee===void 0||ee<Ne)&&1.99<Ne&&(be=yt,Me=q,ee=Ne)}return{successful:!!(u.delimiter=Me),bestDelimiter:Me}}(T,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);B.successful?u.delimiter=B.bestDelimiter:(R=!0,u.delimiter=c.DefaultDelimiter),S.meta.delimiter=u.delimiter}var he=Y(u);return u.preview&&u.header&&he.preview++,l=T,m=new O(he),S=m.parse(l,L,W),V(),F?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,m.abort(),l=I(u.chunk)?"":l.substring(m.getCharIndex())},this.resume=function(){J.streamer._halted?(F=!1,J.streamer.parseChunk(l,!0)):setTimeout(J.resume,3)},this.aborted=function(){return Se},this.abort=function(){Se=!0,m.abort(),S.meta.aborted=!0,I(u.complete)&&u.complete(S),l=""}}function g(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(u){var l,m=(u=u||{}).delimiter,R=u.newline,_=u.comments,D=u.step,M=u.preview,oe=u.fastMode,J=l=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(J=u.escapeChar),(typeof m!="string"||-1<c.BAD_DELIMITERS.indexOf(m))&&(m=","),_===m)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<c.BAD_DELIMITERS.indexOf(_))&&(_=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var k=0,Z=!1;this.parse=function(F,Se,le){if(typeof F!="string")throw new Error("Input must be a string");var S=F.length,K=m.length,ce=R.length,V=_.length,ue=I(D),ie=[],ne=[],T=[],L=k=0;if(!F)return we();if(u.header&&!Se){var W=F.split(R)[0].split(m),te=[],B={},he=!1;for(var X in W){var Q=W[X];I(u.transformHeader)&&(Q=u.transformHeader(Q,X));var _e=Q,ve=B[Q]||0;for(0<ve&&(he=!0,_e=Q+"_"+ve),B[Q]=ve+1;te.includes(_e);)_e=_e+"_"+ve;te.push(_e)}if(he){var Te=F.split(R);Te[0]=te.join(m),F=Te.join(R)}}if(oe||oe!==!1&&F.indexOf(l)===-1){for(var Me=F.split(R),be=0;be<Me.length;be++){if(T=Me[be],k+=T.length,be!==Me.length-1)k+=R.length;else if(le)return we();if(!_||T.substring(0,V)!==_){if(ue){if(ie=[],nt(T.split(m)),rr(),Z)return we()}else nt(T.split(m));if(M&&M<=be)return ie=ie.slice(0,M),we(!0)}}return we()}for(var H=F.indexOf(m,k),ee=F.indexOf(R,k),it=new RegExp(g(J)+g(l),"g"),q=F.indexOf(l,k);;)if(F[k]!==l)if(_&&T.length===0&&F.substring(k,k+V)===_){if(ee===-1)return we();k=ee+ce,ee=F.indexOf(R,k),H=F.indexOf(m,k)}else if(H!==-1&&(H<ee||ee===-1))T.push(F.substring(k,H)),k=H+K,H=F.indexOf(m,k);else{if(ee===-1)break;if(T.push(F.substring(k,ee)),We(ee+ce),ue&&(rr(),Z))return we();if(M&&ie.length>=M)return we(!0)}else for(q=k,k++;;){if((q=F.indexOf(l,q+1))===-1)return le||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:k}),Ke();if(q===S-1)return Ke(F.substring(k,q).replace(it,l));if(l!==J||F[q+1]!==J){if(l===J||q===0||F[q-1]!==J){H!==-1&&H<q+1&&(H=F.indexOf(m,q+1)),ee!==-1&&ee<q+1&&(ee=F.indexOf(R,q+1));var yt=ze(ee===-1?H:Math.min(H,ee));if(F.substr(q+1+yt,K)===m){T.push(F.substring(k,q).replace(it,l)),F[k=q+1+yt+K]!==l&&(q=F.indexOf(l,k)),H=F.indexOf(m,k),ee=F.indexOf(R,k);break}var Ne=ze(ee);if(F.substring(q+1+Ne,q+1+Ne+ce)===R){if(T.push(F.substring(k,q).replace(it,l)),We(q+1+Ne+ce),H=F.indexOf(m,k),q=F.indexOf(l,k),ue&&(rr(),Z))return we();if(M&&ie.length>=M)return we(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:k}),q++}}else q++}return Ke();function nt(xe){ie.push(xe),L=k}function ze(xe){var rs=0;if(xe!==-1){var wr=F.substring(q+1,xe);wr&&wr.trim()===""&&(rs=wr.length)}return rs}function Ke(xe){return le||(xe===void 0&&(xe=F.substring(k)),T.push(xe),k=S,nt(T),ue&&rr()),we()}function We(xe){k=xe,nt(T),T=[],ee=F.indexOf(R,k)}function we(xe){return{data:ie,errors:ne,meta:{delimiter:m,linebreak:R,aborted:Z,truncated:!!xe,cursor:L+(Se||0)}}}function rr(){D(we()),ie=[],ne=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return k}}function N(u){var l=u.data,m=o[l.workerId],R=!1;if(l.error)m.userError(l.error,l.file);else if(l.results&&l.results.data){var _={abort:function(){R=!0,A(l.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(I(m.userStep)){for(var D=0;D<l.results.data.length&&(m.userStep({data:l.results.data[D],errors:l.results.errors,meta:l.results.meta},_),!R);D++);delete l.results}else I(m.userChunk)&&(m.userChunk(l.results,_,l.file),delete l.results)}l.finished&&!R&&A(l.workerId,l.results)}function A(u,l){var m=o[u];I(m.userComplete)&&m.userComplete(l),m.terminate(),delete o[u]}function z(){throw new Error("Not implemented.")}function Y(u){if(typeof u!="object"||u===null)return u;var l=Array.isArray(u)?[]:{};for(var m in u)l[m]=Y(u[m]);return l}function G(u,l){return function(){u.apply(l,arguments)}}function I(u){return typeof u=="function"}return a&&(s.onmessage=function(u){var l=u.data;if(c.WORKER_ID===void 0&&l&&(c.WORKER_ID=l.workerId),typeof l.input=="string")s.postMessage({workerId:c.WORKER_ID,results:c.parse(l.input,l.config),finished:!0});else if(s.File&&l.input instanceof File||l.input instanceof Object){var m=c.parse(l.input,l.config);m&&s.postMessage({workerId:c.WORKER_ID,results:m,finished:!0})}}),(C.prototype=Object.create(d.prototype)).constructor=C,(v.prototype=Object.create(d.prototype)).constructor=v,(w.prototype=Object.create(w.prototype)).constructor=w,(j.prototype=Object.create(d.prototype)).constructor=j,c})})(pi);var Sa=pi.exports;const $e=Ei(Sa);function _a(t,e){return $e.parse(t,e)}function ka(t,e){$e.parse(t,Object.assign({},{download:!0},e))}function Ta(t,e){return e===void 0&&(e={}),$e.unparse(t,e)}function Pa(){return{readString:_a,readRemoteFile:ka,jsonToCSV:Ta}}$e.BAD_DELIMITERS;$e.RECORD_SEP;$e.UNIT_SEP;$e.WORKERS_SUPPORTED;$e.LocalChunkSize;$e.DefaultDelimiter;function mi({cell:t}){return p.jsx("td",{className:"py-2 px-2 text-sm text-gray-900",children:t})}function $r({row:t}){return p.jsx("tr",{className:"divide-x divide-gray-200 even:bg-gray-50",children:t.map((e,r)=>p.jsx(mi,{cell:e},r))})}function gi({data:t}){const{readString:e}=Pa(),r=e(t,{chunk:!0,complete:s=>s}).data;return r.length>=1e3?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"font-bold mb-2",role:"alert",children:"This is a preview of the first 1000 rows"}),p.jsx("div",{className:"flow-root",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsx("div",{className:"inline-block min-w-full align-middle",children:p.jsx("table",{className:"min-w-full divide-y divide-gray-300",children:p.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.slice(0,1e3).map((s,i)=>p.jsx($r,{row:s},i))})})})})})]}):p.jsx("div",{className:"flow-root",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsx("div",{className:"inline-block min-w-full align-middle",children:p.jsx("table",{className:"min-w-full divide-y divide-gray-300",children:p.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.map((s,i)=>p.jsx($r,{row:s},i))})})})})})}mi.propTypes={cell:x.string.isRequired};$r.propTypes={row:x.arrayOf(x.string).isRequired};gi.propTypes={data:x.string.isRequired};function zr({data:t}){return p.jsx("pre",{className:"whitespace-break-spaces break-words",children:t})}zr.propTypes={data:x.string.isRequired};function yi({authToken:t,fileName:e,fileSize:r,fileUrl:s,uuid:i}){const{data:a,error:o,isLoading:h,isError:c}=Js({queryKey:["FILE",s],queryFn:async()=>{if(!bs(e)||r>2e7||Br(e)&&r>5e6)return!1;const f=`${s}?${i}`;let d=await fetch(f,{headers:{Authorization:t}});if(!d.ok)throw new Error;if(d.headers.has("Location")&&d.headers.has("Authorization")&&(d=await fetch(d.headers.get("Location"),{headers:{Authorization:d.headers.get("Authorization")}}),!d.ok))throw new Error;const C=await d.clone().text();if(C===Rr)return Rr;if(Qr(e)){const v=await d.blob();return URL.createObjectURL(v)}return C},meta:{errorMessage:`${e} - Unable to load file`,id:s}});return h?p.jsx("span",{children:"Loading..."}):a===Rr?p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"This file has not been uploaded yet. This is likely due to do an error that occurred during release."}),p.jsx("p",{className:"mt-3",children:p.jsx(tr,{href:"https://docs.opensafely.org/how-to-get-help/#slack",newTab:!0,children:"Contact tech support in Slack for more information."})})]}):c||!a||!bs(e)?p.jsx(es,{error:o,fileUrl:s}):p.jsxs(p.Fragment,{children:[Br(e)?p.jsx(gi,{data:a}):null,li(e)&&p.jsx(di,{data:a,fileName:e,fileUrl:s}),Qr(e)?p.jsx(fi,{data:a}):null,ci(e)?p.jsx(zr,{data:a}):null,hi(e)?p.jsx(zr,{data:a}):null]})}yi.propTypes={authToken:pe.authToken.isRequired,fileName:De.name.isRequired,fileSize:De.size.isRequired,fileUrl:De.url.isRequired,uuid:x.number.isRequired};const Fa=new on({defaultOptions:{queries:{refetchOnWindowFocus:!1}},queryCache:new Qs({onError:(t,e)=>{e.meta.errorMessage&&Zr({message:e.meta.errorMessage,toastId:e.meta.id,filesUrl:e.meta.id,url:document.location.href})}})});function ts({authToken:t,csrfToken:e,filesUrl:r,prepareUrl:s,publishUrl:i}){const a=Date.now(),[o,h]=y.useState(!0),[c,f]=y.useState();return p.jsxs(dn,{client:Fa,children:[p.jsxs("div",{className:"py-6",children:[(s||i)&&p.jsxs("div",{className:"mb-3 -mt-3 px-1 md:px-6",children:[s&&p.jsx(si,{authToken:t,csrfToken:e,filesUrl:r,prepareUrl:s}),i&&p.jsx(ii,{csrfToken:e,publishUrl:i})]}),p.jsxs("div",{className:"grid gap-6 grid-cols-1 px-1 md:grid-cols-3 md:px-6 lg:grid-cols-4",children:[p.jsxs("div",{className:"flex flex-col gap-y-1 md:col-span-1",children:[p.jsxs(Xt,{className:"block md:hidden mb-3",onClick:()=>h(!o),type:"button",variant:"secondary",children:[o?"Hide":"Show"," file list"]}),p.jsx(oi,{authToken:t,filesUrl:r,listVisible:o,setListVisible:h,setSelectedFile:f})]}),p.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:c&&p.jsx(vt,{container:!0,header:p.jsx(ui,{fileDate:c.date,fileName:c.shortName,fileSize:c.size,fileUrl:c.url}),children:p.jsx(yi,{authToken:t,fileName:c.shortName,fileSize:c.size,fileUrl:c.url,uuid:a})})})]})]}),p.jsx(Ca,{}),p.jsx(On,{initialIsOpen:!1})]})}ts.propTypes={authToken:pe.authToken.isRequired,csrfToken:pe.csrfToken.isRequired,filesUrl:pe.filesUrl.isRequired,prepareUrl:pe.prepareUrl,publishUrl:pe.publishUrl};ts.defaultProps={prepareUrl:null,publishUrl:null};bi({dsn:"",tracesSampleRate:1});const cr=document.getElementById("outputsSPA"),ja=wi(cr);document.getElementById("content")&&document.getElementById("content").remove();ja.render(p.jsx(xi.StrictMode,{children:p.jsx(Ki,{basename:cr.dataset.basePath,children:p.jsx(ts,{...cr.dataset,element:cr})})}));
