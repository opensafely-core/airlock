const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/html2pdf-Cxs64T9g.js","assets/_commonjsHelpers-BosuxZz1.js","assets/preload-helper-DbXwivZQ.js"])))=>i.map(i=>d[i]);
import{_ as f}from"./preload-helper-DbXwivZQ.js";function p(){const e=document.getElementById("downloadBtn"),t=document.getElementById("reportContainer"),d=t.querySelector("#watermark"),i=t.querySelector("#report"),l=document.getElementById("viewProjectPurposeLink"),m=document.getElementById("viewOnOpensafelyLink"),n=document.getElementById("downloadModal"),o=n.querySelector('[value="confirm"]'),u=n.querySelector('[value="cancel"]'),s=n.querySelector('[value="generating"]'),r=n.querySelector('[value="downloading"]'),L={margin:15,filename:`${e.dataset.title} - Report.pdf`,image:{type:"jpeg",quality:.75},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},html2canvas:{scale:2},pagebreak:{mode:"avoid-all"}};let c;e.addEventListener("click",async()=>{n.showModal();const h=await f(()=>import("./html2pdf-Cxs64T9g.js").then(a=>a.h),__vite__mapDeps([0,1,2]));i.classList.add("print-pdf"),l.classList.add("hidden"),m.classList.remove("hidden"),t.querySelectorAll("svg").forEach(a=>a.classList.add("!hidden")),t.querySelector(".toc").classList.add("!hidden");const v=d.innerHTML;d.classList.remove("hidden"),d.innerHTML=d.innerHTML.repeat(300),c=h.default().set(L).from(i).toContainer().toPdf(),await c,setTimeout(()=>{d.classList.add("hidden"),d.innerHTML=v,i.classList.remove("print-pdf"),t.querySelectorAll("svg").forEach(a=>a.classList.remove("!hidden")),t.querySelector(".toc").classList.remove("!hidden")},0),m.classList.add("hidden"),l.classList.remove("hidden"),o.classList.remove("hidden"),s.classList.add("hidden")}),o.addEventListener("click",()=>{c.save(),o.classList.add("hidden"),s.classList.add("hidden"),r.classList.remove("hidden"),setTimeout(()=>{o.classList.add("hidden"),r.classList.add("hidden"),s.classList.remove("hidden"),n.close("Download started")},1e3)}),u.addEventListener("click",()=>{n.close("Download cancelled"),o.classList.add("hidden"),r.classList.add("hidden"),s.classList.remove("hidden")})}function y(){const e=document.querySelectorAll('[data-format-number="true"]');e==null||e.forEach(t=>t.textContent=parseFloat(t.textContent).toLocaleString("en-GB"))}function g(){if(document.querySelector("#tableOfContents")){const e=document.createElement("a");e.id="menuBtn",e.textContent="Back to table of contents",e.href="#tableOfContents",document.querySelector("main").appendChild(e)}}document.addEventListener("DOMContentLoaded",()=>{p(),y(),g()});
