const tt=i=>Object.prototype.toString.call(i)==="[object Object]",Pt=i=>{let e=!1;try{e=JSON.parse(i)}catch{return!1}return!(e===null||!Array.isArray(e)&&!tt(e))&&e},U=(i,e)=>{const t=document.createElement(i);if(e&&typeof e=="object")for(const s in e)s==="html"?t.innerHTML=e[s]:t.setAttribute(s,e[s]);return t},ct=i=>["#text","#comment"].includes(i.nodeName)?i.data:i.childNodes?i.childNodes.map(e=>ct(e)).join(""):"",B=i=>{if(i==null)return"";if(i.hasOwnProperty("text")||i.hasOwnProperty("data")){const e=i;return e.text??B(e.data)}return i.hasOwnProperty("nodeName")?ct(i):String(i)},ot=function(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},ut=function(i,e){let t=0,s=0;for(;t<i+1;)e[s].hidden||(t+=1),s+=1;return s-1},Et=function(i){const e={};if(i)for(const t of i)e[t.name]=t.value;return e},F=i=>i?i.trim().split(" ").map(e=>`.${e}`).join(""):null,bt=(i,e)=>!(e==null?void 0:e.split(" ").some(s=>!i.classList.contains(s))),Q=(i,e)=>i?e?`${i} ${e}`:i:e||"";var L=function(){function i(e){var t=this;e===void 0&&(e={}),Object.entries(e).forEach(function(s){var n=s[0],a=s[1];return t[n]=a})}return i.prototype.toString=function(){return JSON.stringify(this)},i.prototype.setValue=function(e,t){return this[e]=t,this},i}();function H(i){for(var e=arguments,t=[],s=1;s<arguments.length;s++)t[s-1]=e[s];return i!=null&&t.some(function(n){var a,r;return typeof((r=(a=i==null?void 0:i.ownerDocument)===null||a===void 0?void 0:a.defaultView)===null||r===void 0?void 0:r[n])=="function"&&i instanceof i.ownerDocument.defaultView[n]})}function wt(i,e,t){var s;return i.nodeName==="#text"?s=t.document.createTextNode(i.data):i.nodeName==="#comment"?s=t.document.createComment(i.data):(e?s=t.document.createElementNS("http://www.w3.org/2000/svg",i.nodeName):i.nodeName.toLowerCase()==="svg"?(s=t.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):s=t.document.createElement(i.nodeName),i.attributes&&Object.entries(i.attributes).forEach(function(n){var a=n[0],r=n[1];return s.setAttribute(a,r)}),i.childNodes&&i.childNodes.forEach(function(n){return s.appendChild(wt(n,e,t))}),t.valueDiffing&&(i.value&&H(s,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(s.value=i.value),i.checked&&H(s,"HTMLInputElement")&&(s.checked=i.checked),i.selected&&H(s,"HTMLOptionElement")&&(s.selected=i.selected))),s}var vt=function(i,e){for(e=e.slice();e.length>0;){var t=e.splice(0,1)[0];i=i.childNodes[t]}return i};function Z(i,e,t){var s,n,a,r=e[t._const.action],o=e[t._const.route];[t._const.addElement,t._const.addTextElement].includes(r)||(s=vt(i,o));var l={diff:e,node:s};if(t.preDiffApply(l))return!0;switch(r){case t._const.addAttribute:if(!s||!H(s,"Element"))return!1;s.setAttribute(e[t._const.name],e[t._const.value]);break;case t._const.modifyAttribute:if(!s||!H(s,"Element"))return!1;s.setAttribute(e[t._const.name],e[t._const.newValue]),H(s,"HTMLInputElement")&&e[t._const.name]==="value"&&(s.value=e[t._const.newValue]);break;case t._const.removeAttribute:if(!s||!H(s,"Element"))return!1;s.removeAttribute(e[t._const.name]);break;case t._const.modifyTextElement:if(!s||!H(s,"Text"))return!1;t.textDiff(s,s.data,e[t._const.oldValue],e[t._const.newValue]),H(s.parentNode,"HTMLTextAreaElement")&&(s.parentNode.value=e[t._const.newValue]);break;case t._const.modifyValue:if(!s||s.value===void 0)return!1;s.value=e[t._const.newValue];break;case t._const.modifyComment:if(!s||!H(s,"Comment"))return!1;t.textDiff(s,s.data,e[t._const.oldValue],e[t._const.newValue]);break;case t._const.modifyChecked:if(!s||s.checked===void 0)return!1;s.checked=e[t._const.newValue];break;case t._const.modifySelected:if(!s||s.selected===void 0)return!1;s.selected=e[t._const.newValue];break;case t._const.replaceElement:var d=e[t._const.newValue].nodeName.toLowerCase()==="svg"||s.parentNode.namespaceURI==="http://www.w3.org/2000/svg";s.parentNode.replaceChild(wt(e[t._const.newValue],d,t),s);break;case t._const.relocateGroup:Array.apply(void 0,new Array(e[t._const.groupLength])).map(function(){return s.removeChild(s.childNodes[e[t._const.from]])}).forEach(function(f,p){p===0&&(a=s.childNodes[e[t._const.to]]),s.insertBefore(f,a||null)});break;case t._const.removeElement:s.parentNode.removeChild(s);break;case t._const.addElement:var h=(u=o.slice()).splice(u.length-1,1)[0];if(!H(s=vt(i,u),"Element"))return!1;s.insertBefore(wt(e[t._const.element],s.namespaceURI==="http://www.w3.org/2000/svg",t),s.childNodes[h]||null);break;case t._const.removeTextElement:if(!s||s.nodeType!==3)return!1;var m=s.parentNode;m.removeChild(s),H(m,"HTMLTextAreaElement")&&(m.value="");break;case t._const.addTextElement:var u;if(h=(u=o.slice()).splice(u.length-1,1)[0],n=t.document.createTextNode(e[t._const.value]),!(s=vt(i,u)).childNodes)return!1;s.insertBefore(n,s.childNodes[h]||null),H(s.parentNode,"HTMLTextAreaElement")&&(s.parentNode.value=e[t._const.value]);break;default:console.log("unknown action")}return t.postDiffApply({diff:l.diff,node:l.node,newNode:n}),!0}function _t(i,e,t){var s=i[e];i[e]=i[t],i[t]=s}function Rt(i,e,t){(e=e.slice()).reverse(),e.forEach(function(s){(function(n,a,r){switch(a[r._const.action]){case r._const.addAttribute:a[r._const.action]=r._const.removeAttribute,Z(n,a,r);break;case r._const.modifyAttribute:_t(a,r._const.oldValue,r._const.newValue),Z(n,a,r);break;case r._const.removeAttribute:a[r._const.action]=r._const.addAttribute,Z(n,a,r);break;case r._const.modifyTextElement:case r._const.modifyValue:case r._const.modifyComment:case r._const.modifyChecked:case r._const.modifySelected:case r._const.replaceElement:_t(a,r._const.oldValue,r._const.newValue),Z(n,a,r);break;case r._const.relocateGroup:_t(a,r._const.from,r._const.to),Z(n,a,r);break;case r._const.removeElement:a[r._const.action]=r._const.addElement,Z(n,a,r);break;case r._const.addElement:a[r._const.action]=r._const.removeElement,Z(n,a,r);break;case r._const.removeTextElement:a[r._const.action]=r._const.addTextElement,Z(n,a,r);break;case r._const.addTextElement:a[r._const.action]=r._const.removeTextElement,Z(n,a,r);break;default:console.log("unknown action")}})(i,s,t)})}var Nt=function(){return Nt=Object.assign||function(i){for(var e,t=arguments,s=1,n=arguments.length;s<n;s++)for(var a in e=t[s])Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i},Nt.apply(this,arguments)};var Dt=function(i){var e=[];return e.push(i.nodeName),i.nodeName!=="#text"&&i.nodeName!=="#comment"&&i.attributes&&(i.attributes.class&&e.push("".concat(i.nodeName,".").concat(i.attributes.class.replace(/ /g,"."))),i.attributes.id&&e.push("".concat(i.nodeName,"#").concat(i.attributes.id))),e},Vt=function(i){var e={},t={};return i.forEach(function(s){Dt(s).forEach(function(n){var a=n in e;a||n in t?a&&(delete e[n],t[n]=!0):e[n]=!0})}),e},Tt=function(i,e){var t=Vt(i),s=Vt(e),n={};return Object.keys(t).forEach(function(a){s[a]&&(n[a]=!0)}),n},At=function(i){return delete i.outerDone,delete i.innerDone,delete i.valueDone,!i.childNodes||i.childNodes.every(At)},Y=function(i){if(Object.prototype.hasOwnProperty.call(i,"data"))return{nodeName:i.nodeName==="#text"?"#text":"#comment",data:i.data};var e={nodeName:i.nodeName};return Object.prototype.hasOwnProperty.call(i,"attributes")&&(e.attributes=Nt({},i.attributes)),Object.prototype.hasOwnProperty.call(i,"checked")&&(e.checked=i.checked),Object.prototype.hasOwnProperty.call(i,"value")&&(e.value=i.value),Object.prototype.hasOwnProperty.call(i,"selected")&&(e.selected=i.selected),Object.prototype.hasOwnProperty.call(i,"childNodes")&&(e.childNodes=i.childNodes.map(function(t){return Y(t)})),e},Mt=function(i,e){if(!["nodeName","value","checked","selected","data"].every(function(n){return i[n]===e[n]}))return!1;if(Object.prototype.hasOwnProperty.call(i,"data"))return!0;if(!!i.attributes!=!!e.attributes||!!i.childNodes!=!!e.childNodes)return!1;if(i.attributes){var t=Object.keys(i.attributes),s=Object.keys(e.attributes);if(t.length!==s.length||!t.every(function(n){return i.attributes[n]===e.attributes[n]}))return!1}return!(i.childNodes&&(i.childNodes.length!==e.childNodes.length||!i.childNodes.every(function(n,a){return Mt(n,e.childNodes[a])})))},Ot=function(i,e,t,s,n){if(n===void 0&&(n=!1),!i||!e||i.nodeName!==e.nodeName)return!1;if(["#text","#comment"].includes(i.nodeName))return!!n||i.data===e.data;if(i.nodeName in t)return!0;if(i.attributes&&e.attributes){if(i.attributes.id){if(i.attributes.id!==e.attributes.id)return!1;if("".concat(i.nodeName,"#").concat(i.attributes.id)in t)return!0}if(i.attributes.class&&i.attributes.class===e.attributes.class&&"".concat(i.nodeName,".").concat(i.attributes.class.replace(/ /g,"."))in t)return!0}if(s)return!0;var a=i.childNodes?i.childNodes.slice().reverse():[],r=e.childNodes?e.childNodes.slice().reverse():[];if(a.length!==r.length)return!1;if(n)return a.every(function(l,d){return l.nodeName===r[d].nodeName});var o=Tt(a,r);return a.every(function(l,d){return Ot(l,r[d],o,!0,!0)})},pt=function(i,e){return Array.apply(void 0,new Array(i)).map(function(){return e})},Ht=function(i,e){for(var t=i.childNodes?i.childNodes:[],s=e.childNodes?e.childNodes:[],n=pt(t.length,!1),a=pt(s.length,!1),r=[],o=function(){return arguments[1]},l=!1,d=function(){var h=function(m,u,f,p){var N=0,D=[],O=m.length,c=u.length,_=Array.apply(void 0,new Array(O+1)).map(function(){return[]}),S=Tt(m,u),C=O===c;C&&m.some(function(k,P){var y=Dt(k),b=Dt(u[P]);return y.length!==b.length?(C=!1,!0):(y.some(function(g,w){if(g!==b[w])return C=!1,!0}),!C||void 0)});for(var $=0;$<O;$++)for(var A=m[$],E=0;E<c;E++){var M=u[E];f[$]||p[E]||!Ot(A,M,S,C)?_[$+1][E+1]=0:(_[$+1][E+1]=_[$][E]?_[$][E]+1:1,_[$+1][E+1]>=N&&(N=_[$+1][E+1],D=[$+1,E+1]))}return N!==0&&{oldValue:D[0]-N,newValue:D[1]-N,length:N}}(t,s,n,a);h?(r.push(h),Array.apply(void 0,new Array(h.length)).map(o).forEach(function(m){return function(u,f,p,N){u[p.oldValue+N]=!0,f[p.newValue+N]=!0}(n,a,h,m)})):l=!0};!l;)d();return i.subsets=r,i.subsetsAge=100,r},It=function(){function i(){this.list=[]}return i.prototype.add=function(e){var t;(t=this.list).push.apply(t,e)},i.prototype.forEach=function(e){this.list.forEach(function(t){return e(t)})},i}();function yt(i,e){var t,s,n=i;for(e=e.slice();e.length>0;)s=e.splice(0,1)[0],t=n,n=n.childNodes?n.childNodes[s]:void 0;return{node:n,parentNode:t,nodeIndex:s}}function Yt(i,e,t){return e.forEach(function(s){(function(n,a,r){var o,l,d,h;if(![r._const.addElement,r._const.addTextElement].includes(a[r._const.action])){var m=yt(n,a[r._const.route]);l=m.node,d=m.parentNode,h=m.nodeIndex}var u,f,p=[],N={diff:a,node:l};if(r.preVirtualDiffApply(N))return!0;switch(a[r._const.action]){case r._const.addAttribute:l.attributes||(l.attributes={}),l.attributes[a[r._const.name]]=a[r._const.value],a[r._const.name]==="checked"?l.checked=!0:a[r._const.name]==="selected"?l.selected=!0:l.nodeName==="INPUT"&&a[r._const.name]==="value"&&(l.value=a[r._const.value]);break;case r._const.modifyAttribute:l.attributes[a[r._const.name]]=a[r._const.newValue];break;case r._const.removeAttribute:delete l.attributes[a[r._const.name]],Object.keys(l.attributes).length===0&&delete l.attributes,a[r._const.name]==="checked"?l.checked=!1:a[r._const.name]==="selected"?delete l.selected:l.nodeName==="INPUT"&&a[r._const.name]==="value"&&delete l.value;break;case r._const.modifyTextElement:l.data=a[r._const.newValue],d.nodeName==="TEXTAREA"&&(d.value=a[r._const.newValue]);break;case r._const.modifyValue:l.value=a[r._const.newValue];break;case r._const.modifyComment:l.data=a[r._const.newValue];break;case r._const.modifyChecked:l.checked=a[r._const.newValue];break;case r._const.modifySelected:l.selected=a[r._const.newValue];break;case r._const.replaceElement:u=Y(a[r._const.newValue]),d.childNodes[h]=u;break;case r._const.relocateGroup:l.childNodes.splice(a[r._const.from],a[r._const.groupLength]).reverse().forEach(function(c){return l.childNodes.splice(a[r._const.to],0,c)}),l.subsets&&l.subsets.forEach(function(c){if(a[r._const.from]<a[r._const.to]&&c.oldValue<=a[r._const.to]&&c.oldValue>a[r._const.from])c.oldValue-=a[r._const.groupLength],(_=c.oldValue+c.length-a[r._const.to])>0&&(p.push({oldValue:a[r._const.to]+a[r._const.groupLength],newValue:c.newValue+c.length-_,length:_}),c.length-=_);else if(a[r._const.from]>a[r._const.to]&&c.oldValue>a[r._const.to]&&c.oldValue<a[r._const.from]){var _;c.oldValue+=a[r._const.groupLength],(_=c.oldValue+c.length-a[r._const.to])>0&&(p.push({oldValue:a[r._const.to]+a[r._const.groupLength],newValue:c.newValue+c.length-_,length:_}),c.length-=_)}else c.oldValue===a[r._const.from]&&(c.oldValue=a[r._const.to])});break;case r._const.removeElement:d.childNodes.splice(h,1),d.subsets&&d.subsets.forEach(function(c){c.oldValue>h?c.oldValue-=1:c.oldValue===h?c.delete=!0:c.oldValue<h&&c.oldValue+c.length>h&&(c.oldValue+c.length-1===h?c.length--:(p.push({newValue:c.newValue+h-c.oldValue,oldValue:h,length:c.length-h+c.oldValue-1}),c.length=h-c.oldValue))}),l=d;break;case r._const.addElement:var D=(f=a[r._const.route].slice()).splice(f.length-1,1)[0];l=(o=yt(n,f))===null||o===void 0?void 0:o.node,u=Y(a[r._const.element]),l.childNodes||(l.childNodes=[]),D>=l.childNodes.length?l.childNodes.push(u):l.childNodes.splice(D,0,u),l.subsets&&l.subsets.forEach(function(c){if(c.oldValue>=D)c.oldValue+=1;else if(c.oldValue<D&&c.oldValue+c.length>D){var _=c.oldValue+c.length-D;p.push({newValue:c.newValue+c.length-_,oldValue:D+1,length:_}),c.length-=_}});break;case r._const.removeTextElement:d.childNodes.splice(h,1),d.nodeName==="TEXTAREA"&&delete d.value,d.subsets&&d.subsets.forEach(function(c){c.oldValue>h?c.oldValue-=1:c.oldValue===h?c.delete=!0:c.oldValue<h&&c.oldValue+c.length>h&&(c.oldValue+c.length-1===h?c.length--:(p.push({newValue:c.newValue+h-c.oldValue,oldValue:h,length:c.length-h+c.oldValue-1}),c.length=h-c.oldValue))}),l=d;break;case r._const.addTextElement:var O=(f=a[r._const.route].slice()).splice(f.length-1,1)[0];u={nodeName:"#text",data:a[r._const.value]},(l=yt(n,f).node).childNodes||(l.childNodes=[]),O>=l.childNodes.length?l.childNodes.push(u):l.childNodes.splice(O,0,u),l.nodeName==="TEXTAREA"&&(l.value=a[r._const.newValue]),l.subsets&&l.subsets.forEach(function(c){if(c.oldValue>=O&&(c.oldValue+=1),c.oldValue<O&&c.oldValue+c.length>O){var _=c.oldValue+c.length-O;p.push({newValue:c.newValue+c.length-_,oldValue:O+1,length:_}),c.length-=_}});break;default:console.log("unknown action")}l.subsets&&(l.subsets=l.subsets.filter(function(c){return!c.delete&&c.oldValue!==c.newValue}),p.length&&(l.subsets=l.subsets.concat(p))),r.postVirtualDiffApply({node:N.node,diff:N.diff,newNode:u})})(i,s,t)}),!0}function it(i,e){e===void 0&&(e={valueDiffing:!0});var t={nodeName:i.nodeName};return H(i,"Text","Comment")?t.data=i.data:(i.attributes&&i.attributes.length>0&&(t.attributes={},Array.prototype.slice.call(i.attributes).forEach(function(s){return t.attributes[s.name]=s.value})),i.childNodes&&i.childNodes.length>0&&(t.childNodes=[],Array.prototype.slice.call(i.childNodes).forEach(function(s){return t.childNodes.push(it(s,e))})),e.valueDiffing&&(H(i,"HTMLTextAreaElement")&&(t.value=i.value),H(i,"HTMLInputElement")&&["radio","checkbox"].includes(i.type.toLowerCase())&&i.checked!==void 0?t.checked=i.checked:H(i,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(t.value=i.value),H(i,"HTMLOptionElement")&&(t.selected=i.selected))),t}var jt=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,qt=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function $t(i){return i.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var Ft={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Ct=function(i,e){var t={nodeName:"",attributes:{}},s=!1,n=i.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.nodeName=e||n[1]==="svg"?n[1]:n[1].toUpperCase(),(Ft[n[1]]||i.charAt(i.length-2)==="/")&&(s=!0),t.nodeName.startsWith("!--"))){var a=i.indexOf("-->");return{type:"comment",node:{nodeName:"#comment",data:a!==-1?i.slice(4,a):""},voidElement:s}}for(var r=new RegExp(qt),o=null,l=!1;!l;)if((o=r.exec(i))===null)l=!0;else if(o[0].trim())if(o[1]){var d=o[1].trim(),h=[d,""];d.indexOf("=")>-1&&(h=d.split("=")),t.attributes[h[0]]=h[1],r.lastIndex--}else o[2]&&(t.attributes[o[2]]=o[3].trim().substring(1,o[3].length-1));return{type:"tag",node:t,voidElement:s}},nt=function(i,e){e===void 0&&(e={valueDiffing:!0,caseSensitive:!1});var t,s=[],n=-1,a=[],r=!1;if(i.indexOf("<")!==0){var o=i.indexOf("<");s.push({nodeName:"#text",data:o===-1?i:i.substring(0,o)})}return i.replace(jt,function(l,d){var h=l.charAt(1)!=="/",m=l.startsWith("<!--"),u=d+l.length,f=i.charAt(u);if(m){var p=Ct(l,e.caseSensitive).node;if(n<0)return s.push(p),"";var N=a[n];return N&&p.nodeName&&(N.node.childNodes||(N.node.childNodes=[]),N.node.childNodes.push(p)),""}if(h){if((t=Ct(l,e.caseSensitive||r)).node.nodeName==="svg"&&(r=!0),n++,!t.voidElement&&f&&f!=="<"){t.node.childNodes||(t.node.childNodes=[]);var D=$t(i.slice(u,i.indexOf("<",u)));t.node.childNodes.push({nodeName:"#text",data:D}),e.valueDiffing&&t.node.nodeName==="TEXTAREA"&&(t.node.value=D)}n===0&&t.node.nodeName&&s.push(t.node);var O=a[n-1];O&&t.node.nodeName&&(O.node.childNodes||(O.node.childNodes=[]),O.node.childNodes.push(t.node)),a[n]=t}if((!h||t.voidElement)&&(n>-1&&(t.voidElement||e.caseSensitive&&t.node.nodeName===l.slice(2,-1)||!e.caseSensitive&&t.node.nodeName.toUpperCase()===l.slice(2,-1).toUpperCase())&&--n>-1&&(t.node.nodeName==="svg"&&(r=!1),t=a[n]),f!=="<"&&f)){var c=n===-1?s:a[n].node.childNodes||[],_=i.indexOf("<",u);D=$t(i.slice(u,_===-1?void 0:_)),c.push({nodeName:"#text",data:D})}return""}),s[0]},Bt=function(){function i(e,t,s){this.options=s,this.t1=typeof Element<"u"&&H(e,"Element")?it(e,this.options):typeof e=="string"?nt(e,this.options):JSON.parse(JSON.stringify(e)),this.t2=typeof Element<"u"&&H(t,"Element")?it(t,this.options):typeof t=="string"?nt(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig=typeof Element<"u"&&H(e,"Element")?it(e,this.options):typeof e=="string"?nt(e,this.options):JSON.parse(JSON.stringify(e)),this.t2Orig=typeof Element<"u"&&H(t,"Element")?it(t,this.options):typeof t=="string"?nt(t,this.options):JSON.parse(JSON.stringify(t))),this.tracker=new It}return i.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},i.prototype.findDiffs=function(e,t){var s;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));(s=this.findNextDiff(e,t,[])).length===0&&(Mt(e,t)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,At(e),s=this.findNextDiff(e,t,[])))),s.length>0&&(this.foundAll=!1,this.tracker.add(s),Yt(e,s,this.options))}while(s.length>0);return this.tracker.list},i.prototype.findNextDiff=function(e,t,s){var n,a;if(this.options.maxDepth&&s.length>this.options.maxDepth)return[];if(!e.outerDone){if(n=this.findOuterDiff(e,t,s),this.options.filterOuterDiff&&(a=this.options.filterOuterDiff(e,t,n))&&(n=a),n.length>0)return e.outerDone=!0,n;e.outerDone=!0}if(Object.prototype.hasOwnProperty.call(e,"data"))return[];if(!e.innerDone){if((n=this.findInnerDiff(e,t,s)).length>0)return n;e.innerDone=!0}if(this.options.valueDiffing&&!e.valueDone){if((n=this.findValueDiff(e,t,s)).length>0)return e.valueDone=!0,n;e.valueDone=!0}return[]},i.prototype.findOuterDiff=function(e,t,s){var n,a,r,o,l,d,h=[];if(e.nodeName!==t.nodeName){if(!s.length)throw new Error("Top level nodes have to be of the same kind.");return[new L().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(e)).setValue(this.options._const.newValue,Y(t)).setValue(this.options._const.route,s)]}if(s.length&&this.options.diffcap<Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[new L().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(e)).setValue(this.options._const.newValue,Y(t)).setValue(this.options._const.route,s)];if(Object.prototype.hasOwnProperty.call(e,"data")&&e.data!==t.data)return e.nodeName==="#text"?[new L().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[new L().setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,s).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(a=e.attributes?Object.keys(e.attributes).sort():[],r=t.attributes?Object.keys(t.attributes).sort():[],o=a.length,d=0;d<o;d++)n=a[d],(l=r.indexOf(n))===-1?h.push(new L().setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,e.attributes[n])):(r.splice(l,1),e.attributes[n]!==t.attributes[n]&&h.push(new L().setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.oldValue,e.attributes[n]).setValue(this.options._const.newValue,t.attributes[n])));for(o=r.length,d=0;d<o;d++)n=r[d],h.push(new L().setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,s).setValue(this.options._const.name,n).setValue(this.options._const.value,t.attributes[n]));return h},i.prototype.findInnerDiff=function(e,t,s){var n=e.childNodes?e.childNodes.slice():[],a=t.childNodes?t.childNodes.slice():[],r=Math.max(n.length,a.length),o=Math.abs(n.length-a.length),l=[],d=0;if(!this.options.maxChildCount||r<this.options.maxChildCount){var h=!!(e.subsets&&e.subsetsAge--),m=h?e.subsets:e.childNodes&&t.childNodes?Ht(e,t):[];if(m.length>0&&(l=this.attemptGroupRelocation(e,t,m,s,h)).length>0)return l}for(var u=0;u<r;u+=1){var f=n[u],p=a[u];o&&(f&&!p?f.nodeName==="#text"?(l.push(new L().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,f.data)),d-=1):(l.push(new L().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,Y(f))),d-=1):p&&!f&&(p.nodeName==="#text"?l.push(new L().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,p.data)):l.push(new L().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.element,Y(p))))),f&&p&&(!this.options.maxChildCount||r<this.options.maxChildCount?l=l.concat(this.findNextDiff(f,p,s.concat(d))):Mt(f,p)||(n.length>a.length?(f.nodeName==="#text"?l.push(new L().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,s.concat(d)).setValue(this.options._const.value,f.data)):l.push(new L().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,Y(f)).setValue(this.options._const.route,s.concat(d))),n.splice(u,1),u-=1,d-=1,o-=1):n.length<a.length?(l=l.concat([new L().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,Y(p)).setValue(this.options._const.route,s.concat(d))]),n.splice(u,0,Y(p)),o-=1):l=l.concat([new L().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(f)).setValue(this.options._const.newValue,Y(p)).setValue(this.options._const.route,s.concat(d))]))),d+=1}return e.innerDone=!0,l},i.prototype.attemptGroupRelocation=function(e,t,s,n,a){for(var r,o,l,d,h,m=function($,A,E){var M=$.childNodes?pt($.childNodes.length,!0):[],k=A.childNodes?pt(A.childNodes.length,!0):[],P=0;return E.forEach(function(y){for(var b=y.oldValue+y.length,g=y.newValue+y.length,w=y.oldValue;w<b;w+=1)M[w]=P;for(w=y.newValue;w<g;w+=1)k[w]=P;P+=1}),{gaps1:M,gaps2:k}}(e,t,s),u=m.gaps1,f=m.gaps2,p=e.childNodes.slice(),N=t.childNodes.slice(),D=Math.min(u.length,f.length),O=[],c=0,_=0;c<D;_+=1,c+=1)if(!a||u[c]!==!0&&f[c]!==!0){if(u[_]===!0)if((d=p[_]).nodeName==="#text")if(N[c].nodeName==="#text"){if(d.data!==N[c].data){for(var S=_;p.length>S+1&&p[S+1].nodeName==="#text";)if(S+=1,N[c].data===p[S].data){h=!0;break}h||O.push(new L().setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n.concat(_)).setValue(this.options._const.oldValue,d.data).setValue(this.options._const.newValue,N[c].data))}}else O.push(new L().setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(_)).setValue(this.options._const.value,d.data)),u.splice(_,1),p.splice(_,1),D=Math.min(u.length,f.length),_-=1,c-=1;else f[c]===!0?O.push(new L().setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,Y(d)).setValue(this.options._const.newValue,Y(N[c])).setValue(this.options._const.route,n.concat(_))):(O.push(new L().setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(_)).setValue(this.options._const.element,Y(d))),u.splice(_,1),p.splice(_,1),D=Math.min(u.length,f.length),_-=1,c-=1);else if(f[c]===!0)(d=N[c]).nodeName==="#text"?(O.push(new L().setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(_)).setValue(this.options._const.value,d.data)),u.splice(_,0,!0),p.splice(_,0,{nodeName:"#text",data:d.data}),D=Math.min(u.length,f.length)):(O.push(new L().setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(_)).setValue(this.options._const.element,Y(d))),u.splice(_,0,!0),p.splice(_,0,Y(d)),D=Math.min(u.length,f.length));else if(u[_]!==f[c]){if(O.length>0)return O;if(l=s[u[_]],(o=Math.min(l.newValue,p.length-l.length))!==l.oldValue){r=!1;for(var C=0;C<l.length;C+=1)Ot(p[o+C],p[l.oldValue+C],{},!1,!0)||(r=!0);if(r)return[new L().setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,l.length).setValue(this.options._const.from,l.oldValue).setValue(this.options._const.to,o).setValue(this.options._const.route,n)]}}}return O},i.prototype.findValueDiff=function(e,t,s){var n=[];return e.selected!==t.selected&&n.push(new L().setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,s)),(e.value||t.value)&&e.value!==t.value&&e.nodeName!=="OPTION"&&n.push(new L().setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||"").setValue(this.options._const.newValue,t.value||"").setValue(this.options._const.route,s)),e.checked!==t.checked&&n.push(new L().setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,s)),n},i}(),zt={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(i,e,t,s){i.data=s},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(typeof window>"u"||!window.document)&&window.document,components:[]},Ut=function(){function i(e){if(e===void 0&&(e={}),Object.entries(zt).forEach(function(n){var a=n[0],r=n[1];Object.prototype.hasOwnProperty.call(e,a)||(e[a]=r)}),!e._const){var t=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],s={};e.compress?t.forEach(function(n,a){return s[n]=a}):t.forEach(function(n){return s[n]=n}),e._const=s}this.options=e}return i.prototype.apply=function(e,t){return function(s,n,a){return n.every(function(r){return Z(s,r,a)})}(e,t,this.options)},i.prototype.undo=function(e,t){return Rt(e,t,this.options)},i.prototype.diff=function(e,t){return new Bt(e,t,this.options).init()},i}();const xt=(i,e,t,{classes:s,format:n,hiddenHeader:a,sortable:r,scrollY:o,type:l},{noColumnWidths:d,unhideHeader:h})=>({nodeName:"TR",childNodes:i.map((m,u)=>{const f=e[u]||{type:l,format:n,sortable:!0,searchable:!0};if(f.hidden)return;const p=m.attributes?{...m.attributes}:{};if(f.sortable&&r&&(!o.length||h)&&(f.filter?p["data-filterable"]="true":p["data-sortable"]="true"),f.headerClass&&(p.class=Q(p.class,f.headerClass)),t.sort&&t.sort.column===u){const D=t.sort.dir==="asc"?s.ascending:s.descending;p.class=Q(p.class,D),p["aria-sort"]=t.sort.dir==="asc"?"ascending":"descending"}else t.filters[u]&&(p.class=Q(p.class,s.filterActive));if(t.widths[u]&&!d){const D=`width: ${t.widths[u]}%;`;p.style=Q(p.style,D)}if(o.length&&!h){const D="padding-bottom: 0;padding-top: 0;border: 0;";p.style=Q(p.style,D)}const N=m.type==="html"?m.data:[{nodeName:"#text",data:m.text??String(m.data)}];return{nodeName:"TH",attributes:p,childNodes:!a&&!o.length||h?f.sortable&&r?[{nodeName:"BUTTON",attributes:{class:f.filter?s.filter:s.sorter},childNodes:N}]:N:[{nodeName:"#text",data:""}]}}).filter(m=>m)}),St=(i,e,t,s,n,a,{classes:r,hiddenHeader:o,header:l,footer:d,format:h,sortable:m,scrollY:u,type:f,rowRender:p,tabIndex:N},{noColumnWidths:D,unhideHeader:O,renderHeader:c},_,S)=>{const C={nodeName:"TABLE",attributes:{...i},childNodes:[{nodeName:"TBODY",childNodes:t.map(({row:$,index:A})=>{const E={nodeName:"TR",attributes:{...$.attributes,"data-index":String(A)},childNodes:$.cells.map((M,k)=>{const P=s[k]||{type:f,format:h,sortable:!0,searchable:!0};if(P.hidden)return;const y={nodeName:"TD",attributes:M.attributes?{...M.attributes}:{},childNodes:P.type==="html"?M.data:[{nodeName:"#text",data:B(M)}]};if(l||d||!n.widths[k]||D||(y.attributes.style=Q(y.attributes.style,`width: ${n.widths[k]}%;`)),P.cellClass&&(y.attributes.class=Q(y.attributes.class,P.cellClass)),P.render){const b=P.render(M.data,y,A,k);if(b){if(typeof b!="string")return b;{const g=nt(`<td>${b}</td>`);g.childNodes.length===1&&["#text","#comment"].includes(g.childNodes[0].nodeName)?y.childNodes[0].data=b:y.childNodes=g.childNodes}}}return y}).filter(M=>M)};if(A===a&&(E.attributes.class=Q(E.attributes.class,r.cursor)),p){const M=p($,E,A);if(M){if(typeof M!="string")return M;{const k=nt(`<tr>${M}</tr>`);!k.childNodes||k.childNodes.length===1&&["#text","#comment"].includes(k.childNodes[0].nodeName)?E.childNodes[0].data=M:E.childNodes=k.childNodes}}}return E})}]};if(C.attributes.class=Q(C.attributes.class,r.table),l||d||c){const $=xt(e,s,n,{classes:r,hiddenHeader:o,sortable:m,scrollY:u},{noColumnWidths:D,unhideHeader:O});if(l||c){const A={nodeName:"THEAD",childNodes:[$]};!u.length&&!o||O||(A.attributes={style:"height: 0px;"}),C.childNodes.unshift(A)}if(d){const A={nodeName:"TFOOT",childNodes:[l?structuredClone($):$]};!u.length&&!o||O||(A.attributes={style:"height: 0px;"}),C.childNodes.push(A)}}return _.forEach($=>C.childNodes.push($)),S.forEach($=>C.childNodes.push($)),N!==!1&&(C.attributes.tabindex=String(N)),C};function Lt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lt=Lt(function(){var i=1e3,e=6e4,t=36e5,s="millisecond",n="second",a="minute",r="hour",o="day",l="week",d="month",h="quarter",m="year",u="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(y){var b=["th","st","nd","rd"],g=y%100;return"["+y+(b[(g-20)%10]||b[g]||b[0])+"]"}},O=function(y,b,g){var w=String(y);return!w||w.length>=b?y:""+Array(b+1-w.length).join(g)+y},c={s:O,z:function(y){var b=-y.utcOffset(),g=Math.abs(b),w=Math.floor(g/60),v=g%60;return(b<=0?"+":"-")+O(w,2,"0")+":"+O(v,2,"0")},m:function y(b,g){if(b.date()<g.date())return-y(g,b);var w=12*(g.year()-b.year())+(g.month()-b.month()),v=b.clone().add(w,d),x=g-v<0,V=b.clone().add(w+(x?-1:1),d);return+(-(w+(g-v)/(x?v-V:V-v))||0)},a:function(y){return y<0?Math.ceil(y)||0:Math.floor(y)},p:function(y){return{M:d,y:m,w:l,d:o,D:u,h:r,m:a,s:n,ms:s,Q:h}[y]||String(y||"").toLowerCase().replace(/s$/,"")},u:function(y){return y===void 0}},_="en",S={};S[_]=D;var C="$isDayjsObject",$=function(y){return y instanceof k||!(!y||!y[C])},A=function y(b,g,w){var v;if(!b)return _;if(typeof b=="string"){var x=b.toLowerCase();S[x]&&(v=x),g&&(S[x]=g,v=x);var V=b.split("-");if(!v&&V.length>1)return y(V[0])}else{var T=b.name;S[T]=b,v=T}return!w&&v&&(_=v),v||!w&&_},E=function(y,b){if($(y))return y.clone();var g=typeof b=="object"?b:{};return g.date=y,g.args=arguments,new k(g)},M=c;M.l=A,M.i=$,M.w=function(y,b){return E(y,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var k=function(){function y(g){this.$L=A(g.locale,null,!0),this.parse(g),this.$x=this.$x||g.x||{},this[C]=!0}var b=y.prototype;return b.parse=function(g){this.$d=function(w){var v=w.date,x=w.utc;if(v===null)return new Date(NaN);if(M.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var V=v.match(p);if(V){var T=V[2]-1||0,R=(V[7]||"0").substring(0,3);return x?new Date(Date.UTC(V[1],T,V[3]||1,V[4]||0,V[5]||0,V[6]||0,R)):new Date(V[1],T,V[3]||1,V[4]||0,V[5]||0,V[6]||0,R)}}return new Date(v)}(g),this.init()},b.init=function(){var g=this.$d;this.$y=g.getFullYear(),this.$M=g.getMonth(),this.$D=g.getDate(),this.$W=g.getDay(),this.$H=g.getHours(),this.$m=g.getMinutes(),this.$s=g.getSeconds(),this.$ms=g.getMilliseconds()},b.$utils=function(){return M},b.isValid=function(){return this.$d.toString()!==f},b.isSame=function(g,w){var v=E(g);return this.startOf(w)<=v&&v<=this.endOf(w)},b.isAfter=function(g,w){return E(g)<this.startOf(w)},b.isBefore=function(g,w){return this.endOf(w)<E(g)},b.$g=function(g,w,v){return M.u(g)?this[w]:this.set(v,g)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(g,w){var v=this,x=!!M.u(w)||w,V=M.p(g),T=function(W,q){var J=M.w(v.$u?Date.UTC(v.$y,q,W):new Date(v.$y,q,W),v);return x?J:J.endOf(o)},R=function(W,q){return M.w(v.toDate()[W].apply(v.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(q)),v)},I=this.$W,j=this.$M,z=this.$D,et="set"+(this.$u?"UTC":"");switch(V){case m:return x?T(1,0):T(31,11);case d:return x?T(1,j):T(0,j+1);case l:var X=this.$locale().weekStart||0,G=(I<X?I+7:I)-X;return T(x?z-G:z+(6-G),j);case o:case u:return R(et+"Hours",0);case r:return R(et+"Minutes",1);case a:return R(et+"Seconds",2);case n:return R(et+"Milliseconds",3);default:return this.clone()}},b.endOf=function(g){return this.startOf(g,!1)},b.$set=function(g,w){var v,x=M.p(g),V="set"+(this.$u?"UTC":""),T=(v={},v[o]=V+"Date",v[u]=V+"Date",v[d]=V+"Month",v[m]=V+"FullYear",v[r]=V+"Hours",v[a]=V+"Minutes",v[n]=V+"Seconds",v[s]=V+"Milliseconds",v)[x],R=x===o?this.$D+(w-this.$W):w;if(x===d||x===m){var I=this.clone().set(u,1);I.$d[T](R),I.init(),this.$d=I.set(u,Math.min(this.$D,I.daysInMonth())).$d}else T&&this.$d[T](R);return this.init(),this},b.set=function(g,w){return this.clone().$set(g,w)},b.get=function(g){return this[M.p(g)]()},b.add=function(g,w){var v,x=this;g=Number(g);var V=M.p(w),T=function(j){var z=E(x);return M.w(z.date(z.date()+Math.round(j*g)),x)};if(V===d)return this.set(d,this.$M+g);if(V===m)return this.set(m,this.$y+g);if(V===o)return T(1);if(V===l)return T(7);var R=(v={},v[a]=e,v[r]=t,v[n]=i,v)[V]||1,I=this.$d.getTime()+g*R;return M.w(I,this)},b.subtract=function(g,w){return this.add(-1*g,w)},b.format=function(g){var w=this,v=this.$locale();if(!this.isValid())return v.invalidDate||f;var x=g||"YYYY-MM-DDTHH:mm:ssZ",V=M.z(this),T=this.$H,R=this.$m,I=this.$M,j=v.weekdays,z=v.months,et=v.meridiem,X=function(q,J,K,st){return q&&(q[J]||q(w,x))||K[J].slice(0,st)},G=function(q){return M.s(T%12||12,q,"0")},W=et||function(q,J,K){var st=q<12?"AM":"PM";return K?st.toLowerCase():st};return x.replace(N,function(q,J){return J||function(K){switch(K){case"YY":return String(w.$y).slice(-2);case"YYYY":return M.s(w.$y,4,"0");case"M":return I+1;case"MM":return M.s(I+1,2,"0");case"MMM":return X(v.monthsShort,I,z,3);case"MMMM":return X(z,I);case"D":return w.$D;case"DD":return M.s(w.$D,2,"0");case"d":return String(w.$W);case"dd":return X(v.weekdaysMin,w.$W,j,2);case"ddd":return X(v.weekdaysShort,w.$W,j,3);case"dddd":return j[w.$W];case"H":return String(T);case"HH":return M.s(T,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return W(T,R,!0);case"A":return W(T,R,!1);case"m":return String(R);case"mm":return M.s(R,2,"0");case"s":return String(w.$s);case"ss":return M.s(w.$s,2,"0");case"SSS":return M.s(w.$ms,3,"0");case"Z":return V}return null}(q)||V.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(g,w,v){var x,V=this,T=M.p(w),R=E(g),I=(R.utcOffset()-this.utcOffset())*e,j=this-R,z=function(){return M.m(V,R)};switch(T){case m:x=z()/12;break;case d:x=z();break;case h:x=z()/3;break;case l:x=(j-I)/6048e5;break;case o:x=(j-I)/864e5;break;case r:x=j/t;break;case a:x=j/e;break;case n:x=j/i;break;default:x=j}return v?x:M.a(x)},b.daysInMonth=function(){return this.endOf(d).$D},b.$locale=function(){return S[this.$L]},b.locale=function(g,w){if(!g)return this.$L;var v=this.clone(),x=A(g,w,!0);return x&&(v.$L=x),v},b.clone=function(){return M.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},y}(),P=k.prototype;return E.prototype=P,[["$ms",s],["$s",n],["$m",a],["$H",r],["$W",o],["$M",d],["$y",m],["$D",u]].forEach(function(y){P[y[1]]=function(b){return this.$g(b,y[0],y[1])}}),E.extend=function(y,b){return y.$i||(y(b,k,E),y.$i=!0),E},E.locale=A,E.isDayjs=$,E.unix=function(y){return E(1e3*y)},E.en=S[_],E.Ls=S,E.p={},E}()),Jt=Lt(function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,t=/\d\d/,s=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,a={},r=function(f){return(f=+f)+(f>68?1900:2e3)},o=function(f){return function(p){this[f]=+p}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(f){(this.zone||(this.zone={})).offset=function(p){if(!p||p==="Z")return 0;var N=p.match(/([+-]|\d\d)/g),D=60*N[1]+(+N[2]||0);return D===0?0:N[0]==="+"?-D:D}(f)}],d=function(f){var p=a[f];return p&&(p.indexOf?p:p.s.concat(p.f))},h=function(f,p){var N,D=a.meridiem;if(D){for(var O=1;O<=24;O+=1)if(f.indexOf(D(O,0,p))>-1){N=O>12;break}}else N=f===(p?"pm":"PM");return N},m={A:[n,function(f){this.afternoon=h(f,!1)}],a:[n,function(f){this.afternoon=h(f,!0)}],S:[/\d/,function(f){this.milliseconds=100*+f}],SS:[t,function(f){this.milliseconds=10*+f}],SSS:[/\d{3}/,function(f){this.milliseconds=+f}],s:[s,o("seconds")],ss:[s,o("seconds")],m:[s,o("minutes")],mm:[s,o("minutes")],H:[s,o("hours")],h:[s,o("hours")],HH:[s,o("hours")],hh:[s,o("hours")],D:[s,o("day")],DD:[t,o("day")],Do:[n,function(f){var p=a.ordinal,N=f.match(/\d+/);if(this.day=N[0],p)for(var D=1;D<=31;D+=1)p(D).replace(/\[|\]/g,"")===f&&(this.day=D)}],M:[s,o("month")],MM:[t,o("month")],MMM:[n,function(f){var p=d("months"),N=(d("monthsShort")||p.map(function(D){return D.slice(0,3)})).indexOf(f)+1;if(N<1)throw new Error;this.month=N%12||N}],MMMM:[n,function(f){var p=d("months").indexOf(f)+1;if(p<1)throw new Error;this.month=p%12||p}],Y:[/[+-]?\d+/,o("year")],YY:[t,function(f){this.year=r(f)}],YYYY:[/\d{4}/,o("year")],Z:l,ZZ:l};function u(f){var p,N;p=f,N=a&&a.formats;for(var D=(f=p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,E,M){var k=M&&M.toUpperCase();return E||N[M]||i[M]||N[k].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(P,y,b){return y||b.slice(1)})})).match(e),O=D.length,c=0;c<O;c+=1){var _=D[c],S=m[_],C=S&&S[0],$=S&&S[1];D[c]=$?{regex:C,parser:$}:_.replace(/^\[|\]$/g,"")}return function(A){for(var E={},M=0,k=0;M<O;M+=1){var P=D[M];if(typeof P=="string")k+=P.length;else{var y=P.regex,b=P.parser,g=A.slice(k),w=y.exec(g)[0];b.call(E,w),A=A.replace(w,"")}}return function(v){var x=v.afternoon;if(x!==void 0){var V=v.hours;x?V<12&&(v.hours+=12):V===12&&(v.hours=0),delete v.afternoon}}(E),E}}return function(f,p,N){N.p.customParseFormat=!0,f&&f.parseTwoDigitYear&&(r=f.parseTwoDigitYear);var D=p.prototype,O=D.parse;D.parse=function(c){var _=c.date,S=c.utc,C=c.args;this.$u=S;var $=C[1];if(typeof $=="string"){var A=C[2]===!0,E=C[3]===!0,M=A||E,k=C[2];E&&(k=C[2]),a=this.$locale(),!A&&k&&(a=N.Ls[k]),this.$d=function(g,w,v){try{if(["x","X"].indexOf(w)>-1)return new Date((w==="X"?1e3:1)*g);var x=u(w)(g),V=x.year,T=x.month,R=x.day,I=x.hours,j=x.minutes,z=x.seconds,et=x.milliseconds,X=x.zone,G=new Date,W=R||(V||T?1:G.getDate()),q=V||G.getFullYear(),J=0;V&&!T||(J=T>0?T-1:G.getMonth());var K=I||0,st=j||0,mt=z||0,gt=et||0;return X?new Date(Date.UTC(q,J,W,K,st,mt,gt+60*X.offset*1e3)):v?new Date(Date.UTC(q,J,W,K,st,mt,gt)):new Date(q,J,W,K,st,mt,gt)}catch{return new Date("")}}(_,$,S),this.init(),k&&k!==!0&&(this.$L=this.locale(k).$L),M&&_!=this.format($)&&(this.$d=new Date("")),a={}}else if($ instanceof Array)for(var P=$.length,y=1;y<=P;y+=1){C[1]=$[y-1];var b=N.apply(this,C);if(b.isValid()){this.$d=b.$d,this.$L=b.$L,this.init();break}y===P&&(this.$d=new Date(""))}else O.call(this,c)}}}());lt.extend(Jt);const ft=(i,e)=>{let t;if(e)switch(e){case"ISO_8601":t=i;break;case"RFC_2822":t=lt(i.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":t=lt(i,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":t=lt(i).unix();break;default:t=lt(i,e,!0).valueOf()}return t},at=(i,e)=>{if((i==null?void 0:i.constructor)===Object&&Object.prototype.hasOwnProperty.call(i,"data")&&!Object.keys(i).find(s=>!["text","order","data","attributes"].includes(s)))return i;const t={data:i};switch(e.type){case"string":typeof i!="string"&&(t.text=String(t.data),t.order=t.text);break;case"date":e.format&&(t.order=ft(String(t.data),e.format));break;case"number":t.text=String(t.data),t.data=parseInt(t.data,10);break;case"html":{const s=Array.isArray(t.data)?{nodeName:"TD",childNodes:t.data}:nt(`<td>${String(t.data)}</td>`);t.data=s.childNodes||[];const n=ct(s);t.text=n,t.order=n;break}case"boolean":typeof t.data=="string"&&(t.data=t.data.toLowerCase().trim()),t.data=!["false",!1,null,void 0,0].includes(t.data),t.order=t.data?1:0,t.text=String(t.data);break;case"other":t.text="",t.order=0;break;default:t.text=JSON.stringify(t.data)}return t},dt=i=>{if(i instanceof Object&&i.constructor===Object&&i.hasOwnProperty("data")&&(typeof i.text=="string"||typeof i.data=="string"))return i;const e={data:i};if(typeof i=="string"){if(i.length){const t=nt(`<th>${i}</th>`);if(t.childNodes&&(t.childNodes.length!==1||t.childNodes[0].nodeName!=="#text")){e.data=t.childNodes,e.type="html";const s=ct(t);e.text=s}}}else[null,void 0].includes(i)?e.text="":e.text=JSON.stringify(i);return e},kt=(i,e=void 0,t,s,n)=>{var r,o;const a={data:[],headings:[]};if(i.headings)a.headings=i.headings.map(l=>dt(l));else if(e!=null&&e.tHead)a.headings=Array.from(e.tHead.querySelectorAll("th")).map((l,d)=>{var u,f,p,N,D;const h=(O=>{const c=it(O,{valueDiffing:!1});let _;return _=!c.childNodes||c.childNodes.length===1&&c.childNodes[0].nodeName==="#text"?{data:O.innerText,type:"string"}:{data:c.childNodes,type:"html",text:ct(c)},_.attributes=c.attributes,_})(l);t[d]||(t[d]={type:s,format:n,searchable:!0,sortable:!0});const m=t[d];return((u=l.dataset.sortable)==null?void 0:u.trim().toLowerCase())!=="false"&&((f=l.dataset.sort)==null?void 0:f.trim().toLowerCase())!=="false"||(m.sortable=!1),((p=l.dataset.searchable)==null?void 0:p.trim().toLowerCase())==="false"&&(m.searchable=!1),((N=l.dataset.hidden)==null?void 0:N.trim().toLowerCase())!=="true"&&((D=l.getAttribute("hidden"))==null?void 0:D.trim().toLowerCase())!=="true"||(m.hidden=!0),["number","string","html","date","boolean","other"].includes(l.dataset.type)&&(m.type=l.dataset.type,m.type==="date"&&l.dataset.format&&(m.format=l.dataset.format)),h});else if((r=i.data)!=null&&r.length){const l=i.data[0],d=Array.isArray(l)?l:l.cells;a.headings=d.map(h=>dt(""))}else e!=null&&e.tBodies.length&&(a.headings=Array.from(e.tBodies[0].rows[0].cells).map(l=>dt("")));for(let l=0;l<a.headings.length;l++)t[l]||(t[l]={type:s,format:n,sortable:!0,searchable:!0});if(i.data?a.data=i.data.map(l=>{let d,h;return Array.isArray(l)?(d={},h=l):(d=l.attributes,h=l.cells),{attributes:d,cells:h.map((m,u)=>at(m,t[u]))}}):(o=e==null?void 0:e.tBodies)!=null&&o.length&&(a.data=Array.from(e.tBodies[0].rows).map(l=>({attributes:Et(l.attributes),cells:Array.from(l.cells).map((d,h)=>{const m=d.dataset.content?at(d.dataset.content,t[h]):((u,f)=>{let p;switch(f.type){case"string":p={data:u.innerText};break;case"date":{const N=u.innerText;p={data:N,order:ft(N,f.format)};break}case"number":p={data:parseInt(u.innerText,10),text:u.innerText};break;case"boolean":{const N=!["false","0","null","undefined"].includes(u.innerText.toLowerCase().trim());p={data:N,text:N?"1":"0",order:N?1:0};break}default:p={data:it(u,{valueDiffing:!1}).childNodes||[],text:u.innerText,order:u.innerText}}return p.attributes=Et(u.attributes),p})(d,t[h]);return d.dataset.order&&(m.order=isNaN(parseFloat(d.dataset.order))?d.dataset.order:parseFloat(d.dataset.order)),m})}))),a.data.length&&a.data[0].cells.length!==a.headings.length)throw new Error("Data heading length mismatch.");return a};class Wt{constructor(e){this.dt=e,this.cursor=!1}setCursor(e=!1){if(e===this.cursor)return;const t=this.cursor;if(this.cursor=e,this.dt._renderTable(),e!==!1&&this.dt.options.scrollY){const s=F(this.dt.options.classes.cursor),n=this.dt.dom.querySelector(`tr${s}`);n&&n.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,t)}add(e){if(!Array.isArray(e)||e.length<1)return;const t={cells:e.map((s,n)=>{const a=this.dt.columns.settings[n];return at(s,a)})};this.dt.data.data.push(t),this.dt.hasRows=!0,this.dt.update(!0)}remove(e){if(!Array.isArray(e))return this.remove([e]);this.dt.data.data=this.dt.data.data.filter((t,s)=>!e.includes(s)),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(e,t){return this.dt.data.data.findIndex(s=>{const n=s.cells[e];return B(n).toLowerCase().includes(String(t).toLowerCase())})}findRow(e,t){const s=this.findRowIndex(e,t);if(s<0)return{index:-1,row:null,cols:[]};const n=this.dt.data.data[s],a=n.cells.map(r=>r.data);return{index:s,row:n,cols:a}}updateRow(e,t){const s={cells:t.map((n,a)=>{const r=this.dt.columns.settings[a];return at(n,r)})};this.dt.data.data.splice(e,1,s),this.dt.update(!0)}}class Qt{constructor(e){this.dt=e,this.init()}init(){[this.settings,this._state]=((e=[],t,s)=>{let n=[],a=!1;const r=[];return e.forEach(o=>{(Array.isArray(o.select)?o.select:[o.select]).forEach(l=>{n[l]?o.type&&(n[l].type=o.type):n[l]={type:o.type||t,sortable:!0,searchable:!0};const d=n[l];o.render&&(d.render=o.render),o.format?d.format=o.format:o.type==="date"&&(d.format=s),o.cellClass&&(d.cellClass=o.cellClass),o.headerClass&&(d.headerClass=o.headerClass),o.locale&&(d.locale=o.locale),o.sortable===!1?d.sortable=!1:(o.numeric&&(d.numeric=o.numeric),o.caseFirst&&(d.caseFirst=o.caseFirst)),o.searchable===!1?d.searchable=!1:o.sensitivity&&(d.sensitivity=o.sensitivity),(d.searchable||d.sortable)&&o.ignorePunctuation!==void 0&&(d.ignorePunctuation=o.ignorePunctuation),o.hidden&&(d.hidden=!0),o.filter&&(d.filter=o.filter),o.sortSequence&&(d.sortSequence=o.sortSequence),o.sort&&(o.filter?r[l]=o.sort:a={column:l,dir:o.sort}),o.searchItemSeparator!==void 0&&(d.searchItemSeparator=o.searchItemSeparator)})}),n=n.map(o=>o||{type:t,format:t==="date"?s:void 0,sortable:!0,searchable:!0}),[n,{filters:r,sort:a,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(e){return e<0||e>=this.size()?null:{...this.settings[e]}}size(){return this.settings.length}swap(e){if(e.length===2){const t=this.dt.data.headings.map((r,o)=>o),s=e[0],n=e[1],a=t[n];return t[n]=t[s],t[s]=a,this.order(t)}}order(e){this.dt.data.headings=e.map(t=>this.dt.data.headings[t]),this.dt.data.data.forEach(t=>t.cells=e.map(s=>t.cells[s])),this.settings=e.map(t=>this.settings[t]),this.dt.update()}hide(e){e.length&&(e.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string"}),this.settings[t].hidden=!0}),this.dt.update())}show(e){e.length&&(e.forEach(t=>{this.settings[t]||(this.settings[t]={type:"string",sortable:!0}),delete this.settings[t].hidden}),this.dt.update())}visible(e){var t;return e===void 0&&(e=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(e)?e.map(s=>{var n;return!((n=this.settings[s])!=null&&n.hidden)}):!((t=this.settings[e])!=null&&t.hidden)}add(e){const t=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([dt(e.heading)]),this.dt.data.data.forEach((s,n)=>{s.cells=s.cells.concat([at(e.data[n],e)])}),this.settings[t]={type:e.type||"string",sortable:!0,searchable:!0},e.type||e.format||e.sortable||e.render||e.filter){const s=this.settings[t];e.render&&(s.render=e.render),e.format&&(s.format=e.format),e.cellClass&&(s.cellClass=e.cellClass),e.headerClass&&(s.headerClass=e.headerClass),e.locale&&(s.locale=e.locale),e.sortable===!1?s.sortable=!1:(e.numeric&&(s.numeric=e.numeric),e.caseFirst&&(s.caseFirst=e.caseFirst)),e.searchable===!1?s.searchable=!1:e.sensitivity&&(s.sensitivity=e.sensitivity),(s.searchable||s.sortable)&&e.ignorePunctuation&&(s.ignorePunctuation=e.ignorePunctuation),e.hidden&&(s.hidden=!0),e.filter&&(s.filter=e.filter),e.sortSequence&&(s.sortSequence=e.sortSequence)}this.dt.update(!0)}remove(e){if(!Array.isArray(e))return this.remove([e]);this.dt.data.headings=this.dt.data.headings.filter((t,s)=>!e.includes(s)),this.dt.data.data.forEach(t=>t.cells=t.cells.filter((s,n)=>!e.includes(n))),this.dt.update(!0)}filter(e,t=!1){var a,r;if(!((r=(a=this.settings[e])==null?void 0:a.filter)!=null&&r.length))return;const s=this._state.filters[e];let n;if(s){let o=!1;n=this.settings[e].filter.find(l=>!!o||(l===s&&(o=!0),!1))}else{const o=this.settings[e].filter;n=o?o[0]:void 0}n?this._state.filters[e]=n:s&&(this._state.filters[e]=void 0),this.dt._currentPage=1,this.dt.update(),t||this.dt.emit("datatable.filter",e,n)}sort(e,t=void 0,s=!1){var r;const n=this.settings[e];if(s||this.dt.emit("datatable.sorting",e,t),!t){const o=!(!this._state.sort||this._state.sort.column!==e)&&((r=this._state.sort)==null?void 0:r.dir),l=(n==null?void 0:n.sortSequence)||["asc","desc"];if(o){const d=l.indexOf(o);t=d===-1?l[0]||"asc":d===l.length-1?l[0]:l[d+1]}else t=l.length?l[0]:"asc"}const a=!!["string","html"].includes(n.type)&&new Intl.Collator(n.locale||this.dt.options.locale,{usage:"sort",numeric:n.numeric||this.dt.options.numeric,caseFirst:n.caseFirst||this.dt.options.caseFirst,ignorePunctuation:n.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort((o,l)=>{const d=o.cells[e],h=l.cells[e];let m=d.order??B(d),u=h.order??B(h);if(t==="desc"){const f=m;m=u,u=f}return a?a.compare(String(m),String(u)):m<u?-1:m>u?1:0}),this._state.sort={column:e,dir:t},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",e,t)):s||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",e,t))}_measureWidths(){var t,s,n,a;const e=this.dt.data.headings.filter((r,o)=>{var l;return!((l=this.settings[o])!=null&&l.hidden)});if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&(e!=null&&e.length)){this._state.widths=[];const r={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(r.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),r.noColumnWidths=!0,this.dt._renderTable(r);const o=Array.from(((s=(t=this.dt.dom.querySelector("thead, tfoot"))==null?void 0:t.firstElementChild)==null?void 0:s.querySelectorAll("th"))||[]);let l=0;const d=this.dt.data.headings.map((m,u)=>{var p;if((p=this.settings[u])!=null&&p.hidden)return 0;const f=o[l].offsetWidth;return l+=1,f}),h=d.reduce((m,u)=>m+u,0);this._state.widths=d.map(m=>m/h*100)}else{r.renderHeader=!0,this.dt._renderTable(r);const o=Array.from(((a=(n=this.dt.dom.querySelector("thead, tfoot"))==null?void 0:n.firstElementChild)==null?void 0:a.querySelectorAll("th"))||[]);let l=0;const d=this.dt.data.headings.map((m,u)=>{var p;if((p=this.settings[u])!=null&&p.hidden)return 0;const f=o[l].offsetWidth;return l+=1,f}),h=d.reduce((m,u)=>m+u,0);this._state.widths=d.map(m=>m/h*100)}this.dt._renderTable()}}}const ht={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"‹",nextText:"›",firstText:"«",lastText:"»",ellipsisText:"…",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(i,e)=>`<div class='${i.classes.top}'>
    ${i.paging&&i.perPageSelect?`<div class='${i.classes.dropdown}'>
            <label>
                <select class='${i.classes.selector}'></select> ${i.labels.perPage}
            </label>
        </div>`:""}
    ${i.searchable?`<div class='${i.classes.search}'>
            <input class='${i.classes.input}' placeholder='${i.labels.placeholder}' type='search' title='${i.labels.searchTitle}'${e.id?` aria-controls="${e.id}"`:""}>
        </div>`:""}
</div>
<div class='${i.classes.container}'${i.scrollY.length?` style='height: ${i.scrollY}; overflow-Y: auto;'`:""}></div>
<div class='${i.classes.bottom}'>
    ${i.paging?`<div class='${i.classes.info}'></div>`:""}
    <nav class='${i.classes.pagination}'></nav>
</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},rt=(i,e,t,s={})=>({nodeName:"LI",attributes:{class:s.active&&!s.hidden?`${t.classes.paginationListItem} ${t.classes.active}`:s.hidden?`${t.classes.paginationListItem} ${t.classes.hidden} ${t.classes.disabled}`:t.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(i),class:t.classes.paginationListItemLink,"aria-label":t.labels.pageTitle.replace("{page}",String(i))},childNodes:[{nodeName:"#text",data:e}]}]}),Xt=(i,e,t,s,n)=>{let a=[];if(n.firstLast&&a.push(rt(1,n.firstText,n)),n.nextPrev){const o=i?1:t-1;a.push(rt(o,n.prevText,n,{hidden:i}))}let r=[...Array(s).keys()].map(o=>rt(o+1,String(o+1),n,{active:o===t-1}));if(n.truncatePager&&(r=((o,l,d,h)=>{const m=h.pagerDelta,u=h.classes,f=h.ellipsisText,p=2*m;let N=l-m,D=l+m;l<4-m+p?D=3+p:l>d-(3-m+p)&&(N=d-(2+p));const O=[];for(let S=1;S<=d;S++)if(S==1||S==d||S>=N&&S<=D){const C=o[S-1];O.push(C)}let c;const _=[];return O.forEach(S=>{const C=parseInt(S.childNodes[0].attributes["data-page"],10);if(c){const $=parseInt(c.childNodes[0].attributes["data-page"],10);if(C-$==2)_.push(o[$]);else if(C-$!=1){const A={nodeName:"LI",attributes:{class:`${u.paginationListItem} ${u.ellipsis} ${u.disabled}`},childNodes:[{nodeName:"BUTTON",attributes:{class:u.paginationListItemLink},childNodes:[{nodeName:"#text",data:f}]}]};_.push(A)}}_.push(S),c=S}),_})(r,t,s,n)),a=a.concat(r),n.nextPrev){const o=e?s:t+1;a.push(rt(o,n.nextText,n,{hidden:e}))}return n.firstLast&&a.push(rt(s,n.lastText,n)),{nodeName:"UL",attributes:{class:n.classes.paginationList},childNodes:r.length>1?a:[]}};class se{constructor(e,t={}){const s=typeof e=="string"?document.querySelector(e):e;s instanceof HTMLTableElement?this.dom=s:(this.dom=document.createElement("table"),s.appendChild(this.dom));const n={...ht.diffDomOptions,...t.diffDomOptions},a={...ht.labels,...t.labels},r={...ht.classes,...t.classes};this.options={...ht,...t,diffDomOptions:n,labels:a,classes:r},this._initialInnerHTML=this.options.destroyable?this.dom.innerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&this.dom.tabIndex===-1&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new Ut(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){var e,t;if(this.initialized||bt(this.dom,this.options.classes.table))return!1;this._virtualDOM=it(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=((e=this._virtualDOM.childNodes)==null?void 0:e.filter(s=>s.nodeName==="TFOOT"))??[],this._tableCaptions=((t=this._virtualDOM.childNodes)==null?void 0:t.filter(s=>s.nodeName==="CAPTION"))??[],this.options.caption!==void 0&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new Wt(this),this.columns=new Qt(this),this.data=kt(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout(()=>{this.emit("datatable.init"),this.initialized=!0},10)}_render(){this.wrapperDOM=U("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const e=F(this.options.classes.selector),t=this.wrapperDOM.querySelector(`select${e}`);t&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach(r=>{const[o,l]=Array.isArray(r)?[r[0],r[1]]:[String(r),r],d=l===this.options.perPage,h=new Option(o,String(l),d,d);t.appendChild(h)}):t&&t.parentElement.removeChild(t);const s=F(this.options.classes.container);this.containerDOM=this.wrapperDOM.querySelector(s),this._pagerDOMs=[];const n=F(this.options.classes.pagination);Array.from(this.wrapperDOM.querySelectorAll(n)).forEach(r=>{r instanceof HTMLElement&&(r.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(r.firstElementChild))}),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}};const a=F(this.options.classes.info);this._label=this.wrapperDOM.querySelector(a),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(e={}){let t;t=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!e.noPaging?this.pages[this._currentPage-1]:this.data.data.map((a,r)=>({row:a,index:r}));let s=St(this._tableAttributes,this.data.headings,t,this.columns.settings,this.columns._state,this.rows.cursor,this.options,e,this._tableFooters,this._tableCaptions);if(this.options.tableRender){const a=this.options.tableRender(this.data,s,"main");a&&(s=a)}const n=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,n),this._virtualDOM=s}_renderPage(e=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=this._currentPage===1,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let t,s=0,n=0,a=0;if(this.totalPages&&(s=this._currentPage-1,n=s*this.options.perPage,a=n+this.pages[s].length,n+=1,t=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){const r=this.options.labels.info.replace("{start}",String(n)).replace("{end}",String(a)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(t));this._label.innerHTML=t?r:""}if(this._currentPage==1&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find(r=>r.index===this.rows.cursor))){const r=this.pages[this._currentPage-1];r.length&&(e?this.rows.setCursor(r[r.length-1].index):this.rows.setCursor(r[0].index))}}_renderPagers(){if(!this.options.paging)return;let e=Xt(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const s=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],e);s&&(e=s)}const t=this._dd.diff(this._virtualPagerDOM,e);this._pagerDOMs.forEach(s=>{this._dd.apply(s,t)}),this._virtualPagerDOM=e}_renderSeparateHeader(){const e=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),e.parentElement.insertBefore(this.headerDOM,e);let t={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[xt(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(t.attributes.class=Q(t.attributes.class,this.options.classes.table),this.options.tableRender){const r=this.options.tableRender(this.data,t,"header");r&&(t=r)}const s={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[t]},n=this._dd.diff(this._virtualHeaderDOM,s);this._dd.apply(this.headerDOM,n),this._virtualHeaderDOM=s;const a=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(a){const r=structuredClone(this._virtualHeaderDOM);r.attributes.style=`padding-right: ${a}px;`;const o=this._dd.diff(this._virtualHeaderDOM,r);this._dd.apply(this.headerDOM,o),this._virtualHeaderDOM=r}e.scrollHeight>e.clientHeight&&(e.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const e=F(this.options.classes.selector),t=this.wrapperDOM.querySelector(e);t&&t instanceof HTMLSelectElement&&t.addEventListener("change",()=>{this.options.perPage=parseInt(t.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)},!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",e=>{const t=F(this.options.classes.input),s=e.target;if(!(s instanceof HTMLInputElement&&s.matches(t)))return;e.preventDefault();const n=[];if(Array.from(this.wrapperDOM.querySelectorAll(t)).filter(a=>a.value.length).forEach(a=>{const r=a.dataset.and||this.options.searchAnd,o=a.dataset.querySeparator||this.options.searchQuerySeparator?a.value.split(this.options.searchQuerySeparator):[a.value];r?o.forEach(l=>{a.dataset.columns?n.push({terms:[l],columns:JSON.parse(a.dataset.columns)}):n.push({terms:[l],columns:void 0})}):a.dataset.columns?n.push({terms:o,columns:JSON.parse(a.dataset.columns)}):n.push({terms:o,columns:void 0})}),n.length===1&&n[0].terms.length===1){const a=n[0];this.search(a.terms[0],a.columns)}else this.multiSearch(n)}),this.wrapperDOM.addEventListener("click",e=>{const t=e.target.closest("a, button");if(t){if(t.hasAttribute("data-page"))this.page(parseInt(t.getAttribute("data-page"),10)),e.preventDefault();else if(bt(t,this.options.classes.sorter)){const s=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),n=ut(s,this.columns.settings);this.columns.sort(n),e.preventDefault()}else if(bt(t,this.options.classes.filter)){const s=Array.from(t.parentElement.parentElement.children).indexOf(t.parentElement),n=ut(s,this.columns.settings);this.columns.filter(n),e.preventDefault()}}},!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",e=>{if(e.key==="ArrowUp"){let t;e.preventDefault(),e.stopPropagation(),this.pages[this._currentPage-1].find(s=>s.index===this.rows.cursor||(t=s,!1)),t?this.rows.setCursor(t.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if(e.key==="ArrowDown"){let t;e.preventDefault(),e.stopPropagation();const s=this.pages[this._currentPage-1].find(n=>!!t||(n.index===this.rows.cursor&&(t=!0),!1));s?this.rows.setCursor(s.index):this.onLastPage||this.page(this._currentPage+1)}else["Enter"," "].includes(e.key)&&this.emit("datatable.selectrow",this.rows.cursor,e)}),this.dom.addEventListener("mousedown",e=>{const t=e.target;if(t instanceof Element&&this.dom.matches(":focus")){const s=Array.from(this.dom.querySelectorAll("tbody > tr")).find(n=>n.contains(t));s&&s instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(s.dataset.index,10),e)}})):this.dom.addEventListener("mousedown",e=>{const t=e.target;if(!(t instanceof Element))return;const s=Array.from(this.dom.querySelectorAll("tbody > tr")).find(n=>n.contains(t));s&&s instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(s.dataset.index,10),e)}),window.addEventListener("resize",this._listeners.onResize)}_onResize(){this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}destroy(){var e;this.options.destroyable&&(this.dom.innerHTML=this._initialInnerHTML,(e=this.options.classes.table)==null||e.split(" ").forEach(t=>this.wrapperDOM.classList.remove(t)),this.wrapperDOM.parentElement&&this.wrapperDOM.parentElement.replaceChild(this.dom,this.wrapperDOM),this.initialized=!1,window.removeEventListener("resize",this._listeners.onResize))}update(e=!1){var t;e&&(this.columns._measureWidths(),this.hasRows=!!this.data.data.length,this.hasHeadings=!!this.data.headings.length),(t=this.options.classes.empty)==null||t.split(" ").forEach(s=>this.wrapperDOM.classList.remove(s)),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let e=this.data.data.map((t,s)=>({row:t,index:s}));return this._searchQueries.length&&(e=[],this._searchData.forEach(t=>e.push({index:t,row:this.data.data[t]}))),this.columns._state.filters.length&&this.columns._state.filters.forEach((t,s)=>{t&&(e=e.filter(n=>{const a=n.row.cells[s];return typeof t=="function"?t(a.data):B(a)===t}))}),this.options.paging&&this.options.perPage>0?this.pages=e.map((t,s)=>s%this.options.perPage==0?e.slice(s,s+this.options.perPage):null).filter(t=>t):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(e,t=void 0){if(!e.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[e],columns:t||void 0}]),this.emit("datatable.search",e,this._searchData)}multiSearch(e){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];const t=e.map(n=>({columns:n.columns,terms:n.terms.map(a=>a.trim()).filter(a=>a)})).filter(n=>n.terms.length);if(this._searchQueries=t,!t.length)return this.update(),this.emit("datatable.multisearch",t,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const s=t.map(n=>this.columns.settings.map((a,r)=>{if(a.hidden||!a.searchable||n.columns&&!n.columns.includes(r))return!1;let o=n.terms;const l=a.sensitivity||this.options.sensitivity;return["base","accent"].includes(l)&&(o=o.map(d=>d.toLowerCase())),["base","case"].includes(l)&&(o=o.map(d=>d.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),""))),(a.ignorePunctuation??this.options.ignorePunctuation)&&(o=o.map(d=>d.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))),o}));this.data.data.forEach((n,a)=>{const r=n.cells.map((o,l)=>{let d=B(o).trim();const h=this.columns.settings[l];if(d.length){const u=h.sensitivity||this.options.sensitivity;["base","accent"].includes(u)&&(d=d.toLowerCase()),["base","case"].includes(u)&&(d=d.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")),(h.ignorePunctuation??this.options.ignorePunctuation)&&(d=d.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}const m=h.searchItemSeparator||this.options.searchItemSeparator;return m?d.split(m):[d]});s.every(o=>o.find((l,d)=>!!l&&l.find(h=>r[d].find(m=>m.includes(h)))))&&this._searchData.push(a)}),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",t,this._searchData)}page(e,t=!1){return e!==this._currentPage&&(isNaN(e)||(this._currentPage=e),!(e>this.pages.length||e<0)&&(this._renderPage(t),this._renderPagers(),void this.emit("datatable.page",e)))}insert(e){let t=[];if(Array.isArray(e)){const s=this.data.headings.map(n=>n.text??String(n.data));e.forEach((n,a)=>{const r=[];Object.entries(n).forEach(([o,l])=>{const d=s.indexOf(o);d>-1?r[d]=at(l,this.columns.settings[d]):this.hasHeadings||this.hasRows||a!==0||(r[s.length]=at(l,this.columns.settings[s.length]),s.push(o),this.data.headings.push(dt(o)))}),t.push({cells:r})})}else tt(e)&&(!e.headings||this.hasHeadings||this.hasRows?e.data&&Array.isArray(e.data)&&(t=e.data.map(s=>{let n,a;return Array.isArray(s)?(n={},a=s):(n=s.attributes,a=s.cells),{attributes:n,cells:a.map((r,o)=>at(r,this.columns.settings[o]))}})):this.data=kt(e,void 0,this.columns.settings,this.options.type,this.options.format));t.length&&t.forEach(s=>this.data.data.push(s)),this.hasHeadings=!!this.data.headings.length,this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){if(this.options.searchable){const e=F(this.options.classes.input);Array.from(this.wrapperDOM.querySelectorAll(e)).forEach(t=>t.value=""),this._searchQueries=[]}this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const e=U("table");let t=St(this._tableAttributes,this.data.headings,this.data.data.map((a,r)=>({row:a,index:r})),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){const a=this.options.tableRender(this.data,t,"print");a&&(t=a)}const s=this._dd.diff({nodeName:"TABLE"},t);this._dd.apply(e,s);const n=window.open();n.document.body.appendChild(e),n.print()}setMessage(e){var a;const t=this.data.headings.filter((r,o)=>{var l;return!((l=this.columns.settings[o])!=null&&l.hidden)}).length||1;(a=this.options.classes.empty)==null||a.split(" ").forEach(r=>this.wrapperDOM.classList.add(r)),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let s={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[xt(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(t)},childNodes:[{nodeName:"#text",data:e}]}]}]}]};if(this._tableFooters.forEach(r=>s.childNodes.push(r)),this._tableCaptions.forEach(r=>s.childNodes.push(r)),s.attributes.class=Q(s.attributes.class,this.options.classes.table),this.options.tableRender){const r=this.options.tableRender(this.data,s,"message");r&&(s=r)}const n=this._dd.diff(this._virtualDOM,s);this._dd.apply(this.dom,n),this._virtualDOM=s}on(e,t){this._events[e]=this._events[e]||[],this._events[e].push(t)}off(e,t){e in this._events&&this._events[e].splice(this._events[e].indexOf(t),1)}emit(e,...t){if(e in this._events)for(let s=0;s<this._events[e].length;s++)this._events[e][s](...t)}}const ie=function(i){let e;if(!tt(i))return!1;const t={lineDelimiter:`
`,columnDelimiter:",",removeDoubleQuotes:!1,...i};if(t.data.length){e={data:[]};const s=t.data.split(t.lineDelimiter);if(s.length&&(t.headings&&(e.headings=s[0].split(t.columnDelimiter),t.removeDoubleQuotes&&(e.headings=e.headings.map(n=>n.trim().replace(/(^"|"$)/g,""))),s.shift()),s.forEach((n,a)=>{e.data[a]=[];const r=n.split(t.columnDelimiter);r.length&&r.forEach(o=>{t.removeDoubleQuotes&&(o=o.trim().replace(/(^"|"$)/g,"")),e.data[a].push(o)})})),e)return e}return!1},ne=function(i){let e;if(!tt(i))return!1;const t={data:"",...i};if(t.data.length||tt(t.data)){const s=!!Pt(t.data)&&JSON.parse(t.data);if(s?(e={headings:[],data:[]},s.forEach((n,a)=>{e.data[a]=[],Object.entries(n).forEach(([r,o])=>{e.headings.includes(r)||e.headings.push(r),e.data[a].push(o)})})):console.warn("That's not valid JSON!"),e)return e}return!1},ae=function(i,e={}){if(!i.hasHeadings&&!i.hasRows||!tt(e))return!1;const t={download:!0,skipColumn:[],lineDelimiter:`
`,columnDelimiter:",",...e},s=o=>{var l;return!t.skipColumn.includes(o)&&!((l=i.columns.settings[o])!=null&&l.hidden)},n=i.data.headings.filter((o,l)=>s(l)).map(o=>o.text??o.data);let a;if(t.selection)if(Array.isArray(t.selection)){a=[];for(let o=0;o<t.selection.length;o++)a=a.concat(i.pages[t.selection[o]-1].map(l=>l.row))}else a=i.pages[t.selection-1].map(o=>o.row);else a=i.data.data;let r=[];if(r[0]=n,r=r.concat(a.map(o=>o.cells.filter((l,d)=>s(d)).map(l=>B(l)))),r.length){let o="";if(r.forEach(l=>{l.forEach(d=>{typeof d=="string"&&(d=(d=(d=(d=(d=d.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(d=`"${d}"`),o+=d+t.columnDelimiter}),o=o.trim().substring(0,o.length-1),o+=t.lineDelimiter}),o=o.trim().substring(0,o.length-1),t.download){const l=document.createElement("a");l.href=encodeURI(`data:text/csv;charset=utf-8,${o}`),l.download=`${t.filename||"datatable_export"}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}return o}return!1},oe=function(i,e={}){if(!i.hasHeadings&&!i.hasRows||!tt(e))return!1;const t={download:!0,skipColumn:[],replacer:null,space:4,...e},s=o=>{var l;return!t.skipColumn.includes(o)&&!((l=i.columns.settings[o])!=null&&l.hidden)};let n;if(t.selection)if(Array.isArray(t.selection)){n=[];for(let o=0;o<t.selection.length;o++)n=n.concat(i.pages[t.selection[o]-1].map(l=>l.row))}else n=i.pages[t.selection-1].map(o=>o.row);else n=i.data.data;const a=n.map(o=>o.cells.filter((l,d)=>s(d)).map(l=>B(l))),r=i.data.headings.filter((o,l)=>s(l)).map(o=>o.text??String(o.data));if(a.length){const o=[];a.forEach((d,h)=>{o[h]=o[h]||{},d.forEach((m,u)=>{o[h][r[u]]=m})});const l=JSON.stringify(o,t.replacer,t.space);if(t.download){const d=new Blob([l],{type:"data:application/json;charset=utf-8"}),h=URL.createObjectURL(d),m=document.createElement("a");m.href=h,m.download=`${t.filename||"datatable_export"}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(h)}return l}return!1},re=function(i,e={}){if(!i.hasHeadings&&!i.hasRows||!tt(e))return!1;const t={download:!0,skipColumn:[],tableName:"myTable",...e},s=o=>{var l;return!t.skipColumn.includes(o)&&!((l=i.columns.settings[o])!=null&&l.hidden)};let n=[];if(t.selection)if(Array.isArray(t.selection))for(let o=0;o<t.selection.length;o++)n=n.concat(i.pages[t.selection[o]-1].map(l=>l.row));else n=i.pages[t.selection-1].map(o=>o.row);else n=i.data.data;const a=n.map(o=>o.cells.filter((l,d)=>s(d)).map(l=>B(l))),r=i.data.headings.filter((o,l)=>s(l)).map(o=>o.text??String(o.data));if(a.length){let o=`INSERT INTO \`${t.tableName}\` (`;if(r.forEach(l=>{o+=`\`${l}\`,`}),o=o.trim().substring(0,o.length-1),o+=") VALUES ",a.forEach(l=>{o+="(",l.forEach(d=>{o+=typeof d=="string"?`"${d}",`:`${d},`}),o=o.trim().substring(0,o.length-1),o+="),"}),o=o.trim().substring(0,o.length-1),o+=";",t.download&&(o=`data:application/sql;charset=utf-8,${o}`),t.download){const l=document.createElement("a");l.href=encodeURI(o),l.download=`${t.filename||"datatable_export"}.sql`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}return o}return!1},le=function(i,e={}){if(!i.hasHeadings&&!i.hasRows||!tt(e))return!1;const t={download:!0,skipColumn:[],lineDelimiter:`
`,columnDelimiter:",",...e},s=o=>{var l;return!t.skipColumn.includes(o)&&!((l=i.columns.settings[o])!=null&&l.hidden)},n=i.data.headings.filter((o,l)=>s(l)).map(o=>o.text??o.data);let a;if(t.selection)if(Array.isArray(t.selection)){a=[];for(let o=0;o<t.selection.length;o++)a=a.concat(i.pages[t.selection[o]-1].map(l=>l.row))}else a=i.pages[t.selection-1].map(o=>o.row);else a=i.data.data;let r=[];if(r[0]=n,r=r.concat(a.map(o=>o.cells.filter((l,d)=>s(d)).map(l=>B(l)))),r.length){let o="";if(r.forEach(l=>{l.forEach(d=>{typeof d=="string"&&(d=(d=(d=(d=(d=d.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(d=`"${d}"`),o+=d+t.columnDelimiter}),o=o.trim().substring(0,o.length-1),o+=t.lineDelimiter}),o=o.trim().substring(0,o.length-1),t.download&&(o=`data:text/csv;charset=utf-8,${o}`),t.download){const l=document.createElement("a");l.href=encodeURI(o),l.download=`${t.filename||"datatable_export"}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}return o}return!1},Zt={classes:{row:"datatable-editor-row",form:"datatable-editor-form",item:"datatable-editor-item",menu:"datatable-editor-menu",save:"datatable-editor-save",block:"datatable-editor-block",cancel:"datatable-editor-cancel",close:"datatable-editor-close",inner:"datatable-editor-inner",input:"datatable-editor-input",label:"datatable-editor-label",modal:"datatable-editor-modal",action:"datatable-editor-action",header:"datatable-editor-header",wrapper:"datatable-editor-wrapper",editable:"datatable-editor-editable",container:"datatable-editor-container",separator:"datatable-editor-separator"},labels:{closeX:"x",editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?",reallyCancel:"Do you really want to cancel?",save:"Save",cancel:"Cancel"},cancelModal:i=>confirm(i.options.labels.reallyCancel),inline:!0,hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:i=>i.options.labels.editCell,action:(i,e)=>{if(!(i.event.target instanceof Element))return;const t=i.event.target.closest("td");return i.editCell(t)}},{text:i=>i.options.labels.editRow,action:(i,e)=>{if(!(i.event.target instanceof Element))return;const t=i.event.target.closest("tr");return i.editRow(t)}},{separator:!0},{text:i=>i.options.labels.removeRow,action:(i,e)=>{if(i.event.target instanceof Element&&confirm(i.options.labels.reallyRemove)){const t=i.event.target.closest("tr");i.removeRow(t)}}}]};class Gt{constructor(e,t={}){this.dt=e,this.options={...Zt,...t}}init(){var e;this.initialized||((e=this.options.classes.editable)==null||e.split(" ").forEach(t=>this.dt.wrapperDOM.classList.add(t)),this.options.inline&&(this.originalRowRender=this.dt.options.rowRender,this.dt.options.rowRender=(t,s,n)=>{let a=this.rowRender(t,s,n);return this.originalRowRender&&(a=this.originalRowRender(t,a,n)),a}),this.options.contextMenu&&(this.containerDOM=U("div",{id:this.options.classes.container}),this.wrapperDOM=U("div",{class:this.options.classes.wrapper}),this.menuDOM=U("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach(t=>{const s=U("li",{class:t.separator?this.options.classes.separator:this.options.classes.item});if(!t.separator){const n=U("a",{class:this.options.classes.action,href:t.url||"#",html:typeof t.text=="function"?t.text(this):t.text});s.appendChild(n),t.action&&typeof t.action=="function"&&n.addEventListener("click",a=>{a.preventDefault(),t.action(this,a)})}this.menuDOM.appendChild(s)}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this.updateMenu()),this.data={},this.menuOpen=!1,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout(()=>{this.initialized=!0,this.dt.emit("editable.init")},10))}bindEvents(){this.events={keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dt.dom.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.events.context=this.context.bind(this),this.events.updateMenu=this.updateMenu.bind(this),this.events.dismissMenu=this.dismissMenu.bind(this),this.events.reset=function(e,t=300){let s;return(...n)=>{clearTimeout(s),s=window.setTimeout(()=>e(),t)}}(()=>this.events.updateMenu(),50),this.dt.dom.addEventListener("contextmenu",this.events.context),document.addEventListener("click",this.events.dismissMenu),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(e){const t=e.target;if(!(t instanceof Element))return;this.event=e;const s=t.closest("tbody td");if(!this.disabled&&s){e.preventDefault();let n=e.pageX,a=e.pageY;n>this.limits.x&&(n-=this.rect.width),a>this.limits.y&&(a-=this.rect.height),this.wrapperDOM.style.top=`${a}px`,this.wrapperDOM.style.left=`${n}px`,this.openMenu(),this.updateMenu()}}click(e){const t=e.target;if(t instanceof Element){if(this.editing&&this.data&&this.editingCell){const s=F(this.options.classes.input),n=this.modalDOM?this.modalDOM.querySelector(`input${s}[type=text]`):this.dt.wrapperDOM.querySelector(`input${s}[type=text]`);this.saveCell(n.value)}else if(!this.editing){const s=t.closest("tbody td");s&&(this.editCell(s),e.preventDefault())}}}keydown(e){const t=F(this.options.classes.input);if(this.modalDOM){if(e.key==="Escape")this.options.cancelModal(this)&&this.closeModal();else if(e.key==="Enter")if(this.editingCell){const s=this.modalDOM.querySelector(`input${t}[type=text]`);this.saveCell(s.value)}else{const s=Array.from(this.modalDOM.querySelectorAll(`input${t}[type=text]`)).map(n=>n.value.trim());this.saveRow(s,this.data.row)}}else if(this.editing&&this.data)if(e.key==="Enter"){if(this.editingCell){const s=this.dt.wrapperDOM.querySelector(`input${t}[type=text]`);this.saveCell(s.value)}else if(this.editingRow){const s=Array.from(this.dt.wrapperDOM.querySelectorAll(`input${t}[type=text]`)).map(n=>n.value.trim());this.saveRow(s,this.data.row)}}else e.key==="Escape"&&(this.editingCell?this.saveCell(this.data.content):this.editingRow&&this.saveRow(null,this.data.row))}editCell(e){const t=ut(e.cellIndex,this.dt.columns.settings);if(this.options.excludeColumns.includes(t))return void this.closeMenu();const s=parseInt(e.parentElement.dataset.index,10),n=this.dt.data.data[s].cells[t];this.data={cell:n,rowIndex:s,columnIndex:t,content:B(n)},this.editing=!0,this.editingCell=!0,this.options.inline?this.dt.update():this.editCellModal(),this.closeMenu()}editCellModal(){const e=this.data.cell,t=this.data.columnIndex,s=this.dt.data.headings[t].text||String(this.dt.data.headings[t].data),n=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editCell}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${ot(s)}</label>`,`<input class='${this.options.classes.input}' value='${ot(B(e))}' type='text'>`,"</div>",`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),a=U("div",{class:this.options.classes.modal,html:n});this.modalDOM=a,this.openModal();const r=F(this.options.classes.input),o=a.querySelector(`input${r}[type=text]`);o.focus(),o.selectionStart=o.selectionEnd=o.value.length,a.addEventListener("click",l=>{const d=l.target;d instanceof Element&&(d.hasAttribute("data-editor-cancel")?(l.preventDefault(),this.options.cancelModal(this)&&this.closeModal()):d.hasAttribute("data-editor-save")&&(l.preventDefault(),this.saveCell(o.value)))})}saveCell(e){const t=this.data.content,s=this.dt.columns.settings[this.data.columnIndex].type||this.dt.options.type,n=e.trim();let a;if(s==="number")a={data:parseFloat(n)};else if(s==="boolean")a=["","false","0"].includes(n)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if(s==="html")a={data:[{nodeName:"#text",data:e}],text:e,order:e};else if(s==="string")a={data:e};else if(s==="date"){const l=this.dt.columns.settings[this.data.columnIndex].format||this.dt.options.format;a={data:e,order:ft(String(e),l)}}else a={data:e};this.dt.data.data[this.data.rowIndex].cells[this.data.columnIndex]=a,this.closeModal();const r=this.data.rowIndex,o=this.data.columnIndex;this.data={},this.dt.update(!0),this.editing=!1,this.editingCell=!1,this.dt.emit("editable.save.cell",e,t,r,o)}editRow(e){if(!e||e.nodeName!=="TR"||this.editing)return;const t=parseInt(e.dataset.index,10),s=this.dt.data.data[t];this.data={row:s.cells,rowIndex:t},this.editing=!0,this.editingRow=!0,this.options.inline?this.dt.update():this.editRowModal(),this.closeMenu()}editRowModal(){var l;const e=this.data.row,t=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editRow}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),s=U("div",{class:this.options.classes.modal,html:t}),n=s.firstElementChild;if(!n)return;const a=(l=n.lastElementChild)==null?void 0:l.firstElementChild;if(!a)return;e.forEach((d,h)=>{const m=this.dt.columns.settings[h];if((!m.hidden||m.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(h)){const u=this.dt.data.headings[h].text||String(this.dt.data.headings[h].data);a.insertBefore(U("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${ot(u)}</label>`,`<input class='${this.options.classes.input}' value='${ot(B(d))}' type='text'>`,"</div>"].join("")}),a.lastElementChild)}}),this.modalDOM=s,this.openModal();const r=F(this.options.classes.input),o=Array.from(a.querySelectorAll(`input${r}[type=text]`));s.addEventListener("click",d=>{const h=d.target;if(h instanceof Element){if(h.hasAttribute("data-editor-cancel"))this.options.cancelModal(this)&&this.closeModal();else if(h.hasAttribute("data-editor-save")){const m=o.map(u=>u.value.trim());this.saveRow(m,this.data.row)}}})}saveRow(e,t){const s=t.map(r=>B(r)),n=this.dt.data.data[this.data.rowIndex];if(e){let r=0;n.cells=t.map((o,l)=>{if(this.options.excludeColumns.includes(l)||this.dt.columns.settings[l].hidden)return o;const d=this.dt.columns.settings[l].type||this.dt.options.type,h=e[r++];let m;if(d==="number")m={data:parseFloat(h)};else if(d==="boolean")m=["","false","0"].includes(h)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if(d==="html")m={data:[{nodeName:"#text",data:h}],text:h,order:h};else if(d==="string")m={data:h};else if(d==="date"){const u=this.dt.columns.settings[l].format||this.dt.options.format;m={data:h,order:ft(String(h),u)}}else m={data:h};return m})}const a=n.cells.map(r=>B(r));this.data={},this.dt.update(!0),this.closeModal(),this.editing=!1,this.dt.emit("editable.save.row",a,s,t)}openModal(){this.modalDOM&&document.body.appendChild(this.modalDOM)}closeModal(){this.editing&&this.modalDOM&&(document.body.removeChild(this.modalDOM),this.modalDOM=this.editing=this.editingRow=this.editingCell=!1)}removeRow(e){if(!e||e.nodeName!=="TR"||this.editing)return;const t=parseInt(e.dataset.index,10);this.dt.rows.remove(t),this.closeMenu()}updateMenu(){const e=window.scrollX||window.pageXOffset,t=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+e-this.rect.width,y:window.innerHeight+t-this.rect.height}}dismissMenu(e){const t=e.target;if(!(t instanceof Element)||this.wrapperDOM.contains(t))return;let s=!0;if(this.editing){const n=F(this.options.classes.input);s=!t.matches(`input${n}[type=text]`)}s&&this.closeMenu()}openMenu(){if(this.editing&&this.data&&this.editingCell){const e=F(this.options.classes.input),t=this.modalDOM?this.modalDOM.querySelector(`input${e}[type=text]`):this.dt.wrapperDOM.querySelector(`input${e}[type=text]`);this.saveCell(t.value)}document.body.appendChild(this.containerDOM),this.menuOpen=!0,this.dt.emit("editable.context.open")}closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("editable.context.close"))}destroy(){this.dt.dom.removeEventListener(this.options.clickEvent,this.events.click),this.dt.dom.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismissMenu),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.containerDOM)&&document.body.removeChild(this.containerDOM),this.options.inline&&(this.dt.options.rowRender=this.originalRowRender),this.initialized=!1}rowRender(e,t,s){return!this.data||this.data.rowIndex!==s||(this.editingCell?t.childNodes[function(n,a){let r=n,o=0;for(;o<n;)a[o].hidden&&(r-=1),o++;return r}(this.data.columnIndex,this.dt.columns.settings)].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:this.data.content,class:this.options.classes.input}}]:t.childNodes.forEach((n,a)=>{const r=ut(a,this.dt.columns.settings),o=e[r];this.options.excludeColumns.includes(r)||(t.childNodes[a].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:ot(o.text||String(o.data)||""),class:this.options.classes.input}}])})),t}}const de=function(i,e={}){const t=new Gt(i,e);return i.initialized?t.init():i.on("datatable.init",()=>t.init()),t},Kt={classes:{button:"datatable-column-filter-button",menu:"datatable-column-filter-menu",container:"datatable-column-filter-container",wrapper:"datatable-column-filter-wrapper"},labels:{button:"Filter columns within the table"},hiddenColumns:[]};class te{constructor(e,t={}){this.dt=e,this.options={...Kt,...t}}init(){if(this.initialized)return;const e=F(this.options.classes.button);let t=this.dt.wrapperDOM.querySelector(e);if(!t){t=U("button",{class:this.options.classes.button,html:"▦"});const s=F(this.dt.options.classes.search),n=this.dt.wrapperDOM.querySelector(s);n?n.appendChild(t):this.dt.wrapperDOM.appendChild(t),this.addedButtonDOM=!0}this.buttonDOM=t,this.containerDOM=U("div",{id:this.options.classes.container}),this.wrapperDOM=U("div",{class:this.options.classes.wrapper}),this.menuDOM=U("ul",{class:this.options.classes.menu,html:this.dt.data.headings.map((s,n)=>{const a=this.dt.columns.settings[n];return this.options.hiddenColumns.includes(n)?"":`<li data-column="${n}">
                        <input type="checkbox" value="${s.text||s.data}" ${a.hidden?"":"checked=''"}>
                        <label>
                            ${s.text||s.data}
                        </label>
                    </li>`}).join("")}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this._measureSpace(),this._bind(),this.initialized=!0}dismiss(){this.addedButtonDOM&&this.buttonDOM.parentElement&&this.buttonDOM.parentElement.removeChild(this.buttonDOM),document.removeEventListener("click",this.events.click)}_bind(){this.events={click:this._click.bind(this)},document.addEventListener("click",this.events.click)}_openMenu(){document.body.appendChild(this.containerDOM),this._measureSpace(),this.menuOpen=!0,this.dt.emit("columnFilter.menu.open")}_closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("columnFilter.menu.close"))}_measureSpace(){const e=window.scrollX||window.pageXOffset,t=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+e-this.rect.width,y:window.innerHeight+t-this.rect.height}}_click(e){const t=e.target;if(t instanceof Element)if(this.event=e,this.buttonDOM.contains(t)){if(e.preventDefault(),this.menuOpen)return void this._closeMenu();this._openMenu();let s=e.pageX,n=e.pageY;s>this.limits.x&&(s-=this.rect.width),n>this.limits.y&&(n-=this.rect.height),this.wrapperDOM.style.top=`${n}px`,this.wrapperDOM.style.left=`${s}px`}else if(this.menuDOM.contains(t)){const s=F(this.options.classes.menu),n=t.closest(`${s} > li`);if(!n)return;const a=n.querySelector("input[type=checkbox]");a.contains(t)||(a.checked=!a.checked);const r=Number(n.dataset.column);a.checked?this.dt.columns.show([r]):this.dt.columns.hide([r])}else this.menuOpen&&this._closeMenu()}}const ce=function(i,e={}){const t=new te(i,e);return i.initialized?t.init():i.on("datatable.init",()=>t.init()),t};export{se as DataTable,ce as addColumnFilter,ie as convertCSV,ne as convertJSON,U as createElement,ae as exportCSV,oe as exportJSON,re as exportSQL,le as exportTXT,Pt as isJson,tt as isObject,de as makeEditable};
