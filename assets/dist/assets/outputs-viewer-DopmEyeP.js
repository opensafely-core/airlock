var dn=e=>{throw TypeError(e)};var _r=(e,t,r)=>t.has(e)||dn("Cannot "+r);var d=(e,t,r)=>(_r(e,t,"read from private field"),r?r.call(e):t.get(e)),F=(e,t,r)=>t.has(e)?dn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),k=(e,t,r,n)=>(_r(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),B=(e,t,r)=>(_r(e,t,"access private method"),r);var nr=(e,t,r,n)=>({set _(s){k(e,t,s,r)},get _(){return d(e,t,n)}});import{r as p,j as R,P as L,R as X,i as Ks,c as Ws}from"./index-DssVsiTk.js";import{g as Vs}from"./_commonjsHelpers-BosuxZz1.js";var qt={},fn;function Gs(){if(fn)return qt;fn=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.parse=a,qt.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,x){const v=new i,E=y.length;if(E<2)return v;const g=(x==null?void 0:x.decode)||f;let b=0;do{const C=y.indexOf("=",b);if(C===-1)break;const S=y.indexOf(";",b),I=S===-1?E:S;if(C>I){b=y.lastIndexOf(";",C-1)+1;continue}const U=h(y,b,C),z=l(y,C,U),P=y.slice(U,z);if(v[P]===void 0){let o=h(y,C+1,I),c=l(y,I,o);const w=g(y.slice(o,c));v[P]=w}b=I+1}while(b<E);return v}function h(y,x,v){do{const E=y.charCodeAt(x);if(E!==32&&E!==9)return x}while(++x<v);return v}function l(y,x,v){for(;x>v;){const E=y.charCodeAt(--x);if(E!==32&&E!==9)return x+1}return v}function u(y,x,v){const E=(v==null?void 0:v.encode)||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const g=E(x);if(!t.test(g))throw new TypeError(`argument val is invalid: ${x}`);let b=y+"="+g;if(!v)return b;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);b+="; Max-Age="+v.maxAge}if(v.domain){if(!r.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);b+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);b+="; Path="+v.path}if(v.expires){if(!m(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);b+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(b+="; HttpOnly"),v.secure&&(b+="; Secure"),v.partitioned&&(b+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return b}function f(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function m(y){return s.call(y)==="[object Date]"}return qt}Gs();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pn="popstate";function Ys(e={}){function t(n,s){let{pathname:i,search:a,hash:h}=n.location;return Lr("",{pathname:i,search:a,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Kt(s)}return Xs(t,r,null,e)}function de(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ue(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Js(){return Math.random().toString(36).substring(2,10)}function mn(e,t){return{usr:e.state,key:e.key,idx:t}}function Lr(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?er(t):t,state:r,key:t&&t.key||n||Js()}}function Kt({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function er(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Xs(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,h="POP",l=null,u=f();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function f(){return(a.state||{idx:null}).idx}function m(){h="POP";let g=f(),b=g==null?null:g-u;u=g,l&&l({action:h,location:E.location,delta:b})}function y(g,b){h="PUSH";let C=Lr(E.location,g,b);u=f()+1;let S=mn(C,u),I=E.createHref(C);try{a.pushState(S,"",I)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(I)}i&&l&&l({action:h,location:E.location,delta:1})}function x(g,b){h="REPLACE";let C=Lr(E.location,g,b);u=f();let S=mn(C,u),I=E.createHref(C);a.replaceState(S,"",I),i&&l&&l({action:h,location:E.location,delta:0})}function v(g){let b=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof g=="string"?g:Kt(g);return C=C.replace(/ $/,"%20"),de(b,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,b)}let E={get action(){return h},get location(){return e(s,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(pn,m),l=g,()=>{s.removeEventListener(pn,m),l=null}},createHref(g){return t(s,g)},createURL:v,encodeLocation(g){let b=v(g);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:y,replace:x,go(g){return a.go(g)}};return E}function zn(e,t,r="/"){return Zs(e,t,r,!1)}function Zs(e,t,r,n){let s=typeof t=="string"?er(t):t,i=lt(s.pathname||"/",r);if(i==null)return null;let a=Qn(e);ei(a);let h=null;for(let l=0;h==null&&l<a.length;++l){let u=hi(i);h=ui(a[l],u,n)}return h}function Qn(e,t=[],r=[],n=""){let s=(i,a,h)=>{let l={relativePath:h===void 0?i.path||"":h,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(de(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let u=Ke([n,l.relativePath]),f=r.concat(l);i.children&&i.children.length>0&&(de(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Qn(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:oi(u,i.index),routesMeta:f})};return e.forEach((i,a)=>{var h;if(i.path===""||!((h=i.path)!=null&&h.includes("?")))s(i,a);else for(let l of Hn(i.path))s(i,a,l)}),t}function Hn(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Hn(n.join("/")),h=[];return h.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&h.push(...a),h.map(l=>e.startsWith("/")&&l===""?"/":l)}function ei(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:li(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ti=/^:[\w-]+$/,ri=3,ni=2,si=1,ii=10,ai=-2,gn=e=>e==="*";function oi(e,t){let r=e.split("/"),n=r.length;return r.some(gn)&&(n+=ai),t&&(n+=ni),r.filter(s=>!gn(s)).reduce((s,i)=>s+(ti.test(i)?ri:i===""?si:ii),n)}function li(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ui(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",a=[];for(let h=0;h<n.length;++h){let l=n[h],u=h===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",m=pr({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),y=l.route;if(!m&&u&&r&&!n[n.length-1].route.index&&(m=pr({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Ke([i,m.pathname]),pathnameBase:mi(Ke([i,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(i=Ke([i,m.pathnameBase]))}return a}function pr(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ci(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:n.reduce((u,{paramName:f,isOptional:m},y)=>{if(f==="*"){let v=h[y]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=h[y];return m&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function ci(e,t=!1,r=!0){Ue(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,h,l)=>(n.push({paramName:h,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function hi(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ue(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function lt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function di(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?er(e):e;return{pathname:r?r.startsWith("/")?r:fi(r,t):t,search:gi(n),hash:yi(s)}}function fi(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Tr(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pi(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Kn(e){let t=pi(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Wn(e,t,r,n=!1){let s;typeof e=="string"?s=er(e):(s={...e},de(!s.pathname||!s.pathname.includes("?"),Tr("?","pathname","search",s)),de(!s.pathname||!s.pathname.includes("#"),Tr("#","pathname","hash",s)),de(!s.search||!s.search.includes("#"),Tr("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,h;if(a==null)h=r;else{let m=t.length-1;if(!n&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;s.pathname=y.join("/")}h=m>=0?t[m]:"/"}let l=di(s,h),u=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}var Ke=e=>e.join("/").replace(/\/\/+/g,"/"),mi=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gi=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yi=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vi(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Vn=["POST","PUT","PATCH","DELETE"];new Set(Vn);var bi=["GET",...Vn];new Set(bi);var Nt=p.createContext(null);Nt.displayName="DataRouter";var vr=p.createContext(null);vr.displayName="DataRouterState";var Gn=p.createContext({isTransitioning:!1});Gn.displayName="ViewTransition";var wi=p.createContext(new Map);wi.displayName="Fetchers";var xi=p.createContext(null);xi.displayName="Await";var qe=p.createContext(null);qe.displayName="Navigation";var br=p.createContext(null);br.displayName="Location";var Ve=p.createContext({outlet:null,matches:[],isDataRoute:!1});Ve.displayName="Route";var Zr=p.createContext(null);Zr.displayName="RouteError";function Ei(e,{relative:t}={}){de(tr(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(qe),{hash:s,pathname:i,search:a}=rr(e,{relative:t}),h=i;return r!=="/"&&(h=i==="/"?r:Ke([r,i])),n.createHref({pathname:h,search:a,hash:s})}function tr(){return p.useContext(br)!=null}function ut(){return de(tr(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(br).location}var Yn="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Jn(e){p.useContext(qe).static||p.useLayoutEffect(e)}function Xn(){let{isDataRoute:e}=p.useContext(Ve);return e?ji():Ci()}function Ci(){de(tr(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(Nt),{basename:t,navigator:r}=p.useContext(qe),{matches:n}=p.useContext(Ve),{pathname:s}=ut(),i=JSON.stringify(Kn(n)),a=p.useRef(!1);return Jn(()=>{a.current=!0}),p.useCallback((l,u={})=>{if(Ue(a.current,Yn),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=Wn(l,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ke([t,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[t,r,i,s,e])}p.createContext(null);function rr(e,{relative:t}={}){let{matches:r}=p.useContext(Ve),{pathname:n}=ut(),s=JSON.stringify(Kn(r));return p.useMemo(()=>Wn(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function Ri(e,t,r,n){de(tr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:i}=p.useContext(qe),{matches:a}=p.useContext(Ve),h=a[a.length-1],l=h?h.params:{},u=h?h.pathname:"/",f=h?h.pathnameBase:"/",m=h&&h.route;{let C=m&&m.path||"";Zn(u,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=ut(),x;x=y;let v=x.pathname||"/",E=v;if(f!=="/"){let C=f.replace(/^\//,"").split("/");E="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let g=!i&&r&&r.matches&&r.matches.length>0?r.matches:zn(e,{pathname:E});return Ue(m||g!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ue(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Pi(g&&g.map(C=>Object.assign({},C,{params:Object.assign({},l,C.params),pathname:Ke([f,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ke([f,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),a,r,n)}function Si(){let e=Di(),t=vi(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=p.createElement(p.Fragment,null,p.createElement("p",null,"💿 Hey developer 👋"),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,a)}var _i=p.createElement(Si,null),Ti=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?p.createElement(Ve.Provider,{value:this.props.routeContext},p.createElement(Zr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ki({routeContext:e,match:t,children:r}){let n=p.useContext(Nt);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(Ve.Provider,{value:e},r)}function Pi(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let l=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);de(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,h=-1;if(r)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(h=l),u.route.id){let{loaderData:f,errors:m}=r,y=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||y){a=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((l,u,f)=>{let m,y=!1,x=null,v=null;r&&(m=i&&u.route.id?i[u.route.id]:void 0,x=u.route.errorElement||_i,a&&(h<0&&f===0?(Zn("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):h===f&&(y=!0,v=u.route.hydrateFallbackElement||null)));let E=t.concat(s.slice(0,f+1)),g=()=>{let b;return m?b=x:y?b=v:u.route.Component?b=p.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,p.createElement(ki,{match:u,routeContext:{outlet:l,matches:E,isDataRoute:r!=null},children:b})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?p.createElement(Ti,{location:r.location,revalidation:r.revalidation,component:x,error:m,children:g(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):g()},null)}function en(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Oi(e){let t=p.useContext(Nt);return de(t,en(e)),t}function Ii(e){let t=p.useContext(vr);return de(t,en(e)),t}function Li(e){let t=p.useContext(Ve);return de(t,en(e)),t}function tn(e){let t=Li(e),r=t.matches[t.matches.length-1];return de(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Fi(){return tn("useRouteId")}function Di(){var n;let e=p.useContext(Zr),t=Ii("useRouteError"),r=tn("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ji(){let{router:e}=Oi("useNavigate"),t=tn("useNavigate"),r=p.useRef(!1);return Jn(()=>{r.current=!0}),p.useCallback(async(s,i={})=>{Ue(r.current,Yn),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var yn={};function Zn(e,t,r){!t&&!yn[e]&&(yn[e]=!0,Ue(!1,r))}p.memo(Mi);function Mi({routes:e,future:t,state:r}){return Ri(e,void 0,r,t)}function Ni({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){de(!tr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),h=p.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=er(r));let{pathname:l="/",search:u="",hash:f="",state:m=null,key:y="default"}=r,x=p.useMemo(()=>{let v=lt(l,a);return v==null?null:{location:{pathname:v,search:u,hash:f,state:m,key:y},navigationType:n}},[a,l,u,f,m,y,n]);return Ue(x!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:p.createElement(qe.Provider,{value:h},p.createElement(br.Provider,{children:t,value:x}))}var lr="get",ur="application/x-www-form-urlencoded";function wr(e){return e!=null&&typeof e.tagName=="string"}function Ai(e){return wr(e)&&e.tagName.toLowerCase()==="button"}function $i(e){return wr(e)&&e.tagName.toLowerCase()==="form"}function Ui(e){return wr(e)&&e.tagName.toLowerCase()==="input"}function qi(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Bi(e,t){return e.button===0&&(!t||t==="_self")&&!qi(e)}var sr=null;function zi(){if(sr===null)try{new FormData(document.createElement("form"),0),sr=!1}catch{sr=!0}return sr}var Qi=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kr(e){return e!=null&&!Qi.has(e)?(Ue(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ur}"`),null):e}function Hi(e,t){let r,n,s,i,a;if($i(e)){let h=e.getAttribute("action");n=h?lt(h,t):null,r=e.getAttribute("method")||lr,s=kr(e.getAttribute("enctype"))||ur,i=new FormData(e)}else if(Ai(e)||Ui(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||h.getAttribute("action");if(n=l?lt(l,t):null,r=e.getAttribute("formmethod")||h.getAttribute("method")||lr,s=kr(e.getAttribute("formenctype"))||kr(h.getAttribute("enctype"))||ur,i=new FormData(h,e),!zi()){let{name:u,type:f,value:m}=e;if(f==="image"){let y=u?`${u}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else u&&i.append(u,m)}}else{if(wr(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=lr,n=null,s=ur,a=e}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}function rn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Ki(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wi(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Vi(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let a=await Ki(i,r);return a.links?a.links():[]}return[]}));return Xi(n.flat(1).filter(Wi).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vn(e,t,r,n,s,i){let a=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,h=(l,u)=>{var f;return r[u].pathname!==l.pathname||((f=r[u].route.path)==null?void 0:f.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return i==="assets"?t.filter((l,u)=>a(l,u)||h(l,u)):i==="data"?t.filter((l,u)=>{var m;let f=n.routes[l.route.id];if(!f||!f.hasLoader)return!1;if(a(l,u)||h(l,u))return!0;if(l.route.shouldRevalidate){let y=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function Gi(e,t){return Yi(e.map(r=>{let n=t.routes[r.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function Yi(e){return[...new Set(e)]}function Ji(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Xi(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(Ji(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function Zi(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function ea(){let e=p.useContext(Nt);return rn(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ta(){let e=p.useContext(vr);return rn(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nn=p.createContext(void 0);nn.displayName="FrameworkContext";function es(){let e=p.useContext(nn);return rn(e,"You must render this element inside a <HydratedRouter> element"),e}function ra(e,t){let r=p.useContext(nn),[n,s]=p.useState(!1),[i,a]=p.useState(!1),{onFocus:h,onBlur:l,onMouseEnter:u,onMouseLeave:f,onTouchStart:m}=t,y=p.useRef(null);p.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let E=b=>{b.forEach(C=>{a(C.isIntersecting)})},g=new IntersectionObserver(E,{threshold:.5});return y.current&&g.observe(y.current),()=>{g.disconnect()}}},[e]),p.useEffect(()=>{if(n){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[n]);let x=()=>{s(!0)},v=()=>{s(!1),a(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Bt(h,x),onBlur:Bt(l,v),onMouseEnter:Bt(u,x),onMouseLeave:Bt(f,v),onTouchStart:Bt(m,x)}]:[!1,y,{}]}function Bt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function na({page:e,...t}){let{router:r}=ea(),n=p.useMemo(()=>zn(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(ia,{page:e,matches:n,...t}):null}function sa(e){let{manifest:t,routeModules:r}=es(),[n,s]=p.useState([]);return p.useEffect(()=>{let i=!1;return Vi(e,t,r).then(a=>{i||s(a)}),()=>{i=!0}},[e,t,r]),n}function ia({page:e,matches:t,...r}){let n=ut(),{manifest:s,routeModules:i}=es(),{loaderData:a,matches:h}=ta(),l=p.useMemo(()=>vn(e,t,h,s,n,"data"),[e,t,h,s,n]),u=p.useMemo(()=>vn(e,t,h,s,n,"assets"),[e,t,h,s,n]),f=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,v=!1;if(t.forEach(g=>{var C;let b=s.routes[g.route.id];!b||!b.hasLoader||(!l.some(S=>S.route.id===g.route.id)&&g.route.id in a&&((C=i[g.route.id])!=null&&C.shouldRevalidate)||b.hasClientLoader?v=!0:x.add(g.route.id))}),x.size===0)return[];let E=Zi(e);return v&&x.size>0&&E.searchParams.set("_routes",t.filter(g=>x.has(g.route.id)).map(g=>g.route.id).join(",")),[E.pathname+E.search]},[a,n,s,l,t,e,i]),m=p.useMemo(()=>Gi(u,s),[u,s]),y=sa(u);return p.createElement(p.Fragment,null,f.map(x=>p.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),m.map(x=>p.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),y.map(({key:x,link:v})=>p.createElement("link",{key:x,...v})))}function aa(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var ts=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ts&&(window.__reactRouterVersion="7.1.5")}catch{}function oa({basename:e,children:t,window:r}){let n=p.useRef();n.current==null&&(n.current=Ys({window:r,v5Compat:!0}));let s=n.current,[i,a]=p.useState({action:s.action,location:s.location}),h=p.useCallback(l=>{p.startTransition(()=>a(l))},[a]);return p.useLayoutEffect(()=>s.listen(h),[s,h]),p.createElement(Ni,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var rs=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ns=p.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:h,target:l,to:u,preventScrollReset:f,viewTransition:m,...y},x){let{basename:v}=p.useContext(qe),E=typeof u=="string"&&rs.test(u),g,b=!1;if(typeof u=="string"&&E&&(g=u,ts))try{let c=new URL(window.location.href),w=u.startsWith("//")?new URL(c.protocol+u):new URL(u),_=lt(w.pathname,v);w.origin===c.origin&&_!=null?u=_+w.search+w.hash:b=!0}catch{Ue(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Ei(u,{relative:s}),[S,I,U]=ra(n,y),z=ha(u,{replace:a,state:h,target:l,preventScrollReset:f,relative:s,viewTransition:m});function P(c){t&&t(c),c.defaultPrevented||z(c)}let o=p.createElement("a",{...y,...U,href:g||C,onClick:b||i?t:P,ref:aa(x,I),target:l,"data-discover":!E&&r==="render"?"true":void 0});return S&&!E?p.createElement(p.Fragment,null,o,p.createElement(na,{page:C})):o});ns.displayName="Link";var la=p.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:h,children:l,...u},f){let m=rr(a,{relative:u.relative}),y=ut(),x=p.useContext(vr),{navigator:v,basename:E}=p.useContext(qe),g=x!=null&&ga(m)&&h===!0,b=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,C=y.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),S=S?S.toLowerCase():null,b=b.toLowerCase()),S&&E&&(S=lt(S,E)||S);const I=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let U=C===b||!s&&C.startsWith(b)&&C.charAt(I)==="/",z=S!=null&&(S===b||!s&&S.startsWith(b)&&S.charAt(b.length)==="/"),P={isActive:U,isPending:z,isTransitioning:g},o=U?t:void 0,c;typeof n=="function"?c=n(P):c=[n,U?"active":null,z?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let w=typeof i=="function"?i(P):i;return p.createElement(ns,{...u,"aria-current":o,className:c,ref:f,style:w,to:a,viewTransition:h},typeof l=="function"?l(P):l)});la.displayName="NavLink";var ua=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:a=lr,action:h,onSubmit:l,relative:u,preventScrollReset:f,viewTransition:m,...y},x)=>{let v=pa(),E=ma(h,{relative:u}),g=a.toLowerCase()==="get"?"get":"post",b=typeof h=="string"&&rs.test(h),C=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let I=S.nativeEvent.submitter,U=(I==null?void 0:I.getAttribute("formmethod"))||a;v(I||S.currentTarget,{fetcherKey:t,method:U,navigate:r,replace:s,state:i,relative:u,preventScrollReset:f,viewTransition:m})};return p.createElement("form",{ref:x,method:g,action:E,onSubmit:n?l:C,...y,"data-discover":!b&&e==="render"?"true":void 0})});ua.displayName="Form";function ca(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ss(e){let t=p.useContext(Nt);return de(t,ca(e)),t}function ha(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let h=Xn(),l=ut(),u=rr(e,{relative:i});return p.useCallback(f=>{if(Bi(f,t)){f.preventDefault();let m=r!==void 0?r:Kt(l)===Kt(u);h(e,{replace:m,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[l,h,u,r,n,t,e,s,i,a])}var da=0,fa=()=>`__${String(++da)}__`;function pa(){let{router:e}=ss("useSubmit"),{basename:t}=p.useContext(qe),r=Fi();return p.useCallback(async(n,s={})=>{let{action:i,method:a,encType:h,formData:l,body:u}=Hi(n,t);if(s.navigate===!1){let f=s.fetcherKey||fa();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||h,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function ma(e,{relative:t}={}){let{basename:r}=p.useContext(qe),n=p.useContext(Ve);de(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...rr(e||".",{relative:t})},a=ut();if(e==null){i.search=a.search;let h=new URLSearchParams(i.search),l=h.getAll("index");if(l.some(f=>f==="")){h.delete("index"),l.filter(m=>m).forEach(m=>h.append("index",m));let f=h.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Ke([r,i.pathname])),Kt(i)}function ga(e,t={}){let r=p.useContext(Gn);de(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=ss("useViewTransitionState"),s=rr(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=lt(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=lt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return pr(s.pathname,a)!=null||pr(s.pathname,i)!=null}new TextEncoder;var At=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bt=typeof window>"u"||"Deno"in globalThis;function Te(){}function ya(e,t){return typeof e=="function"?e(t):e}function Fr(e){return typeof e=="number"&&e>=0&&e!==1/0}function is(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ct(e,t){return typeof e=="function"?e(t):e}function Ie(e,t){return typeof e=="function"?e(t):e}function bn(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:h}=e;if(a){if(n){if(t.queryHash!==sn(a,t.options))return!1}else if(!Wt(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof h=="boolean"&&t.isStale()!==h||s&&s!==t.state.fetchStatus||i&&!i(t))}function wn(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(wt(t.options.mutationKey)!==wt(i))return!1}else if(!Wt(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function sn(e,t){return((t==null?void 0:t.queryKeyHashFn)||wt)(e)}function wt(e){return JSON.stringify(e,(t,r)=>Dr(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Wt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Wt(e[r],t[r])):!1}function as(e,t){if(e===t)return e;const r=xn(e)&&xn(t);if(r||Dr(e)&&Dr(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),a=i.length,h=r?[]:{};let l=0;for(let u=0;u<a;u++){const f=r?u:i[u];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(h[f]=void 0,l++):(h[f]=as(e[f],t[f]),h[f]===e[f]&&e[f]!==void 0&&l++)}return s===a&&l===s?e:h}return t}function mr(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function xn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Dr(e){if(!En(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!En(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function En(e){return Object.prototype.toString.call(e)==="[object Object]"}function va(e){return new Promise(t=>{setTimeout(t,e)})}function jr(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?as(e,t):t}function ba(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function wa(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var an=Symbol();function os(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===an?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ct,Xe,Rt,Fn,xa=(Fn=class extends At{constructor(){super();F(this,ct);F(this,Xe);F(this,Rt);k(this,Rt,t=>{if(!bt&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){d(this,Xe)||this.setEventListener(d(this,Rt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Xe))==null||t.call(this),k(this,Xe,void 0))}setEventListener(t){var r;k(this,Rt,t),(r=d(this,Xe))==null||r.call(this),k(this,Xe,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){d(this,ct)!==t&&(k(this,ct,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof d(this,ct)=="boolean"?d(this,ct):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ct=new WeakMap,Xe=new WeakMap,Rt=new WeakMap,Fn),on=new xa,St,Ze,_t,Dn,Ea=(Dn=class extends At{constructor(){super();F(this,St,!0);F(this,Ze);F(this,_t);k(this,_t,t=>{if(!bt&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){d(this,Ze)||this.setEventListener(d(this,_t))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ze))==null||t.call(this),k(this,Ze,void 0))}setEventListener(t){var r;k(this,_t,t),(r=d(this,Ze))==null||r.call(this),k(this,Ze,t(this.setOnline.bind(this)))}setOnline(t){d(this,St)!==t&&(k(this,St,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return d(this,St)}},St=new WeakMap,Ze=new WeakMap,_t=new WeakMap,Dn),gr=new Ea;function Mr(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function Ca(e){return Math.min(1e3*2**e,3e4)}function ls(e){return(e??"online")==="online"?gr.isOnline():!0}var us=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Pr(e){return e instanceof us}function cs(e){let t=!1,r=0,n=!1,s;const i=Mr(),a=E=>{var g;n||(y(new us(E)),(g=e.abort)==null||g.call(e))},h=()=>{t=!0},l=()=>{t=!1},u=()=>on.isFocused()&&(e.networkMode==="always"||gr.isOnline())&&e.canRun(),f=()=>ls(e.networkMode)&&e.canRun(),m=E=>{var g;n||(n=!0,(g=e.onSuccess)==null||g.call(e,E),s==null||s(),i.resolve(E))},y=E=>{var g;n||(n=!0,(g=e.onError)==null||g.call(e,E),s==null||s(),i.reject(E))},x=()=>new Promise(E=>{var g;s=b=>{(n||u())&&E(b)},(g=e.onPause)==null||g.call(e)}).then(()=>{var E;s=void 0,n||(E=e.onContinue)==null||E.call(e)}),v=()=>{if(n)return;let E;const g=r===0?e.initialPromise:void 0;try{E=g??e.fn()}catch(b){E=Promise.reject(b)}Promise.resolve(E).then(m).catch(b=>{var z;if(n)return;const C=e.retry??(bt?0:3),S=e.retryDelay??Ca,I=typeof S=="function"?S(r,b):S,U=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,b);if(t||!U){y(b);return}r++,(z=e.onFail)==null||z.call(e,r,b),va(I).then(()=>u()?void 0:x()).then(()=>{t?y(b):v()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:h,continueRetry:l,canStart:f,start:()=>(f()?v():x().then(v),i)}}function Ra(){let e=[],t=0,r=h=>{h()},n=h=>{h()},s=h=>setTimeout(h,0);const i=h=>{t?e.push(h):s(()=>{r(h)})},a=()=>{const h=e;e=[],h.length&&s(()=>{n(()=>{h.forEach(l=>{r(l)})})})};return{batch:h=>{let l;t++;try{l=h()}finally{t--,t||a()}return l},batchCalls:h=>(...l)=>{i(()=>{h(...l)})},schedule:i,setNotifyFunction:h=>{r=h},setBatchNotifyFunction:h=>{n=h},setScheduler:h=>{s=h}}}var he=Ra(),ht,jn,hs=(jn=class{constructor(){F(this,ht)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fr(this.gcTime)&&k(this,ht,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(bt?1/0:5*60*1e3))}clearGcTimeout(){d(this,ht)&&(clearTimeout(d(this,ht)),k(this,ht,void 0))}},ht=new WeakMap,jn),Tt,kt,_e,dt,ye,Yt,ft,Pe,ze,Mn,Sa=(Mn=class extends hs{constructor(t){super();F(this,Pe);F(this,Tt);F(this,kt);F(this,_e);F(this,dt);F(this,ye);F(this,Yt);F(this,ft);k(this,ft,!1),k(this,Yt,t.defaultOptions),this.setOptions(t.options),this.observers=[],k(this,dt,t.client),k(this,_e,d(this,dt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,k(this,Tt,_a(this.options)),this.state=t.state??d(this,Tt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,ye))==null?void 0:t.promise}setOptions(t){this.options={...d(this,Yt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,_e).remove(this)}setData(t,r){const n=jr(this.state.data,t,this.options);return B(this,Pe,ze).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){B(this,Pe,ze).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=d(this,ye))==null?void 0:n.promise;return(s=d(this,ye))==null||s.cancel(t),r?r.then(Te).catch(Te):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,Tt))}isActive(){return this.observers.some(t=>Ie(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===an||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!is(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,ye))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,ye))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,_e).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(d(this,ye)&&(d(this,ft)?d(this,ye).cancel({revert:!0}):d(this,ye).cancelRetry()),this.scheduleGc()),d(this,_e).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||B(this,Pe,ze).call(this,{type:"invalidate"})}fetch(t,r){var l,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(d(this,ye))return d(this,ye).continueRetry(),d(this,ye).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(k(this,ft,!0),n.signal)})},i=()=>{const m=os(this.options,r),y={client:d(this,dt),queryKey:this.queryKey,meta:this.meta};return s(y),k(this,ft,!1),this.options.persister?this.options.persister(m,y,this):m(y)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:d(this,dt),state:this.state,fetchFn:i};s(a),(l=this.options.behavior)==null||l.onFetch(a,this),k(this,kt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&B(this,Pe,ze).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const h=m=>{var y,x,v,E;Pr(m)&&m.silent||B(this,Pe,ze).call(this,{type:"error",error:m}),Pr(m)||((x=(y=d(this,_e).config).onError)==null||x.call(y,m,this),(E=(v=d(this,_e).config).onSettled)==null||E.call(v,this.state.data,m,this)),this.scheduleGc()};return k(this,ye,cs({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var y,x,v,E;if(m===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){h(g);return}(x=(y=d(this,_e).config).onSuccess)==null||x.call(y,m,this),(E=(v=d(this,_e).config).onSettled)==null||E.call(v,m,this.state.error,this),this.scheduleGc()},onError:h,onFail:(m,y)=>{B(this,Pe,ze).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{B(this,Pe,ze).call(this,{type:"pause"})},onContinue:()=>{B(this,Pe,ze).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,ye).start()}},Tt=new WeakMap,kt=new WeakMap,_e=new WeakMap,dt=new WeakMap,ye=new WeakMap,Yt=new WeakMap,ft=new WeakMap,Pe=new WeakSet,ze=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ds(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Pr(s)&&s.revert&&d(this,kt)?{...d(this,kt),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),he.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),d(this,_e).notify({query:this,type:"updated",action:t})})},Mn);function ds(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ls(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function _a(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var je,Nn,fs=(Nn=class extends At{constructor(t={}){super();F(this,je);this.config=t,k(this,je,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??sn(s,r);let a=this.get(i);return a||(a=new Sa({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){d(this,je).has(t.queryHash)||(d(this,je).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=d(this,je).get(t.queryHash);r&&(t.destroy(),r===t&&d(this,je).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){he.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return d(this,je).get(t)}getAll(){return[...d(this,je).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>bn(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>bn(t,n)):r}notify(t){he.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){he.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){he.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},je=new WeakMap,Nn),Me,ve,pt,Ne,Je,An,Ta=(An=class extends hs{constructor(t){super();F(this,Ne);F(this,Me);F(this,ve);F(this,pt);this.mutationId=t.mutationId,k(this,ve,t.mutationCache),k(this,Me,[]),this.state=t.state||ps(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){d(this,Me).includes(t)||(d(this,Me).push(t),this.clearGcTimeout(),d(this,ve).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){k(this,Me,d(this,Me).filter(r=>r!==t)),this.scheduleGc(),d(this,ve).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){d(this,Me).length||(this.state.status==="pending"?this.scheduleGc():d(this,ve).remove(this))}continue(){var t;return((t=d(this,pt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,i,a,h,l,u,f,m,y,x,v,E,g,b,C,S,I,U,z,P;k(this,pt,cs({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(o,c)=>{B(this,Ne,Je).call(this,{type:"failed",failureCount:o,error:c})},onPause:()=>{B(this,Ne,Je).call(this,{type:"pause"})},onContinue:()=>{B(this,Ne,Je).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,ve).canRun(this)}));const r=this.state.status==="pending",n=!d(this,pt).canStart();try{if(!r){B(this,Ne,Je).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(s=d(this,ve).config).onMutate)==null?void 0:i.call(s,t,this));const c=await((h=(a=this.options).onMutate)==null?void 0:h.call(a,t));c!==this.state.context&&B(this,Ne,Je).call(this,{type:"pending",context:c,variables:t,isPaused:n})}const o=await d(this,pt).start();return await((u=(l=d(this,ve).config).onSuccess)==null?void 0:u.call(l,o,t,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,o,t,this.state.context)),await((x=(y=d(this,ve).config).onSettled)==null?void 0:x.call(y,o,null,this.state.variables,this.state.context,this)),await((E=(v=this.options).onSettled)==null?void 0:E.call(v,o,null,t,this.state.context)),B(this,Ne,Je).call(this,{type:"success",data:o}),o}catch(o){try{throw await((b=(g=d(this,ve).config).onError)==null?void 0:b.call(g,o,t,this.state.context,this)),await((S=(C=this.options).onError)==null?void 0:S.call(C,o,t,this.state.context)),await((U=(I=d(this,ve).config).onSettled)==null?void 0:U.call(I,void 0,o,this.state.variables,this.state.context,this)),await((P=(z=this.options).onSettled)==null?void 0:P.call(z,void 0,o,t,this.state.context)),o}finally{B(this,Ne,Je).call(this,{type:"error",error:o})}}finally{d(this,ve).runNext(this)}}},Me=new WeakMap,ve=new WeakMap,pt=new WeakMap,Ne=new WeakSet,Je=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),he.batch(()=>{d(this,Me).forEach(n=>{n.onMutationUpdate(t)}),d(this,ve).notify({mutation:this,type:"updated",action:t})})},An);function ps(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qe,Oe,Jt,$n,ka=($n=class extends At{constructor(t={}){super();F(this,Qe);F(this,Oe);F(this,Jt);this.config=t,k(this,Qe,new Set),k(this,Oe,new Map),k(this,Jt,0)}build(t,r,n){const s=new Ta({mutationCache:this,mutationId:++nr(this,Jt)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){d(this,Qe).add(t);const r=ir(t);if(typeof r=="string"){const n=d(this,Oe).get(r);n?n.push(t):d(this,Oe).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(d(this,Qe).delete(t)){const r=ir(t);if(typeof r=="string"){const n=d(this,Oe).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&d(this,Oe).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=ir(t);if(typeof r=="string"){const n=d(this,Oe).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=ir(t);if(typeof r=="string"){const s=(n=d(this,Oe).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){he.batch(()=>{d(this,Qe).forEach(t=>{this.notify({type:"removed",mutation:t})}),d(this,Qe).clear(),d(this,Oe).clear()})}getAll(){return Array.from(d(this,Qe))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wn(r,n))}findAll(t={}){return this.getAll().filter(r=>wn(t,r))}notify(t){he.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return he.batch(()=>Promise.all(t.map(r=>r.continue().catch(Te))))}},Qe=new WeakMap,Oe=new WeakMap,Jt=new WeakMap,$n);function ir(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Cn(e){return{onFetch:(t,r)=>{var f,m,y,x,v;const n=t.options,s=(y=(m=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:m.fetchMore)==null?void 0:y.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[];let h={pages:[],pageParams:[]},l=0;const u=async()=>{let E=!1;const g=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?E=!0:t.signal.addEventListener("abort",()=>{E=!0}),t.signal)})},b=os(t.options,t.fetchOptions),C=async(S,I,U)=>{if(E)return Promise.reject();if(I==null&&S.pages.length)return Promise.resolve(S);const z={client:t.client,queryKey:t.queryKey,pageParam:I,direction:U?"backward":"forward",meta:t.options.meta};g(z);const P=await b(z),{maxPages:o}=t.options,c=U?wa:ba;return{pages:c(S.pages,P,o),pageParams:c(S.pageParams,I,o)}};if(s&&i.length){const S=s==="backward",I=S?Pa:Rn,U={pages:i,pageParams:a},z=I(n,U);h=await C(U,z,S)}else{const S=e??i.length;do{const I=l===0?a[0]??n.initialPageParam:Rn(n,h);if(l>0&&I==null)break;h=await C(h,I),l++}while(l<S)}return h};t.options.persister?t.fetchFn=()=>{var E,g;return(g=(E=t.options).persister)==null?void 0:g.call(E,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function Rn(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Pa(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var le,et,tt,Pt,Ot,rt,It,Lt,Un,Oa=(Un=class{constructor(e={}){F(this,le);F(this,et);F(this,tt);F(this,Pt);F(this,Ot);F(this,rt);F(this,It);F(this,Lt);k(this,le,e.queryCache||new fs),k(this,et,e.mutationCache||new ka),k(this,tt,e.defaultOptions||{}),k(this,Pt,new Map),k(this,Ot,new Map),k(this,rt,0)}mount(){nr(this,rt)._++,d(this,rt)===1&&(k(this,It,on.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,le).onFocus())})),k(this,Lt,gr.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,le).onOnline())})))}unmount(){var e,t;nr(this,rt)._--,d(this,rt)===0&&((e=d(this,It))==null||e.call(this),k(this,It,void 0),(t=d(this,Lt))==null||t.call(this),k(this,Lt,void 0))}isFetching(e){return d(this,le).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return d(this,et).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,le).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=d(this,le).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ct(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return d(this,le).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=d(this,le).get(n.queryHash),i=s==null?void 0:s.state.data,a=ya(t,i);if(a!==void 0)return d(this,le).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return he.batch(()=>d(this,le).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,le).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=d(this,le);he.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=d(this,le),n={type:"active",...e};return he.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=he.batch(()=>d(this,le).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Te).catch(Te)}invalidateQueries(e,t={}){return he.batch(()=>{if(d(this,le).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const r={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(r,t)})}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=he.batch(()=>d(this,le).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Te)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Te)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=d(this,le).build(this,t);return r.isStaleByTime(Ct(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Te).catch(Te)}fetchInfiniteQuery(e){return e.behavior=Cn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Te).catch(Te)}ensureInfiniteQueryData(e){return e.behavior=Cn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gr.isOnline()?d(this,et).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,le)}getMutationCache(){return d(this,et)}getDefaultOptions(){return d(this,tt)}setDefaultOptions(e){k(this,tt,e)}setQueryDefaults(e,t){d(this,Pt).set(wt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...d(this,Pt).values()],r={};return t.forEach(n=>{Wt(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){d(this,Ot).set(wt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...d(this,Ot).values()];let r={};return t.forEach(n=>{Wt(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...d(this,tt).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sn(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===an&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...d(this,tt).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){d(this,le).clear(),d(this,et).clear()}},le=new WeakMap,et=new WeakMap,tt=new WeakMap,Pt=new WeakMap,Ot=new WeakMap,rt=new WeakMap,It=new WeakMap,Lt=new WeakMap,Un),Ee,K,Xt,be,mt,Ft,nt,Ae,Zt,Dt,jt,gt,yt,st,Mt,J,zt,Nr,Ar,$r,Ur,qr,Br,zr,ms,qn,Ia=(qn=class extends At{constructor(t,r){super();F(this,J);F(this,Ee);F(this,K);F(this,Xt);F(this,be);F(this,mt);F(this,Ft);F(this,nt);F(this,Ae);F(this,Zt);F(this,Dt);F(this,jt);F(this,gt);F(this,yt);F(this,st);F(this,Mt,new Set);this.options=r,k(this,Ee,t),k(this,Ae,null),k(this,nt,Mr()),this.options.experimental_prefetchInRender||d(this,nt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,K).addObserver(this),Sn(d(this,K),this.options)?B(this,J,zt).call(this):this.updateResult(),B(this,J,Ur).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qr(d(this,K),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qr(d(this,K),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,B(this,J,qr).call(this),B(this,J,Br).call(this),d(this,K).removeObserver(this)}setOptions(t,r){const n=this.options,s=d(this,K);if(this.options=d(this,Ee).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ie(this.options.enabled,d(this,K))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");B(this,J,zr).call(this),d(this,K).setOptions(this.options),n._defaulted&&!mr(this.options,n)&&d(this,Ee).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,K),observer:this});const i=this.hasListeners();i&&_n(d(this,K),s,this.options,n)&&B(this,J,zt).call(this),this.updateResult(r),i&&(d(this,K)!==s||Ie(this.options.enabled,d(this,K))!==Ie(n.enabled,d(this,K))||Ct(this.options.staleTime,d(this,K))!==Ct(n.staleTime,d(this,K)))&&B(this,J,Nr).call(this);const a=B(this,J,Ar).call(this);i&&(d(this,K)!==s||Ie(this.options.enabled,d(this,K))!==Ie(n.enabled,d(this,K))||a!==d(this,st))&&B(this,J,$r).call(this,a)}getOptimisticResult(t){const r=d(this,Ee).getQueryCache().build(d(this,Ee),t),n=this.createResult(r,t);return Fa(this,n)&&(k(this,be,n),k(this,Ft,this.options),k(this,mt,d(this,K).state)),n}getCurrentResult(){return d(this,be)}trackResult(t,r){const n={};return Object.keys(t).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),r==null||r(s),t[s])})}),n}trackProp(t){d(this,Mt).add(t)}getCurrentQuery(){return d(this,K)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=d(this,Ee).defaultQueryOptions(t),n=d(this,Ee).getQueryCache().build(d(this,Ee),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return B(this,J,zt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,be)))}createResult(t,r){var o;const n=d(this,K),s=this.options,i=d(this,be),a=d(this,mt),h=d(this,Ft),u=t!==n?t.state:d(this,Xt),{state:f}=t;let m={...f},y=!1,x;if(r._optimisticResults){const c=this.hasListeners(),w=!c&&Sn(t,r),_=c&&_n(t,n,r,s);(w||_)&&(m={...m,...ds(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:E,status:g}=m;if(r.select&&m.data!==void 0)if(i&&m.data===(a==null?void 0:a.data)&&r.select===d(this,Zt))x=d(this,Dt);else try{k(this,Zt,r.select),x=r.select(m.data),x=jr(i==null?void 0:i.data,x,r),k(this,Dt,x),k(this,Ae,null)}catch(c){k(this,Ae,c)}else x=m.data;if(r.placeholderData!==void 0&&x===void 0&&g==="pending"){let c;if(i!=null&&i.isPlaceholderData&&r.placeholderData===(h==null?void 0:h.placeholderData))c=i.data;else if(c=typeof r.placeholderData=="function"?r.placeholderData((o=d(this,jt))==null?void 0:o.state.data,d(this,jt)):r.placeholderData,r.select&&c!==void 0)try{c=r.select(c),k(this,Ae,null)}catch(w){k(this,Ae,w)}c!==void 0&&(g="success",x=jr(i==null?void 0:i.data,c,r),y=!0)}d(this,Ae)&&(v=d(this,Ae),x=d(this,Dt),E=Date.now(),g="error");const b=m.fetchStatus==="fetching",C=g==="pending",S=g==="error",I=C&&b,U=x!==void 0,P={status:g,fetchStatus:m.fetchStatus,isPending:C,isSuccess:g==="success",isError:S,isInitialLoading:I,isLoading:I,data:x,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:E,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!C,isLoadingError:S&&!U,isPaused:m.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:S&&U,isStale:ln(t,r),refetch:this.refetch,promise:d(this,nt)};if(this.options.experimental_prefetchInRender){const c=T=>{P.status==="error"?T.reject(P.error):P.data!==void 0&&T.resolve(P.data)},w=()=>{const T=k(this,nt,P.promise=Mr());c(T)},_=d(this,nt);switch(_.status){case"pending":t.queryHash===n.queryHash&&c(_);break;case"fulfilled":(P.status==="error"||P.data!==_.value)&&w();break;case"rejected":(P.status!=="error"||P.error!==_.reason)&&w();break}}return P}updateResult(t){const r=d(this,be),n=this.createResult(d(this,K),this.options);if(k(this,mt,d(this,K).state),k(this,Ft,this.options),d(this,mt).data!==void 0&&k(this,jt,d(this,K)),mr(n,r))return;k(this,be,n);const s={},i=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,h=typeof a=="function"?a():a;if(h==="all"||!h&&!d(this,Mt).size)return!0;const l=new Set(h??d(this,Mt));return this.options.throwOnError&&l.add("error"),Object.keys(d(this,be)).some(u=>{const f=u;return d(this,be)[f]!==r[f]&&l.has(f)})};(t==null?void 0:t.listeners)!==!1&&i()&&(s.listeners=!0),B(this,J,ms).call(this,{...s,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&B(this,J,Ur).call(this)}},Ee=new WeakMap,K=new WeakMap,Xt=new WeakMap,be=new WeakMap,mt=new WeakMap,Ft=new WeakMap,nt=new WeakMap,Ae=new WeakMap,Zt=new WeakMap,Dt=new WeakMap,jt=new WeakMap,gt=new WeakMap,yt=new WeakMap,st=new WeakMap,Mt=new WeakMap,J=new WeakSet,zt=function(t){B(this,J,zr).call(this);let r=d(this,K).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Te)),r},Nr=function(){B(this,J,qr).call(this);const t=Ct(this.options.staleTime,d(this,K));if(bt||d(this,be).isStale||!Fr(t))return;const n=is(d(this,be).dataUpdatedAt,t)+1;k(this,gt,setTimeout(()=>{d(this,be).isStale||this.updateResult()},n))},Ar=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,K)):this.options.refetchInterval)??!1},$r=function(t){B(this,J,Br).call(this),k(this,st,t),!(bt||Ie(this.options.enabled,d(this,K))===!1||!Fr(d(this,st))||d(this,st)===0)&&k(this,yt,setInterval(()=>{(this.options.refetchIntervalInBackground||on.isFocused())&&B(this,J,zt).call(this)},d(this,st)))},Ur=function(){B(this,J,Nr).call(this),B(this,J,$r).call(this,B(this,J,Ar).call(this))},qr=function(){d(this,gt)&&(clearTimeout(d(this,gt)),k(this,gt,void 0))},Br=function(){d(this,yt)&&(clearInterval(d(this,yt)),k(this,yt,void 0))},zr=function(){const t=d(this,Ee).getQueryCache().build(d(this,Ee),this.options);if(t===d(this,K))return;const r=d(this,K);k(this,K,t),k(this,Xt,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ms=function(t){he.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(d(this,be))}),d(this,Ee).getQueryCache().notify({query:d(this,K),type:"observerResultsUpdated"})})},qn);function La(e,t){return Ie(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Sn(e,t){return La(e,t)||e.state.data!==void 0&&Qr(e,t,t.refetchOnMount)}function Qr(e,t,r){if(Ie(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ln(e,t)}return!1}function _n(e,t,r,n){return(e!==t||Ie(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ln(e,r)}function ln(e,t){return Ie(t.enabled,e)!==!1&&e.isStaleByTime(Ct(t.staleTime,e))}function Fa(e,t){return!mr(e.getCurrentResult(),t)}var it,at,Ce,He,We,cr,Hr,Bn,Da=(Bn=class extends At{constructor(r,n){super();F(this,We);F(this,it);F(this,at);F(this,Ce);F(this,He);k(this,it,r),this.setOptions(n),this.bindMethods(),B(this,We,cr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=d(this,it).defaultMutationOptions(r),mr(this.options,n)||d(this,it).getMutationCache().notify({type:"observerOptionsUpdated",mutation:d(this,Ce),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&wt(n.mutationKey)!==wt(this.options.mutationKey)?this.reset():((s=d(this,Ce))==null?void 0:s.state.status)==="pending"&&d(this,Ce).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=d(this,Ce))==null||r.removeObserver(this)}onMutationUpdate(r){B(this,We,cr).call(this),B(this,We,Hr).call(this,r)}getCurrentResult(){return d(this,at)}reset(){var r;(r=d(this,Ce))==null||r.removeObserver(this),k(this,Ce,void 0),B(this,We,cr).call(this),B(this,We,Hr).call(this)}mutate(r,n){var s;return k(this,He,n),(s=d(this,Ce))==null||s.removeObserver(this),k(this,Ce,d(this,it).getMutationCache().build(d(this,it),this.options)),d(this,Ce).addObserver(this),d(this,Ce).execute(r)}},it=new WeakMap,at=new WeakMap,Ce=new WeakMap,He=new WeakMap,We=new WeakSet,cr=function(){var n;const r=((n=d(this,Ce))==null?void 0:n.state)??ps();k(this,at,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Hr=function(r){he.batch(()=>{var n,s,i,a,h,l,u,f;if(d(this,He)&&this.hasListeners()){const m=d(this,at).variables,y=d(this,at).context;(r==null?void 0:r.type)==="success"?((s=(n=d(this,He)).onSuccess)==null||s.call(n,r.data,m,y),(a=(i=d(this,He)).onSettled)==null||a.call(i,r.data,null,m,y)):(r==null?void 0:r.type)==="error"&&((l=(h=d(this,He)).onError)==null||l.call(h,r.error,m,y),(f=(u=d(this,He)).onSettled)==null||f.call(u,void 0,r.error,m,y))}this.listeners.forEach(m=>{m(d(this,at))})})},Bn),gs=p.createContext(void 0),ys=e=>{const t=p.useContext(gs);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ja=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),R.jsx(gs.Provider,{value:e,children:t})),vs=p.createContext(!1),Ma=()=>p.useContext(vs);vs.Provider;function Na(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Aa=p.createContext(Na()),$a=()=>p.useContext(Aa);function bs(e,t){return typeof e=="function"?e(...t):!!e}function Kr(){}var Ua=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},qa=e=>{p.useEffect(()=>{e.clearReset()},[e])},Ba=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||bs(r,[e.error,n])),za=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...r)=>Math.max(t(...r),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Qa=(e,t)=>e.isLoading&&e.isFetching&&!t,Ha=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Tn=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ka(e,t,r){var m,y,x,v,E;const n=ys(),s=Ma(),i=$a(),a=n.defaultQueryOptions(e);(y=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||y.call(m,a),a._optimisticResults=s?"isRestoring":"optimistic",za(a),Ua(a,i),qa(i);const h=!n.getQueryCache().get(a.queryHash),[l]=p.useState(()=>new t(n,a)),u=l.getOptimisticResult(a),f=!s&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(g=>{const b=f?l.subscribe(he.batchCalls(g)):Kr;return l.updateResult(),b},[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),p.useEffect(()=>{l.setOptions(a,{listeners:!1})},[a,l]),Ha(a,u))throw Tn(a,l,i);if(Ba({result:u,errorResetBoundary:i,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((v=(x=n.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||v.call(x,a,u),a.experimental_prefetchInRender&&!bt&&Qa(u,s)){const g=h?Tn(a,l,i):(E=n.getQueryCache().get(a.queryHash))==null?void 0:E.promise;g==null||g.catch(Kr).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?u:l.trackResult(u)}function ws(e,t){return Ka(e,Ia)}function xs(e,t){const r=ys(),[n]=p.useState(()=>new Da(r,e));p.useEffect(()=>{n.setOptions(e)},[n,e]);const s=p.useSyncExternalStore(p.useCallback(a=>n.subscribe(he.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=p.useCallback((a,h)=>{n.mutate(a,h).catch(Kr)},[n]);if(s.error&&bs(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var Wa=function(){return null};function xr({children:e,className:t=null,disabled:r=!1,onClick:n=()=>null,type:s="button",variant:i="primary"}){return R.jsx("button",{className:`
        inline-flex w-fit items-center justify-center rounded-md shadow-sm transition-buttons duration-200 px-4 py-2 text-sm font-medium

        ${r?"":`
              hover:shadow-lg
              focus:outline-hidden focus:ring-2 focus:ring-offset-2`}

        ${i==="primary"?`
              bg-oxford-600 text-white
              hover:bg-oxford-700
              focus:bg-oxford-700 focus:ring-oxford-500 focus:ring-offset-white
            `:""}
        ${i==="secondary"?`
              bg-slate-500 text-white
              hover:bg-slate-600
              focus:bg-slate-600 focus:ring-slate-500 focus:ring-offset-white
            `:""}

        ${t}
      `,disabled:r,onClick:n,type:s,children:e})}xr.propTypes={children:L.node.isRequired,className:L.string,disabled:L.bool,onClick:L.func,type:L.string,variant:L.string};function Va(e){let t=[],r=[];return e.map((n,s)=>{const i=n.name.split("/");return s===0?(t=[],t=i):(r=[],i.map((a,h)=>a===t[h]?r.push(a):null))}),r.join("/")}function Ga(e){const t=new Intl.Collator("en"),r=[...e].sort((s,i)=>i.date.localeCompare(s.date)).map((s,i)=>({dateOrder:i,...s})).sort((s,i)=>t.compare(s.name.toUpperCase(),i.name.toUpperCase())).map((s,i)=>({nameOrder:i,...s}));if(r.length<2)return r.map(s=>({...s,shortName:s.name,visible:!0}));const n=Va(r);return r.map(s=>({...s,shortName:s.name.replace(`${n}/`,""),visible:!0}))}function Es({authToken:e,filesUrl:t}){return ws({queryKey:["FILE_LIST"],queryFn:async()=>{const r=await fetch(t,{headers:{Authorization:e}});if(!r.ok)throw new Error("File list not found");return r.json()},select:r=>Ga(r.files),meta:{errorMessage:"Unable to load files",id:t}})}const Re={authToken:L.string,basePath:L.string,csrfToken:L.string,filesUrl:L.string,prepareUrl:L.string,publishUrl:L.string},$e={date:L.string,id:L.string,is_deleted:L.bool,name:L.string,sha256:L.string,size:L.number,url:L.string,user:L.string};function Cs(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Cs(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Cs(e))&&(n&&(n+=" "),n+=t);return n}const Vt=e=>typeof e=="number"&&!isNaN(e),vt=e=>typeof e=="string",Se=e=>typeof e=="function",hr=e=>vt(e)||Se(e)?e:null,Wr=e=>p.isValidElement(e)||vt(e)||Se(e)||Vt(e);function Ya(e,t,r){r===void 0&&(r=300);const{scrollHeight:n,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,r)})})}function Er(e){let{enter:t,exit:r,appendPosition:n=!1,collapse:s=!0,collapseDuration:i=300}=e;return function(a){let{children:h,position:l,preventExitTransition:u,done:f,nodeRef:m,isIn:y,playToast:x}=a;const v=n?`${t}--${l}`:t,E=n?`${r}--${l}`:r,g=p.useRef(0);return p.useLayoutEffect(()=>{const b=m.current,C=v.split(" "),S=I=>{I.target===m.current&&(x(),b.removeEventListener("animationend",S),b.removeEventListener("animationcancel",S),g.current===0&&I.type!=="animationcancel"&&b.classList.remove(...C))};b.classList.add(...C),b.addEventListener("animationend",S),b.addEventListener("animationcancel",S)},[]),p.useEffect(()=>{const b=m.current,C=()=>{b.removeEventListener("animationend",C),s?Ya(b,f,i):f()};y||(u?C():(g.current=1,b.className+=` ${E}`,b.addEventListener("animationend",C)))},[y]),X.createElement(X.Fragment,null,h)}}function kn(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const we=new Map;let Gt=[];const Vr=new Set,Ja=e=>Vr.forEach(t=>t(e)),Rs=()=>we.size>0;function Ss(e,t){var r;if(t)return!((r=we.get(t))==null||!r.isToastActive(e));let n=!1;return we.forEach(s=>{s.isToastActive(e)&&(n=!0)}),n}function _s(e,t){Wr(e)&&(Rs()||Gt.push({content:e,options:t}),we.forEach(r=>{r.buildToast(e,t)}))}function Pn(e,t){we.forEach(r=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===r.id&&r.toggle(e,t==null?void 0:t.id):r.toggle(e,t==null?void 0:t.id)})}function Xa(e){const{subscribe:t,getSnapshot:r,setProps:n}=p.useRef(function(i){const a=i.containerId||1;return{subscribe(h){const l=function(f,m,y){let x=1,v=0,E=[],g=[],b=[],C=m;const S=new Map,I=new Set,U=()=>{b=Array.from(S.values()),I.forEach(o=>o())},z=o=>{g=o==null?[]:g.filter(c=>c!==o),U()},P=o=>{const{toastId:c,onOpen:w,updateId:_,children:T}=o.props,A=_==null;o.staleId&&S.delete(o.staleId),S.set(c,o),g=[...g,o.props.toastId].filter(Z=>Z!==o.staleId),U(),y(kn(o,A?"added":"updated")),A&&Se(w)&&w(p.isValidElement(T)&&T.props)};return{id:f,props:C,observe:o=>(I.add(o),()=>I.delete(o)),toggle:(o,c)=>{S.forEach(w=>{c!=null&&c!==w.props.toastId||Se(w.toggle)&&w.toggle(o)})},removeToast:z,toasts:S,clearQueue:()=>{v-=E.length,E=[]},buildToast:(o,c)=>{if((N=>{let{containerId:O,toastId:V,updateId:G}=N;const ne=O?O!==f:f!==1,fe=S.has(V)&&G==null;return ne||fe})(c))return;const{toastId:w,updateId:_,data:T,staleId:A,delay:Z}=c,ue=()=>{z(w)},me=_==null;me&&v++;const M={...C,style:C.toastStyle,key:x++,...Object.fromEntries(Object.entries(c).filter(N=>{let[O,V]=N;return V!=null})),toastId:w,updateId:_,data:T,closeToast:ue,isIn:!1,className:hr(c.className||C.toastClassName),bodyClassName:hr(c.bodyClassName||C.bodyClassName),progressClassName:hr(c.progressClassName||C.progressClassName),autoClose:!c.isLoading&&(W=c.autoClose,D=C.autoClose,W===!1||Vt(W)&&W>0?W:D),deleteToast(){const N=S.get(w),{onClose:O,children:V}=N.props;Se(O)&&O(p.isValidElement(V)&&V.props),y(kn(N,"removed")),S.delete(w),v--,v<0&&(v=0),E.length>0?P(E.shift()):U()}};var W,D;M.closeButton=C.closeButton,c.closeButton===!1||Wr(c.closeButton)?M.closeButton=c.closeButton:c.closeButton===!0&&(M.closeButton=!Wr(C.closeButton)||C.closeButton);let se=o;p.isValidElement(o)&&!vt(o.type)?se=p.cloneElement(o,{closeToast:ue,toastProps:M,data:T}):Se(o)&&(se=o({closeToast:ue,toastProps:M,data:T}));const j={content:se,props:M,staleId:A};C.limit&&C.limit>0&&v>C.limit&&me?E.push(j):Vt(Z)?setTimeout(()=>{P(j)},Z):P(j)},setProps(o){C=o},setToggle:(o,c)=>{S.get(o).toggle=c},isToastActive:o=>g.some(c=>c===o),getSnapshot:()=>b}}(a,i,Ja);we.set(a,l);const u=l.observe(h);return Gt.forEach(f=>_s(f.content,f.options)),Gt=[],()=>{u(),we.delete(a)}},setProps(h){var l;(l=we.get(a))==null||l.setProps(h)},getSnapshot(){var h;return(h=we.get(a))==null?void 0:h.getSnapshot()}}}(e)).current;n(e);const s=p.useSyncExternalStore(t,r,r);return{getToastToRender:function(i){if(!s)return[];const a=new Map;return e.newestOnTop&&s.reverse(),s.forEach(h=>{const{position:l}=h.props;a.has(l)||a.set(l,[]),a.get(l).push(h)}),Array.from(a,h=>i(h[0],h[1]))},isToastActive:Ss,count:s==null?void 0:s.length}}function Za(e){const[t,r]=p.useState(!1),[n,s]=p.useState(!1),i=p.useRef(null),a=p.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:l,closeToast:u,onClick:f,closeOnClick:m}=e;var y,x;function v(){r(!0)}function E(){r(!1)}function g(S){const I=i.current;a.canDrag&&I&&(a.didMove=!0,t&&E(),a.delta=e.draggableDirection==="x"?S.clientX-a.start:S.clientY-a.start,a.start!==S.clientX&&(a.canCloseOnClick=!1),I.style.transform=`translate3d(${e.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`},0)`,I.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function b(){document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b);const S=i.current;if(a.canDrag&&a.didMove&&S){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return s(!0),e.closeToast(),void e.collapseAll();S.style.transition="transform 0.2s, opacity 0.2s",S.style.removeProperty("transform"),S.style.removeProperty("opacity")}}(x=we.get((y={id:e.toastId,containerId:e.containerId,fn:r}).containerId||1))==null||x.setToggle(y.id,y.fn),p.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||E(),window.addEventListener("focus",v),window.addEventListener("blur",E),()=>{window.removeEventListener("focus",v),window.removeEventListener("blur",E)}},[e.pauseOnFocusLoss]);const C={onPointerDown:function(S){if(e.draggable===!0||e.draggable===S.pointerType){a.didMove=!1,document.addEventListener("pointermove",g),document.addEventListener("pointerup",b);const I=i.current;a.canCloseOnClick=!0,a.canDrag=!0,I.style.transition="none",e.draggableDirection==="x"?(a.start=S.clientX,a.removalDistance=I.offsetWidth*(e.draggablePercent/100)):(a.start=S.clientY,a.removalDistance=I.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(S){const{top:I,bottom:U,left:z,right:P}=i.current.getBoundingClientRect();S.nativeEvent.type!=="touchend"&&e.pauseOnHover&&S.clientX>=z&&S.clientX<=P&&S.clientY>=I&&S.clientY<=U?E():v()}};return h&&l&&(C.onMouseEnter=E,e.stacked||(C.onMouseLeave=v)),m&&(C.onClick=S=>{f&&f(S),a.canCloseOnClick&&u()}),{playToast:v,pauseToast:E,isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:C}}function eo(e){let{delay:t,isRunning:r,closeToast:n,type:s="default",hide:i,className:a,style:h,controlledProgress:l,progress:u,rtl:f,isIn:m,theme:y}=e;const x=i||l&&u===0,v={...h,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused"};l&&(v.transform=`scaleX(${u})`);const E=ot("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":f}),g=Se(a)?a({rtl:f,type:s,defaultClassName:E}):ot(E,a),b={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{m&&n()}};return X.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":x},X.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${s}`}),X.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:g,style:v,...b}))}let to=1;const Ts=()=>""+to++;function ro(e){return e&&(vt(e.toastId)||Vt(e.toastId))?e.toastId:Ts()}function Qt(e,t){return _s(e,t),t.toastId}function yr(e,t){return{...t,type:t&&t.type||e,toastId:ro(t)}}function ar(e){return(t,r)=>Qt(t,yr(e,r))}function te(e,t){return Qt(e,yr("default",t))}te.loading=(e,t)=>Qt(e,yr("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),te.promise=function(e,t,r){let n,{pending:s,error:i,success:a}=t;s&&(n=vt(s)?te.loading(s,r):te.loading(s.render,{...r,...s}));const h={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(f,m,y)=>{if(m==null)return void te.dismiss(n);const x={type:f,...h,...r,data:y},v=vt(m)?{render:m}:m;return n?te.update(n,{...x,...v}):te(v.render,{...x,...v}),y},u=Se(e)?e():e;return u.then(f=>l("success",a,f)).catch(f=>l("error",i,f)),u},te.success=ar("success"),te.info=ar("info"),te.error=ar("error"),te.warning=ar("warning"),te.warn=te.warning,te.dark=(e,t)=>Qt(e,yr("default",{theme:"dark",...t})),te.dismiss=function(e){(function(t){var r;if(Rs()){if(t==null||vt(r=t)||Vt(r))we.forEach(n=>{n.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const n=we.get(t.containerId);n?n.removeToast(t.id):we.forEach(s=>{s.removeToast(t.id)})}}else Gt=Gt.filter(n=>t!=null&&n.options.toastId!==t)})(e)},te.clearWaitingQueue=function(e){e===void 0&&(e={}),we.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},te.isActive=Ss,te.update=function(e,t){t===void 0&&(t={});const r=((n,s)=>{var i;let{containerId:a}=s;return(i=we.get(a||1))==null?void 0:i.toasts.get(n)})(e,t);if(r){const{props:n,content:s}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:Ts()};i.toastId!==e&&(i.staleId=e);const a=i.render||s;delete i.render,Qt(a,i)}},te.done=e=>{te.update(e,{progress:1})},te.onChange=function(e){return Vr.add(e),()=>{Vr.delete(e)}},te.play=e=>Pn(!0,e),te.pause=e=>Pn(!1,e);const no=typeof window<"u"?p.useLayoutEffect:p.useEffect,or=e=>{let{theme:t,type:r,isLoading:n,...s}=e;return X.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...s})},Or={info:function(e){return X.createElement(or,{...e},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return X.createElement(or,{...e},X.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return X.createElement(or,{...e},X.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return X.createElement(or,{...e},X.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return X.createElement("div",{className:"Toastify__spinner"})}},so=e=>{const{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:s,playToast:i}=Za(e),{closeButton:a,children:h,autoClose:l,onClick:u,type:f,hideProgressBar:m,closeToast:y,transition:x,position:v,className:E,style:g,bodyClassName:b,bodyStyle:C,progressClassName:S,progressStyle:I,updateId:U,role:z,progress:P,rtl:o,toastId:c,deleteToast:w,isIn:_,isLoading:T,closeOnClick:A,theme:Z}=e,ue=ot("Toastify__toast",`Toastify__toast-theme--${Z}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":o},{"Toastify__toast--close-on-click":A}),me=Se(E)?E({rtl:o,position:v,type:f,defaultClassName:ue}):ot(ue,E),M=function(j){let{theme:N,type:O,isLoading:V,icon:G}=j,ne=null;const fe={theme:N,type:O};return G===!1||(Se(G)?ne=G({...fe,isLoading:V}):p.isValidElement(G)?ne=p.cloneElement(G,fe):V?ne=Or.spinner():(Q=>Q in Or)(O)&&(ne=Or[O](fe))),ne}(e),W=!!P||!l,D={closeToast:y,type:f,theme:Z};let se=null;return a===!1||(se=Se(a)?a(D):p.isValidElement(a)?p.cloneElement(a,D):function(j){let{closeToast:N,theme:O,ariaLabel:V="close"}=j;return X.createElement("button",{className:`Toastify__close-button Toastify__close-button--${O}`,type:"button",onClick:G=>{G.stopPropagation(),N(G)},"aria-label":V},X.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},X.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(D)),X.createElement(x,{isIn:_,done:w,position:v,preventExitTransition:r,nodeRef:n,playToast:i},X.createElement("div",{id:c,onClick:u,"data-in":_,className:me,...s,style:g,ref:n},X.createElement("div",{..._&&{role:z},className:Se(b)?b({type:f}):ot("Toastify__toast-body",b),style:C},M!=null&&X.createElement("div",{className:ot("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},M),X.createElement("div",null,h)),se,X.createElement(eo,{...U&&!W?{key:`pb-${U}`}:{},rtl:o,theme:Z,delay:l,isRunning:t,isIn:_,closeToast:y,hide:m,type:f,style:I,className:S,controlledProgress:W,progress:P||0})))},Cr=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},io=Er(Cr("bounce",!0));Er(Cr("slide",!0));Er(Cr("zoom"));Er(Cr("flip"));const ao={position:"top-right",transition:io,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function oo(e){let t={...ao,...e};const r=e.stacked,[n,s]=p.useState(!0),i=p.useRef(null),{getToastToRender:a,isToastActive:h,count:l}=Xa(t),{className:u,style:f,rtl:m,containerId:y}=t;function x(E){const g=ot("Toastify__toast-container",`Toastify__toast-container--${E}`,{"Toastify__toast-container--rtl":m});return Se(u)?u({position:E,rtl:m,defaultClassName:g}):ot(g,hr(u))}function v(){r&&(s(!0),te.play())}return no(()=>{if(r){var E;const g=i.current.querySelectorAll('[data-in="true"]'),b=12,C=(E=t.position)==null?void 0:E.includes("top");let S=0,I=0;Array.from(g).reverse().forEach((U,z)=>{const P=U;P.classList.add("Toastify__toast--stacked"),z>0&&(P.dataset.collapsed=`${n}`),P.dataset.pos||(P.dataset.pos=C?"top":"bot");const o=S*(n?.2:1)+(n?0:b*z);P.style.setProperty("--y",`${C?o:-1*o}px`),P.style.setProperty("--g",`${b}`),P.style.setProperty("--s",""+(1-(n?I:0))),S+=P.offsetHeight,I+=.025})}},[n,l,r]),X.createElement("div",{ref:i,className:"Toastify",id:y,onMouseEnter:()=>{r&&(s(!1),te.pause())},onMouseLeave:v},a((E,g)=>{const b=g.length?{...f}:{...f,pointerEvents:"none"};return X.createElement("div",{className:x(E),style:b,key:`container-${E}`},g.map(C=>{let{content:S,props:I}=C;return X.createElement(so,{...I,stacked:r,collapseAll:v,isIn:h(I.toastId,I.containerId),style:I.style,key:`toast-${I.key}`},S)}))}))}function ks({toastId:e}){te.dismiss(e)}function un({toastId:e,message:t,...r}){console.error(t,{...r}),te.error(t,{autoClose:!1,closeOnClick:!1,draggable:!1,hideProgressBar:!0,id:e,pauseOnHover:!1,position:"top-right",theme:"light"})}function Ps({authToken:e,csrfToken:t,filesUrl:r,prepareUrl:n}){const{data:s}=Es({authToken:e,filesUrl:r}),i="PrepareButton",a=xs({mutationFn:async l=>{const u=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify({file_ids:l})});if(!u.ok){const f=await u.json();throw new Error(f.detail)}return u.json()},onMutate:()=>{ks({toastId:i})},onSuccess:l=>{window.location.href=l.url},onError:l=>{un({message:`${l}`,toastId:i,prepareUrl:n,url:document.location.href})}});if(!(s!=null&&s.length))return null;const h=s.map(l=>l.id);return R.jsx(xr,{disabled:a.isPending,onClick:l=>(l.preventDefault(),a.mutate(h)),type:"button",variant:a.isPending?"secondary":"primary",children:a.isPending?"Creating…":"Create a draft publication"})}Ps.propTypes={authToken:Re.authToken.isRequired,csrfToken:Re.csrfToken.isRequired,filesUrl:Re.filesUrl.isRequired,prepareUrl:Re.prepareUrl.isRequired};function Os({csrfToken:e,publishUrl:t}){const r="PublishButton",n=xs({mutationFn:async()=>{const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":e},body:""});if(!s.ok){const i=await s.json();throw new Error(i.detail)}return s.text()},onMutate:()=>{ks({toastId:r})},onSuccess:()=>{window.location.reload()},onError:s=>{un({message:`${s}`,toastId:r,publishUrl:t,url:document.location.href})}});return R.jsx(xr,{disabled:n.isPending,onClick:s=>(s.preventDefault(),n.mutate()),type:"button",variant:n.isPending?"secondary":"primary",children:n.isPending?"Creating…":"Create a public published output"})}Os.propTypes={csrfToken:Re.csrfToken.isRequired,publishUrl:Re.publishUrl.isRequired};function Ht({children:e,className:t="",container:r=!1,header:n=null,innerClassName:s=""}){return R.jsxs("div",{className:`bg-white shadow-sm ${t}`,children:[n?R.jsx("div",{className:"flex flex-wrap gap-2 items-center justify-between px-4 py-2 sm:px-6 sm:py-4 sm:flex-nowrap bg-slate-50",children:n}):null,R.jsx("div",{className:`
          ${s}
          ${r?"px-4 py-3 md:px-6 md:py-5":""}
          ${n&&r?"border-t border-slate-200":""}
        `,children:e})]})}Ht.propTypes={children:L.element.isRequired,className:L.string,container:L.bool,header:L.element,innerClassName:L.string};const lo=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],uo=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],co=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ho=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],On=(e,t,r)=>{let n=e;return typeof t=="string"||Array.isArray(t)?n=e.toLocaleString(t,r):(t===!0||r!==void 0)&&(n=e.toLocaleString(void 0,r)),n};function fo(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const r=t.bits?t.binary?ho:co:t.binary?uo:lo,n=t.space?" ":"";if(t.signed&&e===0)return` 0${n}${r[0]}`;const s=e<0,i=s?"-":t.signed?"+":"";s&&(e=-e);let a;if(t.minimumFractionDigits!==void 0&&(a={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(a={maximumFractionDigits:t.maximumFractionDigits,...a}),e<1){const f=On(e,t.locale,a);return i+f+n+r[0]}const h=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),r.length-1);e/=(t.binary?1024:1e3)**h,a||(e=e.toPrecision(3));const l=On(Number(e),t.locale,a),u=r[h];return i+l+n+u}function Is(e){return e?fo(e,{locale:"en-gb"}):"unknown"}function Ls({autocapitalize:e=null,autocomplete:t=null,autocorrect:r=null,className:n=null,hideLabel:s=!1,hintText:i=null,id:a="inputID",inputClassName:h=null,inputmode:l=null,label:u=null,labelClass:f=null,onChange:m=()=>null,placeholder:y=null,required:x=null,type:v="text",value:E=null}){return R.jsxs("div",{className:n,children:[R.jsxs("label",{className:`inline-block font-semibold text-lg text-slate-900 cursor-pointer ${f} ${s?"sr-only":"null"}`,htmlFor:a,children:[u,x?R.jsx("span",{"aria-hidden":"true",className:"text-bn-ribbon-700 font-bold",children:"*"}):null]}),i?R.jsx("p",{className:"mb-2 text-sm text-gray-700",children:{hintText:i}}):null,R.jsx("div",{className:"relative",children:R.jsx("input",{autoCapitalize:e,autoComplete:t,autoCorrect:r,className:`
            block w-full border-slate-300 text-slate-900 shadow-sm
            focus:border-oxford-500 focus:ring-oxford-500
            sm:text-sm
            [&:not(:placeholder-shown):not(:focus)]:invalid:border-bn-ribbon-600 [&:not(:placeholder-shown):not(:focus)]:invalid:ring-bn-ribbon-600 [&:not(:placeholder-shown):not(:focus)]:invalid:ring-1
            ${h}
            ${s?"":"mt-1"}
          `,id:a,inputMode:l,onChange:m,placeholder:y,required:x,type:v,value:E})})]})}Ls.propTypes={autocapitalize:L.string,autocomplete:L.oneOf(["none","off","characters","words","sentences"]),autocorrect:L.oneOf(["on","off"]),className:L.string,hideLabel:L.bool,hintText:L.string,id:L.string,inputClassName:L.string,inputmode:L.string,label:L.string,labelClass:L.string,onChange:L.func,placeholder:L.string,required:L.bool,type:L.string,value:L.string};function Fs({files:e,listRef:t,setFiles:r}){const[n,s]=p.useState("");p.useEffect(()=>{const a=[...e].map(h=>({...h,visible:h.shortName.toLowerCase().includes(n.toLowerCase())}));r(a)},[n]);function i(a){var h;(h=t==null?void 0:t.current)==null||h.scrollToItem(0),s(a.target.value)}return R.jsx(Ls,{autocapitalize:"off",autocomplete:"off",autocorrect:"off",className:"mb-1",hideLabel:!0,id:"filterFiles",label:"Find a file…",onChange:a=>i(a),placeholder:"Find a file…",type:"search",value:n})}Fs.propTypes={files:L.arrayOf(L.shape()).isRequired,listRef:L.oneOfType([L.func,L.shape({current:L.instanceOf(Element)})]).isRequired,setFiles:L.func.isRequired};function Ds({authToken:e,filesUrl:t,listVisible:r,setSelectedFile:n}){const[s,i]=p.useState([]),[a,h]=p.useState("nameOrder"),{data:l,isError:u,isLoading:f,isSuccess:m}=Es({authToken:e,filesUrl:t}),y=Xn(),x=ut(),v=p.createRef();if(p.useEffect(()=>{const g=l==null?void 0:l.find(b=>`/${b.name}`===x.pathname);n(g),l&&i(l)},[m]),f)return R.jsx(Ht,{container:!0,children:R.jsx("p",{children:"Loading…"})});if(u)return R.jsx(Ht,{container:!0,header:R.jsx("h2",{className:"font-semibold text-lg",children:"Error"}),children:R.jsx("p",{children:"Unable to load files"})});const E=({e:g,item:b})=>{g.preventDefault();const C=`/${b.name}`;return y(C),n(b)};return R.jsxs("div",{className:r?"block md:sticky md:top-2":"hidden",children:[R.jsxs("div",{className:"flex flex-row items-center gap-2 mb-1",children:[R.jsx("label",{className:"inline-block font-semibold text-sm text-slate-900 cursor-pointer shrink-0",htmlFor:"fileSort",children:"Sort files by"}),R.jsxs("select",{className:`
            block w-full border-slate-300 text-slate-900 shadow-sm
            focus:border-oxford-500 focus:ring-oxford-500
            sm:text-sm
          `,id:"fileSort",name:"file-sort",onChange:g=>h(g.target.value),value:a,children:[R.jsx("option",{value:"nameOrder",children:"File name"}),R.jsx("option",{value:"dateOrder",children:"Created date"})]})]}),R.jsx(Fs,{files:l,listRef:v,setFiles:i}),R.jsx(Ht,{className:"py-2 md:max-h-screen md:h-full overflow-x-auto md:overflow-y-auto",container:!1,children:R.jsx("ul",{className:"text-sm text-oxford-600 flex flex-col gap-y-1 items-start",children:s.sort((g,b)=>g[a]-b[a]).map(g=>R.jsx(X.Fragment,{children:g.visible&&R.jsx("li",{className:`leading-tight px-4 ${`/${g.name}`===x.pathname?"font-bold text-oxford-800":""}`,children:`/${g.name}`===x.pathname?R.jsx("span",{children:g.shortName}):R.jsx("a",{disabled:`/${g.name}`===x.pathname,href:g.url,onClick:b=>E({e:b,item:g}),title:`File size: ${Is(g.size)}`,children:g.shortName})})},g.id))})})]})}Ds.propTypes={authToken:Re.authToken.isRequired,filesUrl:Re.filesUrl.isRequired,listVisible:L.bool.isRequired,setSelectedFile:L.func.isRequired};function Rr({children:e=null,className:t=null,href:r,newTab:n=!1}){return R.jsx("a",{className:`
        font-semibold text-oxford-600 underline underline-offset-2 decoration-oxford-300 transition-colors duration-200
        hover:decoration-transparent hover:text-oxford
        focus:decoration-transparent focus:text-oxford focus:bg-bn-sun-300
        ${t}
      `,href:r,rel:n?"noreferrer noopener":void 0,target:n?"filePreview":void 0,children:e})}Rr.propTypes={children:L.oneOfType([L.element,L.string]),className:L.string,href:L.string.isRequired,newTab:L.bool};function js({fileDate:e,fileName:t,fileSize:r,fileUrl:n}){const s=()=>{if(Date.parse(e)){const i=new Date(e);return{absolute:i.toISOString(),formatted:new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",dateStyle:"short",timeStyle:"short"}).format(i)}}return!1};return R.jsxs("ul",{className:"flex flex-row gap-2 items-center w-full flex-wrap",children:[R.jsx("li",{className:"mr-auto pr-4",children:R.jsx(Rr,{className:`
            font-semibold text-oxford-600 underline underline-offset-2 decoration-oxford-300 transition-colors duration-200
            hover:decoration-transparent hover:text-oxford
            focus:decoration-transparent focus:text-oxford focus:bg-bn-sun-300
            after:content-['↗'] after:text-sm after:ml-1 after:absolute after:mt-0.5
          `,href:n,newTab:!0,children:t})}),s()&&R.jsxs("li",{className:"font-mono text-sm text-right whitespace-nowrap",children:[R.jsx("div",{className:"sr-only",children:"Last modified at: "}),R.jsx("time",{className:"",dateTime:s().absolute,title:s().absolute,children:s().formatted})]}),R.jsx("li",{className:"font-mono text-sm text-right whitespace-nowrap ml-4",children:Is(r)})]})}js.propTypes={fileDate:$e.date.isRequired,fileName:$e.name.isRequired,fileSize:$e.size.isRequired,fileUrl:$e.url.isRequired};function po(){return R.jsx(oo,{})}const Gr=e=>e.toLowerCase().match(/.*\.(?:csv)$/i),Ms=e=>e.toLowerCase().match(/.*\.(?:html)$/i),Yr=e=>e.toLowerCase().match(/.*\.(?:gif|jpg|jpeg|png|svg)$/i),Ns=e=>e.toLowerCase().match(/.*\.(?:txt)$/i),As=e=>e.toLowerCase().match(/.*\.(?:json)$/i),In=e=>Gr(e)||Ms(e)||Yr(e)||Ns(e)||As(e),Ir='"File not yet uploaded"';var mo=go;function go(e,t,r){var n=null,s=null,i=function(){n&&(clearTimeout(n),s=null,n=null)},a=function(){var l=s;i(),l&&l()},h=function(){if(!t)return e.apply(this,arguments);var l=this,u=arguments,f=r&&!n;if(i(),s=function(){e.apply(l,u)},n=setTimeout(function(){if(n=null,!f){var m=s;return s=null,m()}},t),f)return s()};return h.cancel=i,h.flush=a,h}function yo(e=100){const[t,r]=p.useState({width:void 0,height:void 0});return p.useEffect(()=>{function n(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",mo(n,e)),n(),()=>window.removeEventListener("resize",n)},[e]),t}function $s({data:e,fileName:t,fileUrl:r}){const n=yo(),[s,i]=p.useState(0),a=encodeURIComponent(r).replace(/\W/g,"");return p.useLayoutEffect(()=>{var l;if(document.getElementById(a)&&window.innerWidth>991){const u=Math.round((l=document==null?void 0:document.getElementById("outputsSPA"))==null?void 0:l.offsetHeight);if(!u||u<1e3)return i(1e3)}return i(1e3)},[n,a]),R.jsx("iframe",{className:"-mx-4 -my-3 w-[calc(100%+2rem)] md:-mx-6 md:-my-5 md:w-[calc(100%+3rem)]",frameBorder:"0",height:s,id:a,src:r,srcDoc:e,title:t,width:"100%"})}$s.propTypes={data:L.string.isRequired,fileName:$e.name.isRequired,fileUrl:$e.url.isRequired};function Us({data:e}){return R.jsx("img",{alt:"",className:"h-auto max-w-full",src:e})}Us.propTypes={data:L.string.isRequired};function qs({error:e=null,fileUrl:t}){return R.jsxs(R.Fragment,{children:[e?R.jsx("p",{children:"Error: Unable to load file"}):R.jsx("p",{children:"We cannot show a preview of this file."}),R.jsx("p",{className:"mt-3",children:R.jsx(Rr,{href:t,newTab:!0,children:"Open file in a new tab ↗"})})]})}qs.propTypes={error:L.shape({message:L.string}),fileUrl:$e.url.isRequired};var dr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var vo=dr.exports,Ln;function bo(){return Ln||(Ln=1,function(e,t){((r,n)=>{e.exports=n()})(vo,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,h={},l=0,u={};function f(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var w=U(c);w.chunkSize=parseInt(w.chunkSize),c.step||c.chunk||(w.chunkSize=null),this._handle=new E(w),(this._handle.streamer=this)._config=w}).call(this,o),this.parseChunk=function(c,w){var _=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_){let A=this._config.newline;A||(T=this._config.quoteChar||'"',A=this._handle.guessLineEndings(c,T)),c=[...c.split(A).slice(_)].join(A)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(T=this._config.beforeFirstChunk(c))!==void 0&&(c=T),this.isFirstChunk=!1,this._halted=!1;var _=this._partialLine+c,T=(this._partialLine="",this._handle.parse(_,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(c=T.meta.cursor,_=(this._finished||(this._partialLine=_.substring(c-this._baseIndex),this._baseIndex=c),T&&T.data&&(this._rowCount+=T.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:T,workerId:u.WORKER_ID,finished:_});else if(P(this._config.chunk)&&!w){if(this._config.chunk(T,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=T=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(T.data),this._completeResults.errors=this._completeResults.errors.concat(T.errors),this._completeResults.meta=T.meta),this._completed||!_||!P(this._config.complete)||T&&T.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_||T&&T.meta.paused||this._nextChunk(),T}this._halted=!0},this._sendError=function(c){P(this._config.error)?this._config.error(c):a&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:c,finished:!1})}}function m(o){var c;(o=o||{}).chunkSize||(o.chunkSize=u.RemoteChunkSize),f.call(this,o),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),i||(c.onload=z(this._chunkLoaded,this),c.onerror=z(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var w,_=this._config.downloadRequestHeaders;for(w in _)c.setRequestHeader(w,_[w])}var T;this._config.chunkSize&&(T=this._start+this._config.chunkSize-1,c.setRequestHeader("Range","bytes="+this._start+"-"+T));try{c.send(this._config.downloadRequestBody)}catch(A){this._chunkError(A.message)}i&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize||c.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(c),this.parseChunk(c.responseText)))},this._chunkError=function(w){w=c.statusText||w,this._sendError(new Error(w))}}function y(o){(o=o||{}).chunkSize||(o.chunkSize=u.LocalChunkSize),f.call(this,o);var c,w,_=typeof FileReader<"u";this.stream=function(T){this._input=T,w=T.slice||T.webkitSlice||T.mozSlice,_?((c=new FileReader).onload=z(this._chunkLoaded,this),c.onerror=z(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input,A=(this._config.chunkSize&&(A=Math.min(this._start+this._config.chunkSize,this._input.size),T=w.call(T,this._start,A)),c.readAsText(T,this._config.encoding));_||this._chunkLoaded({target:{result:A}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(c.error)}}function x(o){var c;f.call(this,o=o||{}),this.stream=function(w){return c=w,this._nextChunk()},this._nextChunk=function(){var w,_;if(!this._finished)return w=this._config.chunkSize,c=w?(_=c.substring(0,w),c.substring(w)):(_=c,""),this._finished=!c,this.parseChunk(_)}}function v(o){f.call(this,o=o||{});var c=[],w=!0,_=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):w=!0},this._streamData=z(function(T){try{c.push(typeof T=="string"?T:T.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(A){this._streamError(A)}},this),this._streamError=z(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=z(function(){this._streamCleanUp(),_=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(o){var c,w,_,T,A=Math.pow(2,53),Z=-A,ue=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,me=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,W=0,D=0,se=!1,j=!1,N=[],O={data:[],errors:[],meta:{}};function V(Q){return o.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function G(){if(O&&_&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),_=!1),o.skipEmptyLines&&(O.data=O.data.filter(function($){return!V($)})),ne()){let $=function(oe,ce){P(o.transformHeader)&&(oe=o.transformHeader(oe,ce)),N.push(oe)};if(O)if(Array.isArray(O.data[0])){for(var Q=0;ne()&&Q<O.data.length;Q++)O.data[Q].forEach($);O.data.splice(0,1)}else O.data.forEach($)}function Y($,oe){for(var ce=o.header?{}:[],ee=0;ee<$.length;ee++){var re=ee,H=$[ee],H=((ke,q)=>(ie=>(o.dynamicTypingFunction&&o.dynamicTyping[ie]===void 0&&(o.dynamicTyping[ie]=o.dynamicTypingFunction(ie)),(o.dynamicTyping[ie]||o.dynamicTyping)===!0))(ke)?q==="true"||q==="TRUE"||q!=="false"&&q!=="FALSE"&&((ie=>{if(ue.test(ie)&&(ie=parseFloat(ie),Z<ie&&ie<A))return 1})(q)?parseFloat(q):me.test(q)?new Date(q):q===""?null:q):q)(re=o.header?ee>=N.length?"__parsed_extra":N[ee]:re,H=o.transform?o.transform(H,re):H);re==="__parsed_extra"?(ce[re]=ce[re]||[],ce[re].push(H)):ce[re]=H}return o.header&&(ee>N.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+ee,D+oe):ee<N.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+ee,D+oe)),ce}var ae;O&&(o.header||o.dynamicTyping||o.transform)&&(ae=1,!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(Y),ae=O.data.length):O.data=Y(O.data,0),o.header&&O.meta&&(O.meta.fields=N),D+=ae)}function ne(){return o.header&&N.length===0}function fe(Q,Y,ae,$){Q={type:Q,code:Y,message:ae},$!==void 0&&(Q.row=$),O.errors.push(Q)}P(o.step)&&(T=o.step,o.step=function(Q){O=Q,ne()?G():(G(),O.data.length!==0&&(W+=Q.data.length,o.preview&&W>o.preview?w.abort():(O.data=O.data[0],T(O,M))))}),this.parse=function(Q,Y,ae){var $=o.quoteChar||'"',$=(o.newline||(o.newline=this.guessLineEndings(Q,$)),_=!1,o.delimiter?P(o.delimiter)&&(o.delimiter=o.delimiter(Q),O.meta.delimiter=o.delimiter):(($=((oe,ce,ee,re,H)=>{var ke,q,ie,Ye;H=H||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var xt=0;xt<H.length;xt++){for(var Le,$t=H[xt],ge=0,Fe=0,pe=0,xe=(ie=void 0,new b({comments:re,delimiter:$t,newline:ce,preview:10}).parse(oe)),Be=0;Be<xe.data.length;Be++)ee&&V(xe.data[Be])?pe++:(Le=xe.data[Be].length,Fe+=Le,ie===void 0?ie=Le:0<Le&&(ge+=Math.abs(Le-ie),ie=Le));0<xe.data.length&&(Fe/=xe.data.length-pe),(q===void 0||ge<=q)&&(Ye===void 0||Ye<Fe)&&1.99<Fe&&(q=ge,ke=$t,Ye=Fe)}return{successful:!!(o.delimiter=ke),bestDelimiter:ke}})(Q,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess)).successful?o.delimiter=$.bestDelimiter:(_=!0,o.delimiter=u.DefaultDelimiter),O.meta.delimiter=o.delimiter),U(o));return o.preview&&o.header&&$.preview++,c=Q,w=new b($),O=w.parse(c,Y,ae),G(),se?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return se},this.pause=function(){se=!0,w.abort(),c=P(o.chunk)?"":c.substring(w.getCharIndex())},this.resume=function(){M.streamer._halted?(se=!1,M.streamer.parseChunk(c,!0)):setTimeout(M.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,w.abort(),O.meta.aborted=!0,P(o.complete)&&o.complete(O),c=""},this.guessLineEndings=function(oe,$){oe=oe.substring(0,1048576);var $=new RegExp(g($)+"([^]*?)"+g($),"gm"),ae=(oe=oe.replace($,"")).split("\r"),$=oe.split(`
`),oe=1<$.length&&$[0].length<ae[0].length;if(ae.length===1||oe)return`
`;for(var ce=0,ee=0;ee<ae.length;ee++)ae[ee][0]===`
`&&ce++;return ce>=ae.length/2?`\r
`:"\r"}}function g(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(o){var c=(o=o||{}).delimiter,w=o.newline,_=o.comments,T=o.step,A=o.preview,Z=o.fastMode,ue=null,me=!1,M=o.quoteChar==null?'"':o.quoteChar,W=M;if(o.escapeChar!==void 0&&(W=o.escapeChar),(typeof c!="string"||-1<u.BAD_DELIMITERS.indexOf(c))&&(c=","),_===c)throw new Error("Comment character same as delimiter");_===!0?_="#":(typeof _!="string"||-1<u.BAD_DELIMITERS.indexOf(_))&&(_=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var D=0,se=!1;this.parse=function(j,N,O){if(typeof j!="string")throw new Error("Input must be a string");var V=j.length,G=c.length,ne=w.length,fe=_.length,Q=P(T),Y=[],ae=[],$=[],oe=D=0;if(!j)return ge();if(Z||Z!==!1&&j.indexOf(M)===-1){for(var ce=j.split(w),ee=0;ee<ce.length;ee++){if($=ce[ee],D+=$.length,ee!==ce.length-1)D+=w.length;else if(O)return ge();if(!_||$.substring(0,fe)!==_){if(Q){if(Y=[],Ye($.split(c)),Fe(),se)return ge()}else Ye($.split(c));if(A&&A<=ee)return Y=Y.slice(0,A),ge(!0)}}return ge()}for(var re=j.indexOf(c,D),H=j.indexOf(w,D),ke=new RegExp(g(W)+g(M),"g"),q=j.indexOf(M,D);;)if(j[D]===M)for(q=D,D++;;){if((q=j.indexOf(M,q+1))===-1)return O||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Y.length,index:D}),Le();if(q===V-1)return Le(j.substring(D,q).replace(ke,M));if(M===W&&j[q+1]===W)q++;else if(M===W||q===0||j[q-1]!==W){re!==-1&&re<q+1&&(re=j.indexOf(c,q+1));var ie=xt((H=H!==-1&&H<q+1?j.indexOf(w,q+1):H)===-1?re:Math.min(re,H));if(j.substr(q+1+ie,G)===c){$.push(j.substring(D,q).replace(ke,M)),j[D=q+1+ie+G]!==M&&(q=j.indexOf(M,D)),re=j.indexOf(c,D),H=j.indexOf(w,D);break}if(ie=xt(H),j.substring(q+1+ie,q+1+ie+ne)===w){if($.push(j.substring(D,q).replace(ke,M)),$t(q+1+ie+ne),re=j.indexOf(c,D),q=j.indexOf(M,D),Q&&(Fe(),se))return ge();if(A&&Y.length>=A)return ge(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Y.length,index:D}),q++}}else if(_&&$.length===0&&j.substring(D,D+fe)===_){if(H===-1)return ge();D=H+ne,H=j.indexOf(w,D),re=j.indexOf(c,D)}else if(re!==-1&&(re<H||H===-1))$.push(j.substring(D,re)),D=re+G,re=j.indexOf(c,D);else{if(H===-1)break;if($.push(j.substring(D,H)),$t(H+ne),Q&&(Fe(),se))return ge();if(A&&Y.length>=A)return ge(!0)}return Le();function Ye(pe){Y.push(pe),oe=D}function xt(pe){var xe=0;return xe=pe!==-1&&(pe=j.substring(q+1,pe))&&pe.trim()===""?pe.length:xe}function Le(pe){return O||(pe===void 0&&(pe=j.substring(D)),$.push(pe),D=V,Ye($),Q&&Fe()),ge()}function $t(pe){D=pe,Ye($),$=[],H=j.indexOf(w,D)}function ge(pe){if(o.header&&!N&&Y.length&&!me){var xe=Y[0],Be={},Sr=new Set(xe);let cn=!1;for(let Et=0;Et<xe.length;Et++){let De=xe[Et];if(Be[De=P(o.transformHeader)?o.transformHeader(De,Et):De]){let Ut,hn=Be[De];for(;Ut=De+"_"+hn,hn++,Sr.has(Ut););Sr.add(Ut),xe[Et]=Ut,Be[De]++,cn=!0,(ue=ue===null?{}:ue)[Ut]=De}else Be[De]=1,xe[Et]=De;Sr.add(De)}cn&&console.warn("Duplicate headers found and renamed."),me=!0}return{data:Y,errors:ae,meta:{delimiter:c,linebreak:w,aborted:se,truncated:!!pe,cursor:oe+(N||0),renamedHeaders:ue}}}function Fe(){T(ge()),Y=[],ae=[]}},this.abort=function(){se=!0},this.getCharIndex=function(){return D}}function C(o){var c=o.data,w=h[c.workerId],_=!1;if(c.error)w.userError(c.error,c.file);else if(c.results&&c.results.data){var T={abort:function(){_=!0,S(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(P(w.userStep)){for(var A=0;A<c.results.data.length&&(w.userStep({data:c.results.data[A],errors:c.results.errors,meta:c.results.meta},T),!_);A++);delete c.results}else P(w.userChunk)&&(w.userChunk(c.results,T,c.file),delete c.results)}c.finished&&!_&&S(c.workerId,c.results)}function S(o,c){var w=h[o];P(w.userComplete)&&w.userComplete(c),w.terminate(),delete h[o]}function I(){throw new Error("Not implemented.")}function U(o){if(typeof o!="object"||o===null)return o;var c,w=Array.isArray(o)?[]:{};for(c in o)w[c]=U(o[c]);return w}function z(o,c){return function(){o.apply(c,arguments)}}function P(o){return typeof o=="function"}return u.parse=function(o,c){var w=(c=c||{}).dynamicTyping||!1;if(P(w)&&(c.dynamicTypingFunction=w,w={}),c.dynamicTyping=w,c.transform=!!P(c.transform)&&c.transform,!c.worker||!u.WORKERS_SUPPORTED)return w=null,u.NODE_STREAM_INPUT,typeof o=="string"?(o=(_=>_.charCodeAt(0)!==65279?_:_.slice(1))(o),w=new(c.download?m:x)(c)):o.readable===!0&&P(o.read)&&P(o.on)?w=new v(c):(n.File&&o instanceof File||o instanceof Object)&&(w=new y(c)),w.stream(o);(w=(()=>{var _;return!!u.WORKERS_SUPPORTED&&(_=(()=>{var T=n.URL||n.webkitURL||null,A=r.toString();return u.BLOB_URL||(u.BLOB_URL=T.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",A,")();"],{type:"text/javascript"})))})(),(_=new n.Worker(_)).onmessage=C,_.id=l++,h[_.id]=_)})()).userStep=c.step,w.userChunk=c.chunk,w.userComplete=c.complete,w.userError=c.error,c.step=P(c.step),c.chunk=P(c.chunk),c.complete=P(c.complete),c.error=P(c.error),delete c.worker,w.postMessage({input:o,config:c,workerId:w.id})},u.unparse=function(o,c){var w=!1,_=!0,T=",",A=`\r
`,Z='"',ue=Z+Z,me=!1,M=null,W=!1,D=((()=>{if(typeof c=="object"){if(typeof c.delimiter!="string"||u.BAD_DELIMITERS.filter(function(N){return c.delimiter.indexOf(N)!==-1}).length||(T=c.delimiter),typeof c.quotes!="boolean"&&typeof c.quotes!="function"&&!Array.isArray(c.quotes)||(w=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(me=c.skipEmptyLines),typeof c.newline=="string"&&(A=c.newline),typeof c.quoteChar=="string"&&(Z=c.quoteChar),typeof c.header=="boolean"&&(_=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");M=c.columns}c.escapeChar!==void 0&&(ue=c.escapeChar+Z),c.escapeFormulae instanceof RegExp?W=c.escapeFormulae:typeof c.escapeFormulae=="boolean"&&c.escapeFormulae&&(W=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(Z),"g"));if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return se(null,o,me);if(typeof o[0]=="object")return se(M||Object.keys(o[0]),o,me)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||M),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),se(o.fields||[],o.data||[],me);throw new Error("Unable to serialize unrecognized input");function se(N,O,V){var G="",ne=(typeof N=="string"&&(N=JSON.parse(N)),typeof O=="string"&&(O=JSON.parse(O)),Array.isArray(N)&&0<N.length),fe=!Array.isArray(O[0]);if(ne&&_){for(var Q=0;Q<N.length;Q++)0<Q&&(G+=T),G+=j(N[Q],Q);0<O.length&&(G+=A)}for(var Y=0;Y<O.length;Y++){var ae=(ne?N:O[Y]).length,$=!1,oe=ne?Object.keys(O[Y]).length===0:O[Y].length===0;if(V&&!ne&&($=V==="greedy"?O[Y].join("").trim()==="":O[Y].length===1&&O[Y][0].length===0),V==="greedy"&&ne){for(var ce=[],ee=0;ee<ae;ee++){var re=fe?N[ee]:ee;ce.push(O[Y][re])}$=ce.join("").trim()===""}if(!$){for(var H=0;H<ae;H++){0<H&&!oe&&(G+=T);var ke=ne&&fe?N[H]:H;G+=j(O[Y][ke],H)}Y<O.length-1&&(!V||0<ae&&!oe)&&(G+=A)}}return G}function j(N,O){var V,G;return N==null?"":N.constructor===Date?JSON.stringify(N).slice(1,25):(G=!1,W&&typeof N=="string"&&W.test(N)&&(N="'"+N,G=!0),V=N.toString().replace(D,ue),(G=G||w===!0||typeof w=="function"&&w(N,O)||Array.isArray(w)&&w[O]||((ne,fe)=>{for(var Q=0;Q<fe.length;Q++)if(-1<ne.indexOf(fe[Q]))return!0;return!1})(V,u.BAD_DELIMITERS)||-1<V.indexOf(T)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?Z+V+Z:V)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=b,u.ParserHandle=E,u.NetworkStreamer=m,u.FileStreamer=y,u.StringStreamer=x,u.ReadableStreamStreamer=v,n.jQuery&&((s=n.jQuery).fn.parse=function(o){var c=o.config||{},w=[];return this.each(function(A){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var Z=0;Z<this.files.length;Z++)w.push({file:this.files[Z],inputElem:this,instanceConfig:s.extend({},c)})}),_(),this;function _(){if(w.length===0)P(o.complete)&&o.complete();else{var A,Z,ue,me,M=w[0];if(P(o.before)){var W=o.before(M.file,M.inputElem);if(typeof W=="object"){if(W.action==="abort")return A="AbortError",Z=M.file,ue=M.inputElem,me=W.reason,void(P(o.error)&&o.error({name:A},Z,ue,me));if(W.action==="skip")return void T();typeof W.config=="object"&&(M.instanceConfig=s.extend(M.instanceConfig,W.config))}else if(W==="skip")return void T()}var D=M.instanceConfig.complete;M.instanceConfig.complete=function(se){P(D)&&D(se,M.file,M.inputElem),T()},u.parse(M.file,M.instanceConfig)}}function T(){w.splice(0,1),_()}}),a&&(n.onmessage=function(o){o=o.data,u.WORKER_ID===void 0&&o&&(u.WORKER_ID=o.workerId),typeof o.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(o.input,o.config),finished:!0}):(n.File&&o.input instanceof File||o.input instanceof Object)&&(o=u.parse(o.input,o.config))&&n.postMessage({workerId:u.WORKER_ID,results:o,finished:!0})}),(m.prototype=Object.create(f.prototype)).constructor=m,(y.prototype=Object.create(f.prototype)).constructor=y,(x.prototype=Object.create(x.prototype)).constructor=x,(v.prototype=Object.create(f.prototype)).constructor=v,u})}(dr)),dr.exports}var wo=bo();const Ge=Vs(wo);function xo(e,t){return Ge.parse(e,t)}function Eo(e,t){Ge.parse(e,Object.assign({},{download:!0},t))}function Co(e,t){return t===void 0&&(t={}),Ge.unparse(e,t)}function Ro(){return{readString:xo,readRemoteFile:Eo,jsonToCSV:Co}}Ge.BAD_DELIMITERS;Ge.RECORD_SEP;Ge.UNIT_SEP;Ge.WORKERS_SUPPORTED;Ge.LocalChunkSize;Ge.DefaultDelimiter;function Bs({cell:e}){return R.jsx("td",{className:"py-2 px-2 text-sm text-gray-900",children:e})}function Jr({row:e}){return R.jsx("tr",{className:"divide-x divide-gray-200 even:bg-gray-50",children:e.map((t,r)=>R.jsx(Bs,{cell:t},r))})}function zs({data:e}){const{readString:t}=Ro(),r=t(e,{chunk:!0,complete:n=>n}).data;return r.length>=1e3?R.jsxs(R.Fragment,{children:[R.jsx("p",{className:"font-bold mb-2",role:"alert",children:"This is a preview of the first 1000 rows"}),R.jsx("div",{className:"flow-root",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsx("div",{className:"inline-block min-w-full align-middle",children:R.jsx("table",{className:"min-w-full divide-y divide-gray-300",children:R.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.slice(0,1e3).map((n,s)=>R.jsx(Jr,{row:n},s))})})})})})]}):R.jsx("div",{className:"flow-root",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsx("div",{className:"inline-block min-w-full align-middle",children:R.jsx("table",{className:"min-w-full divide-y divide-gray-300",children:R.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r.map((n,s)=>R.jsx(Jr,{row:n},s))})})})})})}Bs.propTypes={cell:L.string.isRequired};Jr.propTypes={row:L.arrayOf(L.string).isRequired};zs.propTypes={data:L.string.isRequired};function Xr({data:e}){return R.jsx("pre",{className:"whitespace-break-spaces break-words",children:e})}Xr.propTypes={data:L.string.isRequired};function Qs({authToken:e,fileName:t,fileSize:r,fileUrl:n,uuid:s}){const{data:i,error:a,isLoading:h,isError:l}=ws({queryKey:["FILE",n],queryFn:async()=>{if(!In(t)||r>2e7||Gr(t)&&r>5e6)return!1;const u=`${n}?${s}`;let f=await fetch(u,{headers:{Authorization:e}});if(!f.ok)throw new Error;if(f.headers.has("Location")&&f.headers.has("Authorization")&&(f=await fetch(f.headers.get("Location"),{headers:{Authorization:f.headers.get("Authorization")}}),!f.ok))throw new Error;const m=await f.clone().text();if(m===Ir)return Ir;if(Yr(t)){const y=await f.blob();return URL.createObjectURL(y)}return m},meta:{errorMessage:`${t} - Unable to load file`,id:n}});return h?R.jsx("span",{children:"Loading..."}):i===Ir?R.jsxs(R.Fragment,{children:[R.jsx("p",{children:"This file has not been uploaded yet. This is likely due to do an error that occurred during release."}),R.jsx("p",{className:"mt-3",children:R.jsx(Rr,{href:"https://docs.opensafely.org/how-to-get-help/#slack",newTab:!0,children:"Contact tech support in Slack for more information."})})]}):l||!i||!In(t)?R.jsx(qs,{error:a,fileUrl:n}):R.jsxs(R.Fragment,{children:[Gr(t)?R.jsx(zs,{data:i}):null,Ms(t)&&R.jsx($s,{data:i,fileName:t,fileUrl:n}),Yr(t)?R.jsx(Us,{data:i}):null,Ns(t)?R.jsx(Xr,{data:i}):null,As(t)?R.jsx(Xr,{data:i}):null]})}Qs.propTypes={authToken:Re.authToken.isRequired,fileName:$e.name.isRequired,fileSize:$e.size.isRequired,fileUrl:$e.url.isRequired,uuid:L.number.isRequired};const So=new Oa({defaultOptions:{queries:{refetchOnWindowFocus:!1}},queryCache:new fs({onError:(e,t)=>{t.meta.errorMessage&&un({message:t.meta.errorMessage,toastId:t.meta.id,filesUrl:t.meta.id,url:document.location.href})}})});function Hs({authToken:e,csrfToken:t,filesUrl:r,prepareUrl:n=null,publishUrl:s=null}){const i=Date.now(),[a,h]=p.useState(!0),[l,u]=p.useState();return R.jsxs(ja,{client:So,children:[R.jsxs("div",{className:"py-6",children:[(n||s)&&R.jsxs("div",{className:"mb-3 -mt-3 px-1 md:px-6",children:[n&&R.jsx(Ps,{authToken:e,csrfToken:t,filesUrl:r,prepareUrl:n}),s&&R.jsx(Os,{csrfToken:t,publishUrl:s})]}),R.jsxs("div",{className:"grid gap-6 grid-cols-1 px-1 md:grid-cols-3 md:px-6 lg:grid-cols-4",children:[R.jsxs("div",{className:"flex flex-col gap-y-1 md:col-span-1",children:[R.jsxs(xr,{className:"block md:hidden mb-3",onClick:()=>h(!a),type:"button",variant:"secondary",children:[a?"Hide":"Show"," file list"]}),R.jsx(Ds,{authToken:e,filesUrl:r,listVisible:a,setListVisible:h,setSelectedFile:u})]}),R.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:l&&R.jsx(Ht,{container:!0,header:R.jsx(js,{fileDate:l.date,fileName:l.shortName,fileSize:l.size,fileUrl:l.url}),children:R.jsx(Qs,{authToken:e,fileName:l.shortName,fileSize:l.size,fileUrl:l.url,uuid:i})})})]})]}),R.jsx(po,{}),R.jsx(Wa,{initialIsOpen:!1})]})}Hs.propTypes={authToken:Re.authToken.isRequired,csrfToken:Re.csrfToken.isRequired,filesUrl:Re.filesUrl.isRequired,prepareUrl:Re.prepareUrl,publishUrl:Re.publishUrl};Ks({dsn:void 0,tracesSampleRate:1});const fr=document.getElementById("outputsSPA"),_o=Ws.createRoot(fr);document.getElementById("content")&&document.getElementById("content").remove();_o.render(R.jsx(X.StrictMode,{children:R.jsx(oa,{basename:fr.dataset.basePath,children:R.jsx(Hs,{...fr.dataset,element:fr})})}));
