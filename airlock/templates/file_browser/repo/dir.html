{% load django_vite %}
{% load static %}

<style>
  #customTable thead {
    position: sticky;
    top: 0;
    text-align: left;
    background-color: rgba(248,250,252);
  }

  #customTable td.name a.directory {
    background-image: url(/static/folder.png);
    background-repeat: no-repeat;
    background-size: 1.4rem;
    background-position: left -0.2rem top 0;
    padding-left: 1.1rem;
  }

</style>


{% #card title=path_item.name container=True %}
  {% if not path_item.children %}
    This directory is empty
  {% else %}

    {% include "file_browser/_includes/directory_table/repo.html" %}

    {% vite_asset "assets/src/scripts/components.js" app="job_server" %}

    <script type="text/javascript">
      // ensure datatable is initialised when loading over HTMX
      window.initCustomTable ? window.initCustomTable() : null;

      // implement select all checkbox
      function toggleSelectAll(elem, event) {
        const form = document.querySelector("#multiselect_form");

        const checkboxes = form.querySelectorAll('input[type="checkbox"]');

        checkboxes.forEach(function(checkbox) {
          checkbox.checked = elem.checked;
        });
      }
    </script>

  {% endif %}
{% /card %}
